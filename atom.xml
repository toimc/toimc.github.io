<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Coding World</title>
  
  <subtitle>Stay hungry, stay foolish</subtitle>
  <link href="https://www.toimc.com/atom.xml" rel="self"/>
  
  <link href="https://www.toimc.com/"/>
  <updated>2021-03-19T08:23:52.354Z</updated>
  <id>https://www.toimc.com/</id>
  
  <author>
    <name>var author=&#39;Brian&#39;</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>hexoåšå®¢ä»£ç æŠ˜å åŠŸèƒ½</title>
    <link href="https://www.toimc.com/hexo-usage-2/"/>
    <id>https://www.toimc.com/hexo-usage-2/</id>
    <published>2021-03-19T06:59:48.000Z</published>
    <updated>2021-03-19T08:23:52.354Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨Heoxä¸­å³ä½¿å†é•¿çš„ä»£ç ï¼Œé»˜è®¤å‘å¸ƒå‡ºæ¥å¾ˆé•¿ï¼Œä¹Ÿä¸ä¼šè¿›è¡ŒæŠ˜å ã€‚è¿™æ€ä¹ˆèƒ½å¿ï¼Ÿæœ¬æ–‡ä»‹ç»å¦‚ä½•åœ¨Hexoä¸­å®ç°ç±»å‹ä»£ç æŠ˜å åŠŸèƒ½ï¼Œè®©æ–‡ç« çœ‹èµ·æ¥æ›´åŠ æ¸…çˆ½</p><span id="more"></span><h2 id="å…ˆä¸Šæ•ˆæœ"><a href="#å…ˆä¸Šæ•ˆæœ" class="headerlink" title="å…ˆä¸Šæ•ˆæœ"></a>å…ˆä¸Šæ•ˆæœ</h2><p>è´¹è¯ä¸å¤šè¯´ï¼Œçœ‹çœ‹æ•ˆæœï¼š</p><img class="lazyload" src="https://static.www.toimc.com/blog/img/2021/hexo-usage-2/fold.gif?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/200"><p>æœ¬åšå®¢ç›®å‰é‡‡ç”¨çš„æ–¹æ¡ˆï¼Œå³æ˜¯è¿™ç§ã€‚</p><h2 id="å‰é¢˜-amp-æ€è·¯"><a href="#å‰é¢˜-amp-æ€è·¯" class="headerlink" title="å‰é¢˜&amp;æ€è·¯"></a>å‰é¢˜&amp;æ€è·¯</h2><p>æœ¬åšå®¢ç¯å¢ƒï¼š<code>hexo@5.4.0</code>ï¼Œ<code>next@8.2.2</code>ï¼Œä»¥ä¸‹æ‰€æœ‰ä»£ç ï¼Œå»ºç«‹åœ¨è¿™ä¸ªåŸºç¡€ä¹‹ä¸Šã€‚</p><p>ç”± jQuery é€‰æ‹©å™¨é€‰æ‹©ä»£ç æ¨¡å—<code>.highlight</code>ç›¸å…³çš„DOMèŠ‚ç‚¹ï¼Œç»™è¶…è¿‡æŸä¸ªé«˜åº¦çš„ä»£ç æ¨¡å—æ·»åŠ å±•å¼€æ”¶èµ·çš„ç›’å­ï¼Œè®©ç›’å­å®ç°å±•å¼€éšè—æ•ˆæœã€‚</p><h2 id="æŠ˜å é€»è¾‘"><a href="#æŠ˜å é€»è¾‘" class="headerlink" title="æŠ˜å é€»è¾‘"></a>æŠ˜å é€»è¾‘</h2><h3 id="æ·»åŠ code-unfold-js"><a href="#æ·»åŠ code-unfold-js" class="headerlink" title="æ·»åŠ code-unfold.js"></a>æ·»åŠ <code>code-unfold.js</code></h3><p>ç”±äºæ˜¯åœ¨<code>next</code>ä¸»é¢˜ä¸­æ·»åŠ jsé€»è¾‘ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠ<code>code-unfold.js</code>æ”¾ç½®åœ¨äº†<code>themes/next/source/js/code-unfold.js</code>ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> CODE_MAX_HEIGHT = <span class="number">200</span>;</span><br><span class="line"><span class="keyword">var</span> containers = [];</span><br><span class="line"></span><br><span class="line"><span class="comment">// å±•å¼€</span></span><br><span class="line">$(<span class="string">&#x27;body&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;.js_unfold_code_btn&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="built_in">this</span>).closest(<span class="string">&#x27;.js_highlight_container&#x27;</span>).addClass(<span class="string">&#x27;on&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// æ”¶èµ·</span></span><br><span class="line">$(<span class="string">&#x27;body&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;.js_retract_code_btn&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> $container = $(<span class="built_in">this</span>).closest(<span class="string">&#x27;.js_highlight_container&#x27;</span>).removeClass(<span class="string">&#x27;on&#x27;</span>);</span><br><span class="line">  <span class="keyword">var</span> winTop = $(<span class="built_in">window</span>).scrollTop();</span><br><span class="line">  <span class="keyword">var</span> offsetTop = $container.offset().top;</span><br><span class="line">  $(<span class="built_in">this</span>).css(<span class="string">&#x27;top&#x27;</span>, <span class="number">0</span>);</span><br><span class="line">  <span class="keyword">if</span> (winTop &gt; offsetTop) &#123;</span><br><span class="line">    <span class="comment">// è®¾ç½®æ»šåŠ¨æ¡ä½ç½®</span></span><br><span class="line">    $(<span class="string">&#x27;body, html&#x27;</span>).animate(&#123;</span><br><span class="line">      scrollTop: $container.offset().top - CODE_MAX_HEIGHT</span><br><span class="line">    &#125;, <span class="number">600</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// æ»šåŠ¨äº‹ä»¶ï¼Œè§¦å‘åŠ¨ç”»æ•ˆæœ</span></span><br><span class="line">$(<span class="built_in">window</span>).on(<span class="string">&#x27;scroll&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> scrollTop = $(<span class="built_in">window</span>).scrollTop();</span><br><span class="line">  <span class="keyword">var</span> temp = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; containers.length; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> item = containers[i];</span><br><span class="line">    <span class="keyword">var</span> &#123; $container, height, $hide, hasHorizontalScrollbar &#125; = item;</span><br><span class="line">    <span class="keyword">if</span> ($container.closest(<span class="string">&#x27;body&#x27;</span>).length === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">// å¦‚æœ $container å…ƒç´ å·²ç»ä¸åœ¨é¡µé¢ä¸Š, åˆ™åˆ é™¤è¯¥å…ƒç´ </span></span><br><span class="line">      <span class="comment">// é˜²æ­¢pjaxé¡µé¢è·³è½¬ä¹‹åï¼Œå…ƒç´ æœªåˆ é™¤</span></span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    temp.push(item);</span><br><span class="line">    <span class="keyword">if</span> (!$container.hasClass(<span class="string">&#x27;on&#x27;</span>)) &#123;</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> offsetTop = $container.offset().top;</span><br><span class="line">    <span class="keyword">var</span> hideBtnHeight = $hide.outerHeight();</span><br><span class="line">    <span class="comment">// å‡å»æŒ‰é’®é«˜åº¦ï¼Œå‡å»åº•éƒ¨æ»šåŠ¨æ¡é«˜åº¦</span></span><br><span class="line">    <span class="keyword">var</span> maxTop = <span class="built_in">parseInt</span>(height - (hasHorizontalScrollbar ? <span class="number">17</span> : <span class="number">0</span>) - hideBtnHeight);</span><br><span class="line">    <span class="keyword">let</span> top = <span class="built_in">parseInt</span>(</span><br><span class="line">      <span class="built_in">Math</span>.min(</span><br><span class="line">        <span class="built_in">Math</span>.max(scrollTop - offsetTop, <span class="number">0</span>), <span class="comment">// å¦‚æœå°äº 0 ï¼Œåˆ™å– 0</span></span><br><span class="line">        maxTop,<span class="comment">// å¦‚æœå¤§äº height ï¼Œåˆ™å– height</span></span><br><span class="line">      )</span><br><span class="line">    );</span><br><span class="line">    <span class="comment">// æ ¹æ® sin æ›²çº¿è®¾ç½®&quot;æ”¶èµ·ä»£ç &quot;ä½ç½®</span></span><br><span class="line">    <span class="keyword">var</span> halfHeight = <span class="built_in">parseInt</span>($(<span class="built_in">window</span>).height() / <span class="number">2</span> * <span class="built_in">Math</span>.sin((top / maxTop) * <span class="number">90</span> * (<span class="number">2</span> * <span class="built_in">Math</span>.PI/<span class="number">360</span>)));</span><br><span class="line">    $hide.css(<span class="string">&#x27;top&#x27;</span>, <span class="built_in">Math</span>.min(top + halfHeight, maxTop));</span><br><span class="line">  &#125;</span><br><span class="line">  containers = temp;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ éšè—å®¹å™¨</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addCodeWrap</span>(<span class="params">$node</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> $container = $node.wrap(<span class="string">&#x27;&lt;div class=&quot;js_highlight_container highlight-container&quot;&gt;&lt;div class=&quot;highlight-wrap&quot;&gt;&lt;/div&gt;&lt;/div&gt;&#x27;</span>).closest(<span class="string">&#x27;.js_highlight_container&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åº•éƒ¨ &quot;å±•å¼€ä»£ç &quot; ä¸ ä¾§è¾¹æ  &quot;æ”¶èµ·ä»£ç &quot;</span></span><br><span class="line">  <span class="keyword">var</span> $btn = $(<span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div class=&quot;highlight-footer&quot;&gt;</span></span><br><span class="line"><span class="string">      &lt;a class=&quot;js_unfold_code_btn show-btn&quot; href=&quot;javascript:;&quot;&gt;å±•å¼€ä»£ç &lt;i class=&quot;fa fa-angle-down&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&lt;/a&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;a class=&quot;js_retract_code_btn hide-btn&quot; href=&quot;javascript:;&quot;&gt;&lt;i class=&quot;fa fa-angle-up&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;æ”¶èµ·ä»£ç &lt;/a&gt;</span></span><br><span class="line"><span class="string">  `</span>);</span><br><span class="line"></span><br><span class="line">  $container.append($btn);</span><br><span class="line">  <span class="keyword">return</span> $container;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">codeUnfold</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">&#x27;.highlight&#x27;</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// é˜²æ­¢é‡å¤æ¸²æŸ“</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.__render__ === <span class="literal">true</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.__render__ = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">var</span> $this = $(<span class="built_in">this</span>);</span><br><span class="line">    <span class="keyword">var</span> height = $(<span class="built_in">this</span>).outerHeight();</span><br><span class="line">    <span class="keyword">if</span> (height &gt; CODE_MAX_HEIGHT) &#123;</span><br><span class="line">      <span class="comment">// æ·»åŠ å±•å¼€&amp;æ”¶èµ·å®¹å™¨</span></span><br><span class="line">      <span class="keyword">var</span> $container = addCodeWrap($this, height);</span><br><span class="line">      containers.push(&#123;</span><br><span class="line">        $container,</span><br><span class="line">        height,</span><br><span class="line">        $hide: $container.find(<span class="string">&#x27;.js_retract_code_btn&#x27;</span>),</span><br><span class="line">        hasHorizontalScrollbar: <span class="built_in">this</span>.scrollWidth &gt; <span class="built_in">this</span>.offsetWidth,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ jquery"><a href="#æ·»åŠ jquery" class="headerlink" title="æ·»åŠ jquery"></a>æ·»åŠ <code>jquery</code></h3><p>ç”±äºéœ€è¦ä½¿ç”¨<code>jquery</code>åœ¨<code>next</code>ä¸»é¢˜æ–‡ä»¶ä¸­</p><p>æ–¹æ¡ˆä¸€ï¼š</p><p>ä¿®æ”¹é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">fancybox:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>å› ä¸º<code>fancybox</code>ä¼šä¾èµ–<code>jquery</code>ï¼Œæ‰€ä»¥è®¾ç½®æˆ<code>true</code></p><p>æ–¹æ¡ˆäºŒï¼šåœ¨<code>next</code>ä¸»é¢˜å…¨å±€å¼•ç”¨jquery</p><h3 id="å¼•ç”¨code-unfold-js"><a href="#å¼•ç”¨code-unfold-js" class="headerlink" title="å¼•ç”¨code-unfold.js"></a>å¼•ç”¨<code>code-unfold.js</code></h3><p>ä¿®æ”¹æ–‡ä»¶<code>themes/next/layout/_scripts/index.njk</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨æœ€åæ·»åŠ </span></span><br><span class="line">&#123;&#123;- next_js(<span class="string">&#x27;code-unfold.js&#x27;</span>) &#125;&#125;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ‰¾åˆ°æ–‡ä»¶<code>themes/next/source/js/next-boot.js</code>ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">NexT.boot.refresh = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æ·»åŠ ä¸€è¡Œä»£ç </span></span><br><span class="line">  codeUnfold()</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ...</span></span><br></pre></td></tr></table></figure><h2 id="æ·»åŠ æ ·å¼"><a href="#æ·»åŠ æ ·å¼" class="headerlink" title="æ·»åŠ æ ·å¼"></a>æ·»åŠ æ ·å¼</h2><h3 id="åˆ›å»ºhighlight-styl"><a href="#åˆ›å»ºhighlight-styl" class="headerlink" title="åˆ›å»ºhighlight.styl"></a>åˆ›å»º<code>highlight.styl</code></h3><p>å¯ä»¥æ·»åŠ <code>theme/next/source/css/_common/components/highlight.styl</code>æ–‡ä»¶ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å±•å¼€æ”¶èµ·æ•ˆæœ</span></span><br><span class="line">.highlight-container</span><br><span class="line">  <span class="attribute">position</span>: relative</span><br><span class="line">  <span class="attribute">background-color</span>: highlight-background</span><br><span class="line">  &amp;.on</span><br><span class="line">    .highlight-footer</span><br><span class="line">      <span class="attribute">display</span>: none</span><br><span class="line">    .hide-btn</span><br><span class="line">      <span class="attribute">display</span>: flex</span><br><span class="line">    .highlight-wrap</span><br><span class="line">      <span class="attribute">max-height</span>: none</span><br><span class="line">  .highlight-wrap</span><br><span class="line">    <span class="attribute">overflow</span>: hidden</span><br><span class="line">    <span class="attribute">max-height</span>: <span class="number">200px</span></span><br><span class="line">  .highlight-footer</span><br><span class="line">    <span class="attribute">position</span> absolute</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span></span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span></span><br><span class="line">    <span class="attribute">height</span>: <span class="number">60px</span></span><br><span class="line">    <span class="attribute">background-image</span>: <span class="string">&#x27;linear-gradient(-180deg, rgba(255,255,255,0) 0%, %s 65%)&#x27;</span> % highlight-background;</span><br><span class="line">    <span class="attribute">text-align</span>: center</span><br><span class="line">  .show-btn</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span></span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span></span><br><span class="line">    <span class="attribute">position</span>: absolute</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span></span><br><span class="line">    <span class="attribute">transform</span>: translateX(-<span class="number">50%</span>)</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span></span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">2em</span></span><br><span class="line">    <span class="attribute">text-decoration</span>: none</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">0.8em</span></span><br><span class="line">    <span class="attribute">text-align</span>: center</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">4px</span> <span class="number">4px</span> <span class="number">0</span></span><br><span class="line">    &amp;:hover</span><br><span class="line">      <span class="attribute">text-decoration</span>: none</span><br><span class="line">  .hide-btn</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span></span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">22px</span></span><br><span class="line">    <span class="attribute">position</span>: absolute</span><br><span class="line">    <span class="attribute">left</span>: -<span class="number">21px</span></span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span></span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1em</span></span><br><span class="line">    <span class="attribute">text-decoration</span>: none</span><br><span class="line">    <span class="attribute">text-align</span>: center</span><br><span class="line">    <span class="attribute">display</span>: none</span><br><span class="line">    <span class="attribute">flex-direction</span>: column</span><br><span class="line">    <span class="attribute">background-color</span>: highlight-background</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">4px</span> <span class="number">0</span> <span class="number">0</span> <span class="number">4px</span></span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0.1em</span> <span class="number">0</span> <span class="number">0.6em</span></span><br><span class="line">    <span class="attribute">transition</span>: top ease <span class="number">0.35s</span></span><br><span class="line">  <span class="selector-class">.fa-angle-up</span>,</span><br><span class="line">  .fa-angle-down</span><br><span class="line">    <span class="attribute">font-style</span>: normal</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span></span><br><span class="line">  <span class="selector-class">.fa-angle-up</span>:before</span><br><span class="line">    <span class="attribute">content</span>:<span class="string">&quot;\f106&quot;</span></span><br><span class="line">  <span class="selector-class">.fa-angle-down</span>:before</span><br><span class="line">    <span class="attribute">content</span>:<span class="string">&quot;\f107&quot;</span></span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">0.5em</span></span><br><span class="line">  <span class="selector-class">.js_unfold_code_btn</span>, .js_retract_code_btn</span><br><span class="line">    <span class="attribute">background</span>: rgba(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.5</span>)</span><br><span class="line">    <span class="attribute">border-bottom</span>: none <span class="meta">!important</span></span><br><span class="line">    &amp;:hover</span><br><span class="line">      <span class="attribute">border-bottom-color</span>: none <span class="meta">!important</span></span><br></pre></td></tr></table></figure><h3 id="å¼•ç”¨æ ·å¼"><a href="#å¼•ç”¨æ ·å¼" class="headerlink" title="å¼•ç”¨æ ·å¼"></a>å¼•ç”¨æ ·å¼</h3><p>æ‰¾åˆ°æ–‡ä»¶<code>themes/next/source/css/_common/scaffolding/index.styl</code>ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@import &#x27;tags&#x27;;</span><br><span class="line">@import &#x27;pagination&#x27;;</span><br><span class="line">@import &#x27;comments&#x27;;</span><br><span class="line"><span class="comment">// æ·»åŠ è¿™ä¸€è¡Œ</span></span><br><span class="line">@import &#x27;darkmode&#x27;;</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†hexoåšå®¢é•¿ä»£ç æŠ˜å åŠŸèƒ½ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨Heoxä¸­å³ä½¿å†é•¿çš„ä»£ç ï¼Œé»˜è®¤å‘å¸ƒå‡ºæ¥å¾ˆé•¿ï¼Œä¹Ÿä¸ä¼šè¿›è¡ŒæŠ˜å ã€‚è¿™æ€ä¹ˆèƒ½å¿ï¼Ÿæœ¬æ–‡ä»‹ç»å¦‚ä½•åœ¨Hexoä¸­å®ç°ç±»å‹ä»£ç æŠ˜å åŠŸèƒ½ï¼Œè®©æ–‡ç« çœ‹èµ·æ¥æ›´åŠ æ¸…çˆ½&lt;/p&gt;</summary>
    
    
    
    <category term="hexoåšå®¢è¿›é˜¶ç©æ³•" scheme="https://www.toimc.com/categories/hexo%E5%8D%9A%E5%AE%A2%E8%BF%9B%E9%98%B6%E7%8E%A9%E6%B3%95/"/>
    
    
    <category term="node.js" scheme="https://www.toimc.com/tags/node-js/"/>
    
    <category term="hexo" scheme="https://www.toimc.com/tags/hexo/"/>
    
    <category term="next" scheme="https://www.toimc.com/tags/next/"/>
    
    <category term="å‰ç«¯" scheme="https://www.toimc.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>hexoåšå®¢nextä¸»é¢˜æ·»åŠ å¤œé—´æ¨¡å¼ï¼ˆDark Modeï¼‰</title>
    <link href="https://www.toimc.com/hexo-usage-1/"/>
    <id>https://www.toimc.com/hexo-usage-1/</id>
    <published>2021-03-19T05:35:09.000Z</published>
    <updated>2021-03-19T06:38:48.810Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦ä»‹ç»ä¸ºhexo nextä¸»é¢˜æ·»åŠ ä¸€ä¸ªå¯ä»¥åˆ‡æ¢çš„é»‘è‰²/å¤œé—´æ¨¡å¼ï¼Œè™½ç„¶next 8.0 ä¸»é¢˜å·²ç»æ”¯æŒåŸç”Ÿé»‘è‰²æ¨¡å¼ï¼Œä½†æ˜¯è¿™ä¸ªé»‘è‰²æ¨¡å¼æ˜¯ä¸å¯ä»¥åˆ‡æ¢çš„ã€‚æœ¬æ–‡ä»‹ç»å¦‚ä½•å®ç°æŒ‰é’®æ¥åˆ‡æ¢ï¼ŒåŒ…æ‹¬å¦‚ä½•åœ¨ä»£ç éƒ¨åˆ†ä¹Ÿåˆ‡æ¢å¤œé—´æ¨¡å¼ã€‚</p><span id="more"></span><h2 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2><p>è´¹è¯ä¸å¤šè¯´ï¼Œå…ˆä¸Šæ•ˆæœ</p><img class="lazyload" src="https://static.www.toimc.com/blog/img/2021/hexo-usage-1/dark.gif?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/200"><p>ç‰¹ç‚¹ï¼š</p><ul><li>ä»£ç éƒ¨åˆ†è¿›è¡ŒDark/Lightæ¨¡å¼åˆ‡æ¢</li><li>åˆ‡æ¢æœ‰åŠ¨ç”»</li><li>å¯¹<code>code</code>éƒ¨åˆ†è¿›è¡Œä¼˜åŒ–</li></ul><h2 id="å‰é¢˜"><a href="#å‰é¢˜" class="headerlink" title="å‰é¢˜"></a>å‰é¢˜</h2><p>é¦–å…ˆï¼Œä½ è¦ç¡®å®šè‡ªå·±çš„Hexoä¸nextçš„ç‰ˆæœ¬ï¼š</p><p>Hexoåœ¨è¿™é‡Œï¼š<a href="https://github.com/hexojs/hexo%EF%BC%8C%E7%9B%AE%E5%89%8D%E7%9A%84%E7%89%88%E6%9C%AC%E6%98%AF%EF%BC%9A%605.4.0%60">https://github.com/hexojs/hexoï¼Œç›®å‰çš„ç‰ˆæœ¬æ˜¯ï¼š`5.4.0`</a></p><p>Nextä¸»é¢˜åœ¨è¿™é‡Œï¼š<a href="https://github.com/next-theme/hexo-theme-next%EF%BC%8C%E7%9B%AE%E5%89%8D%E7%9A%84%E7%89%88%E6%9C%AC%E6%98%AF%EF%BC%9A[![NPM">https://github.com/next-theme/hexo-theme-nextï¼Œç›®å‰çš„ç‰ˆæœ¬æ˜¯ï¼š[![NPM</a> version](<a href="https://img.shields.io/npm/v/hexo-theme-next?color=red&amp;logo=npm&amp;style=flat-square)%5D(https://www.npmjs.com/package/hexo-theme-next)">https://img.shields.io/npm/v/hexo-theme-next?color=red&amp;logo=npm&amp;style=flat-square)](https://www.npmjs.com/package/hexo-theme-next)</a></p><p>è™½ç„¶next 8.0 ä¸»é¢˜å·²ç»æ”¯æŒåŸç”Ÿé»‘è‰²æ¨¡å¼ï¼Œåªéœ€è¦åœ¨ _config.next.yml æ–‡ä»¶ä¸­ï¼Œå°†ç›¸åº”å¼€å…³æ‰“å¼€<code>darkmode: true</code>å³å¯ã€‚</p><p>ä½†æ˜¯è¿™ä¸ªé»‘è‰²æ¨¡å¼æ˜¯ä¸å¯ä»¥åˆ‡æ¢çš„ï¼Œæœ¬æ–‡å°†ä»‹ç»å¦‚ä½•å®ç°ä¸€ä¸ªæŒ‰é’®æ¥åˆ‡æ¢é»‘/ç™½æ¨¡å¼ã€‚</p><p>æˆ‘ä»¬ä½¿ç”¨çš„ä¸»é¢˜æ˜¯ï¼š<code>scheme: Mist</code>ï¼Œå…¶ä»–ç±»ä¼¼æ€è·¯è¿›è¡Œè°ƒæ•´ã€‚</p><h2 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h2><p>æ€è·¯ï¼š</p><ol><li>ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„åŒ…å®ç°åˆ‡æ¢darkmodeä¸»é¢˜</li><li>åˆ‡ç”¨nextä¸»é¢˜å·²ç»æœ‰çš„darkæ¨¡å¼ï¼Œä¸ºä»£ç é«˜äº®éƒ¨åˆ†æ·»åŠ æ ·å¼</li></ol><h3 id="äº†è§£darkmode-js"><a href="#äº†è§£darkmode-js" class="headerlink" title="äº†è§£darkmode.js"></a>äº†è§£darkmode.js</h3><p>æˆ‘ä»¬ä¸»è¦ä½¿ç”¨åˆ°äº†è¿™ä¸ªåº“<a href="https://github.com/sandoche/Darkmode.js">Darkmode.js</a> æ¥å®ç°æ•´ä½“åˆ‡æ¢æ•ˆæœï¼Œåœ¨å®˜æ–¹çš„githubä¸Šæœ‰<a href="https://github.com/sandoche/Darkmode.js#-how-to-use">ä½¿ç”¨æ–¹å¼</a>çš„ä»‹ç»ã€‚</p><h3 id="ä¸‹è½½å¹¶é…ç½®nextä¸»é¢˜"><a href="#ä¸‹è½½å¹¶é…ç½®nextä¸»é¢˜" class="headerlink" title="ä¸‹è½½å¹¶é…ç½®nextä¸»é¢˜"></a>ä¸‹è½½å¹¶é…ç½®nextä¸»é¢˜</h3><p>æˆ‘ä»¬è¦é›†æˆåˆ°hexoä¸­æ—¶ï¼Œéœ€è¦è€ƒè™‘æ˜¯ä½¿ç”¨æœ¬åœ°çš„jsè¿˜æ˜¯cdnçš„jsï¼Œæˆ‘çš„æ–¹å¼æ˜¯<a href="https://github.com/sandoche/Darkmode.js/blob/master/lib/darkmode-js.min.js">ä¸‹è½½</a>åˆ°libç›®å½•ä¸­ï¼Œä½¿ç”¨æœ¬åœ°çš„ï¼Œä»¥å…å‡ºç°åç»­çš„ä¾èµ–é—®é¢˜ã€‚</p><p>åœ¨ <code>themes/next/_vendors.yml</code> ä¸­æŒ‡å®š<code>darkmode-js</code>çš„æ–‡ä»¶ï¼š</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">darkmode_js:</span></span><br><span class="line"><span class="symbol">  name:</span> darkmode-js</span><br><span class="line"><span class="symbol">  version:</span> <span class="number">1.5</span><span class="number">.7</span></span><br><span class="line"><span class="symbol">  file:</span> lib/darkmode-js.min.js</span><br></pre></td></tr></table></figure><p>åœ¨<code>next</code>ä¸»é¢˜çš„çš„ <code>_config.yml</code>æ–‡ä»¶ä¸­ï¼Œæ·»åŠ <code>darkmode_js</code>çš„ç›¸å…³å¼€å…³ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">vendors:</span></span><br><span class="line">  <span class="comment"># ä½¿ç”¨CDNå¯é€‰ï¼Œdarkmode_js: https://cdn.jsdelivr.net/npm/darkmode-js/lib/darkmode-js.min.js</span></span><br><span class="line">  <span class="attr">darkmode_js:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># darkmode.js</span></span><br><span class="line"><span class="attr">darkmode_js:</span> </span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ç¼©è¿›ï¼ç¬¬ä¸€ä¸ªdarkmode_jsæ˜¯åœ¨vendorsæ ç›®ä¸‹ï¼Œç¬¬äºŒä¸ªdarkmode_jsæ˜¯ä¸€ä¸ªå•ç‹¬çš„æ ç›®ã€‚</p></blockquote><h3 id="ä¿®æ”¹ä¸»é¢˜æ¨¡æ¿"><a href="#ä¿®æ”¹ä¸»é¢˜æ¨¡æ¿" class="headerlink" title="ä¿®æ”¹ä¸»é¢˜æ¨¡æ¿"></a>ä¿®æ”¹ä¸»é¢˜æ¨¡æ¿</h3><p>æ‰“å¼€ <code>themes/next/layout/_scripts/vendors.njk</code>ï¼Œé…ç½®ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&#123;%- <span class="keyword">if</span> theme.canvas_ribbon.enable %&#125;</span><br><span class="line">  &lt;script size=<span class="string">&quot;&#123;&#123; theme.canvas_ribbon.size &#125;&#125;&quot;</span> alpha=<span class="string">&quot;&#123;&#123; theme.canvas_ribbon.alpha &#125;&#125;&quot;</span> zIndex=<span class="string">&quot;&#123;&#123; theme.canvas_ribbon.zIndex &#125;&#125;&quot;</span> src=<span class="string">&quot;&#123;&#123; theme.vendors.canvas_ribbon &#125;&#125;&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&#123;%- endif %&#125;</span><br><span class="line"></span><br><span class="line">&#123;# Customize darkmode.js - Declaration #&#125;</span><br><span class="line">&#123;%- <span class="keyword">if</span> theme.darkmode_js.enable %&#125;</span><br><span class="line">  &lt;script src=<span class="string">&quot;&#123;&#123; theme.vendors.darkmode_js &#125;&#125;&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&#123;%- endif %&#125;</span><br><span class="line"></span><br><span class="line">&#123;%- <span class="keyword">for</span> name <span class="keyword">in</span> js_vendors() %&#125;</span><br><span class="line">  &lt;script src=<span class="string">&quot;&#123;&#123; url_for(theme.vendors[name]) &#125;&#125;&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&#123;%- endfor %&#125;</span><br><span class="line"></span><br><span class="line">&#123;# Customize darkmode.js - Invokation #&#125;</span><br><span class="line">&#123;%- <span class="keyword">if</span> theme.darkmode_js.enable %&#125;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">var</span> options = &#123;</span><br><span class="line">  bottom: <span class="string">&#x27;64px&#x27;</span>, <span class="comment">// default: &#x27;32px&#x27;</span></span><br><span class="line">  right: <span class="string">&#x27;unset&#x27;</span>, <span class="comment">// default: &#x27;32px&#x27;</span></span><br><span class="line">  left: <span class="string">&#x27;32px&#x27;</span>, <span class="comment">// default: &#x27;unset&#x27;</span></span><br><span class="line">  time: <span class="string">&#x27;0.5s&#x27;</span>, <span class="comment">// default: &#x27;0.3s&#x27;</span></span><br><span class="line">  mixColor: <span class="string">&#x27;#fff&#x27;</span>, <span class="comment">// default: &#x27;#fff&#x27;</span></span><br><span class="line">  backgroundColor: <span class="string">&#x27;#fff&#x27;</span>,  <span class="comment">// default: &#x27;#fff&#x27;</span></span><br><span class="line">  buttonColorDark: <span class="string">&#x27;#100f2c&#x27;</span>,  <span class="comment">// default: &#x27;#100f2c&#x27;</span></span><br><span class="line">  buttonColorLight: <span class="string">&#x27;#fff&#x27;</span>, <span class="comment">// default: &#x27;#fff&#x27;</span></span><br><span class="line">  saveInCookies: <span class="literal">true</span>, <span class="comment">// default: true,</span></span><br><span class="line">  label: <span class="string">&#x27;ğŸŒ“&#x27;</span>, <span class="comment">// default: &#x27;&#x27;</span></span><br><span class="line">  autoMatchOsTheme: <span class="literal">true</span> <span class="comment">// default: true</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> darkmode = <span class="keyword">new</span> Darkmode(options);</span><br><span class="line">darkmode.showWidget();</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&#123;%- endif %&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œä¸»è¦æ˜¯åœ¨å…¨å±€åŠ å…¥äº†ä¸€æ®µåˆå§‹åŒ–<code>darkmode-js</code>çš„ä»£ç ã€‚</p><p>é‡æ–°ç”Ÿæˆå³å¯å¼€å¯:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo clean <span class="meta">&amp;&amp; hexo g</span></span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>åˆæ­¥æ•ˆæœ</p><img class="lazyload" src="https://static.www.toimc.com/blog/img/2021/hexo-usage-1/dark-1.gif?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/200"><p>è‡´å‘½é—®é¢˜ï¼Œæ²¡æœ‰å¯¹ä»£ç å—<code>highlight</code>éƒ¨åˆ†ç”Ÿæ•ˆã€‚</p><h3 id="ä»£ç Darkä¸»é¢˜"><a href="#ä»£ç Darkä¸»é¢˜" class="headerlink" title="ä»£ç Darkä¸»é¢˜"></a>ä»£ç Darkä¸»é¢˜</h3><p>ä»<code>next</code>çš„8.0å¼€å§‹ï¼Œå·²ç»æœ‰äº†darkä¸»é¢˜ï¼Œç›´æ¥å¯ä»¥<code>_config.xml</code>ï¼Œå‚è€ƒï¼š<a href="https://github.com/theme-next/hexo-theme-next/issues/1395">issues#1395</a></p><p>ä½†æ˜¯ï¼ŒæŒ‰ç…§å®˜æ–¹çš„è®¾ç½®äº†ä¹‹åï¼Œæ— æ³•åŠ¨æ€çš„åˆ‡æ¢äº†ã€‚</p><p>ç»§ç»­æ·±æŒ–<a href="https://github.com/next-theme/hexo-theme-next/commit/03e50d01ac59d136d8d9ccda187d898c0e424332">å®˜æ–¹çš„ä»£ç </a>ï¼Œæœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„æ–‡ä»¶<code>source/css/_colors.styl</code>ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">  --<span class="selector-tag">body</span>-bg-<span class="attribute">color</span>: $body-bg-color;</span><br><span class="line">  --<span class="attribute">content</span>-bg-<span class="attribute">color</span>: $content-bg-color;</span><br><span class="line">  --card-bg-<span class="attribute">color</span>: $card-bg-color;</span><br><span class="line">  --text-<span class="attribute">color</span>: $text-color;</span><br><span class="line">  --<span class="selector-tag">blockquote</span>-<span class="attribute">color</span>: $blockquote-color;</span><br><span class="line">  --link-<span class="attribute">color</span>: $link-color;</span><br><span class="line">  --link-hover-<span class="attribute">color</span>: $link-hover-color;</span><br><span class="line">  --brand-<span class="attribute">color</span>: $brand-color;</span><br><span class="line">  --brand-hover-<span class="attribute">color</span>: $brand-hover-color;</span><br><span class="line">  --<span class="selector-tag">table</span>-row-odd-bg-<span class="attribute">color</span>: $table-row-odd-bg-color;</span><br><span class="line">  --<span class="selector-tag">table</span>-row-hover-bg-<span class="attribute">color</span>: $table-row-hover-bg-color;</span><br><span class="line">  --<span class="selector-tag">menu</span>-item-bg-<span class="attribute">color</span>: $menu-item-bg-color;</span><br><span class="line"></span><br><span class="line">  --btn-default-bg: $btn-default-bg;</span><br><span class="line">  --btn-default-<span class="attribute">color</span>: $btn-default-color;</span><br><span class="line">  --btn-default-<span class="attribute">border-color</span>: $btn-default-border-color;</span><br><span class="line">  --btn-default-hover-bg: $btn-default-hover-bg;</span><br><span class="line">  --btn-default-hover-<span class="attribute">color</span>: $btn-default-hover-color;</span><br><span class="line">  --btn-default-hover-<span class="attribute">border-color</span>: $btn-default-hover-border-color;</span><br><span class="line"></span><br><span class="line">  --highlight-<span class="attribute">background</span>: $highlight-background;</span><br><span class="line">  --highlight-foreground: $highlight-foreground;</span><br><span class="line">  --highlight-gutter-<span class="attribute">background</span>: $highlight-gutter-background;</span><br><span class="line">  --highlight-gutter-foreground: $highlight-gutter-foreground;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">if (hexo-config(&#x27;darkmode&#x27;)) &#123;</span><br><span class="line">  <span class="keyword">@media</span> (<span class="attribute">prefers-color-scheme</span>: dark) &#123;</span><br><span class="line">    <span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">      --<span class="selector-tag">body</span>-bg-<span class="attribute">color</span>: $body-bg-color-dark;</span><br><span class="line">      --<span class="attribute">content</span>-bg-<span class="attribute">color</span>: $content-bg-color-dark;</span><br><span class="line">      --card-bg-<span class="attribute">color</span>: $card-bg-color-dark;</span><br><span class="line">      --text-<span class="attribute">color</span>: $text-color-dark;</span><br><span class="line">      --<span class="selector-tag">blockquote</span>-<span class="attribute">color</span>: $blockquote-color-dark;</span><br><span class="line">      --link-<span class="attribute">color</span>: $link-color-dark;</span><br><span class="line">      --link-hover-<span class="attribute">color</span>: $link-hover-color-dark;</span><br><span class="line">      --brand-<span class="attribute">color</span>: $brand-color-dark;</span><br><span class="line">      --brand-hover-<span class="attribute">color</span>: $brand-hover-color-dark;</span><br><span class="line">      --<span class="selector-tag">table</span>-row-odd-bg-<span class="attribute">color</span>: $table-row-odd-bg-color-dark;</span><br><span class="line">      --<span class="selector-tag">table</span>-row-hover-bg-<span class="attribute">color</span>: $table-row-hover-bg-color-dark;</span><br><span class="line">      --<span class="selector-tag">menu</span>-item-bg-<span class="attribute">color</span>: $menu-item-bg-color-dark;</span><br><span class="line"></span><br><span class="line">      --btn-default-bg: $btn-default-bg-dark;</span><br><span class="line">      --btn-default-<span class="attribute">color</span>: $btn-default-color-dark;</span><br><span class="line">      --btn-default-<span class="attribute">border-color</span>: $btn-default-border-color-dark;</span><br><span class="line">      --btn-default-hover-bg: $btn-default-hover-bg-dark;</span><br><span class="line">      --btn-default-hover-<span class="attribute">color</span>: $btn-default-hover-color-dark;</span><br><span class="line">      --btn-default-hover-<span class="attribute">border-color</span>: $btn-default-hover-border-color-dark;</span><br><span class="line"></span><br><span class="line">      --highlight-<span class="attribute">background</span>: $highlight-background-dark;</span><br><span class="line">      --highlight-foreground: $highlight-foreground-dark;</span><br><span class="line">      --highlight-gutter-<span class="attribute">background</span>: $highlight-gutter-background-dark;</span><br><span class="line">      --highlight-gutter-foreground: $highlight-gutter-foreground-dark;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">img</span> &#123;</span><br><span class="line">      <span class="attribute">opacity</span>: .<span class="number">75</span>;</span><br><span class="line"></span><br><span class="line">      &amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: .<span class="number">9</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŸæ¥åˆ‡æ¢æ·±è‰²ä¸å¦æ˜¯åˆ‡æ¢äº†åŸºç¡€çš„å˜é‡ï¼Œé‚£ä¹ˆæ€ä¹ˆä¸darkmode-js`ç»“åˆå‘¢ï¼Ÿ</p><blockquote><p>A CSS class <code>darkmode--activated</code> is added to the body tag when the darkmode is activated. You can take advantage of it to override the style and have a custom style</p></blockquote><p>åœ¨<code>darkmode</code>è¢«æ¿€æ´»çš„æ—¶å€™ï¼Œä¼šåœ¨bodyä¸Šæ·»åŠ ä¸€ä¸ª<code>darkmode--activated</code>çš„ç±»ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘ä»¬æŠŠä¸Šé¢çš„æ ·å¼æ·»åŠ åˆ°å®ƒçš„ä¸‹é¢ï¼Œæ˜¯ä¸æ˜¯å°±å®ç°äº†darkæ¨¡å¼çš„åˆ‡æ¢ï¼Ÿ</p><p>é¦–å…ˆï¼Œä¿®æ”¹æ–‡ä»¶<code>next/source/css/_colors.styl</code>ï¼ŒæŠŠ<code>:root</code>ä¿®æ”¹æˆ<code>body</code>ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  --<span class="selector-tag">body</span>-bg-<span class="attribute">color</span>: <span class="variable">$body-bg-color</span>;</span><br><span class="line">  --<span class="attribute">content</span>-bg-<span class="attribute">color</span>: <span class="variable">$content-bg-color</span>;</span><br><span class="line"><span class="comment">// ..</span></span><br></pre></td></tr></table></figure><p>ç„¶åæ·»åŠ æ–‡ä»¶<code>next/source/css/_common/scaffolding/darkmode.styl</code>ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.darkmode--activated</span>&#123;</span><br><span class="line">  --<span class="selector-tag">body</span>-bg-<span class="attribute">color</span>: $body-bg-color-dark;</span><br><span class="line">  --<span class="attribute">content</span>-bg-<span class="attribute">color</span>: $content-bg-color-dark;</span><br><span class="line">  --card-bg-<span class="attribute">color</span>: $card-bg-color-dark;</span><br><span class="line">  --text-<span class="attribute">color</span>: $text-color-dark;</span><br><span class="line">  --<span class="selector-tag">blockquote</span>-<span class="attribute">color</span>: $blockquote-color-dark;</span><br><span class="line">  --link-<span class="attribute">color</span>: $link-color-dark;</span><br><span class="line">  --link-hover-<span class="attribute">color</span>: $link-hover-color-dark;</span><br><span class="line">  --brand-<span class="attribute">color</span>: $brand-color-dark;</span><br><span class="line">  --brand-hover-<span class="attribute">color</span>: $brand-hover-color-dark;</span><br><span class="line">  --<span class="selector-tag">table</span>-row-odd-bg-<span class="attribute">color</span>: $table-row-odd-bg-color-dark;</span><br><span class="line">  --<span class="selector-tag">table</span>-row-hover-bg-<span class="attribute">color</span>: $table-row-hover-bg-color-dark;</span><br><span class="line">  --<span class="selector-tag">menu</span>-item-bg-<span class="attribute">color</span>: $menu-item-bg-color-dark;</span><br><span class="line"></span><br><span class="line">  --btn-default-bg: $btn-default-bg-dark;</span><br><span class="line">  --btn-default-<span class="attribute">color</span>: $btn-default-color-dark;</span><br><span class="line">  --btn-default-<span class="attribute">border-color</span>: $btn-default-border-color-dark;</span><br><span class="line">  --btn-default-hover-bg: $btn-default-hover-bg-dark;</span><br><span class="line">  --btn-default-hover-<span class="attribute">color</span>: $btn-default-hover-color-dark;</span><br><span class="line">  --btn-default-hover-<span class="attribute">border-color</span>: $btn-default-hover-border-color-dark;</span><br><span class="line"></span><br><span class="line">  --highlight-<span class="attribute">background</span>: $highlight-background-dark;</span><br><span class="line">  --highlight-foreground: $highlight-foreground-dark;</span><br><span class="line">  --highlight-gutter-<span class="attribute">background</span>: $highlight-gutter-background-dark;</span><br><span class="line">  --highlight-gutter-foreground: $highlight-gutter-foreground-dark;</span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: .<span class="number">75</span>;</span><br><span class="line"></span><br><span class="line">    &amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">      <span class="attribute">opacity</span>: .<span class="number">9</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;    </span><br></pre></td></tr></table></figure><p>æœ€åå°±æ˜¯å¼•å…¥<code>next/source/css/_common/scaffolding/index.styl</code>ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//</span><br><span class="line">// Scaffolding</span><br><span class="line">// ==================================================</span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;normalize&#x27;</span>;</span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;base&#x27;</span>;</span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;tables&#x27;</span>;</span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;buttons&#x27;</span>;</span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;toggles&#x27;</span>;</span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;highlight&#x27;</span>;</span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;tags&#x27;</span>;</span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;pagination&#x27;</span>;</span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;comments&#x27;</span>;</span><br><span class="line">// è¿™é‡Œå¼•å…¥</span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;darkmode&#x27;</span>;</span><br></pre></td></tr></table></figure><p>å®ç°æ•ˆæœï¼š</p><img class="lazyload" src="https://static.www.toimc.com/blog/img/2021/hexo-usage-1/dark.jpg?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/200"><h3 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h3><p>ä¸Šé¢ï¼Œæ˜¾ç¤ºçš„ä»£ç å—<code>code</code>éƒ¨åˆ†ï¼Œä¸å¤ªå®Œç¾ï¼Œè€Œä¸”ï¼Œå¯¹äºå¤´éƒ¨ä¹Ÿä¸å¤ªå®Œç¾ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿›è¡Œæ ·å¼ä¸Šçš„è°ƒæ•´ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.darkmode--activated</span>&#123;</span><br><span class="line">  // ..</span><br><span class="line"></span><br><span class="line">// ä¼˜åŒ–å†…å®¹</span><br><span class="line">  <span class="selector-tag">code</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#69dbdc</span>;</span><br><span class="line">    <span class="attribute">background</span>: transparent;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.header</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#fff</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;    </span><br></pre></td></tr></table></figure><p>æœ¬æ–‡å®Œã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ¬æ–‡ä¸»è¦ä»‹ç»ä¸ºhexo nextä¸»é¢˜æ·»åŠ ä¸€ä¸ªå¯ä»¥åˆ‡æ¢çš„é»‘è‰²/å¤œé—´æ¨¡å¼ï¼Œè™½ç„¶next 8.0 ä¸»é¢˜å·²ç»æ”¯æŒåŸç”Ÿé»‘è‰²æ¨¡å¼ï¼Œä½†æ˜¯è¿™ä¸ªé»‘è‰²æ¨¡å¼æ˜¯ä¸å¯ä»¥åˆ‡æ¢çš„ã€‚æœ¬æ–‡ä»‹ç»å¦‚ä½•å®ç°æŒ‰é’®æ¥åˆ‡æ¢ï¼ŒåŒ…æ‹¬å¦‚ä½•åœ¨ä»£ç éƒ¨åˆ†ä¹Ÿåˆ‡æ¢å¤œé—´æ¨¡å¼ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="hexoåšå®¢è¿›é˜¶ç©æ³•" scheme="https://www.toimc.com/categories/hexo%E5%8D%9A%E5%AE%A2%E8%BF%9B%E9%98%B6%E7%8E%A9%E6%B3%95/"/>
    
    
    <category term="node.js" scheme="https://www.toimc.com/tags/node-js/"/>
    
    <category term="hexo" scheme="https://www.toimc.com/tags/hexo/"/>
    
    <category term="next" scheme="https://www.toimc.com/tags/next/"/>
    
    <category term="å‰ç«¯" scheme="https://www.toimc.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>nestjsæ­å»ºé€šç”¨ä¸šåŠ¡æ¡†æ¶ï¼ˆ5ï¼‰ï¼šæ•°æ®åº“+é…ç½®</title>
    <link href="https://www.toimc.com/nestjs-example-project-5/"/>
    <id>https://www.toimc.com/nestjs-example-project-5/</id>
    <published>2021-03-17T00:06:28.000Z</published>
    <updated>2021-03-17T00:12:39.549Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™æ˜¯ã€Šnestjsæ­å»ºé€šç”¨ä¸šåŠ¡æ¡†æ¶ã€‹ç³»åˆ—çš„ç¬¬5ç¯‡ï¼Œè¿›å…¥å¼€å‘å…·ä½“çš„åŠŸèƒ½ä¹‹å‰ï¼Œå­¦ä¹ nestæ¡†æ¶æœ¬èº«æä¾›çš„CLIå·¥å…·ä¸è§„åˆ’åˆç†çš„å·¥ç¨‹ç›®å½•ï¼Œå¯¹äºè¦å®ç°çš„å†…å®¹è¿›è¡Œæ¶æ„ä¸è®¡åˆ’ï¼Œè¿™æ˜¯å®ç°å¥å£®é«˜å¯ç”¨çš„æ¡†æ¶çš„å‰æã€‚</p><span id="more"></span><p>æŠ€æœ¯æ•´åˆä¼šä»ä¸‰ä¸ªå±‚æ¬¡è¿›è¡Œä»‹ç»ï¼š</p><ul><li><p>æ•°æ®åº“ -&gt; é…ç½®(å¤šç¯å¢ƒ) -&gt; é…ç½®éªŒè¯ -&gt; ç³»ç»Ÿæ—¥å¿—ï¼ˆæœ¬ç¯‡ï¼‰</p></li><li><p>è·¨åŸŸ -&gt; é”™è¯¯æ‹¦æˆªå™¨ -&gt; ç¼“å­˜Redis</p></li><li><p>æ•°æ®æ ¡éªŒ -&gt; æ—¥å¿—æ‹¦æˆª -&gt; é‰´æƒ</p></li></ul><h2 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h2><h3 id="ORMå·¥å…·åº“"><a href="#ORMå·¥å…·åº“" class="headerlink" title="ORMå·¥å…·åº“"></a>ORMå·¥å…·åº“</h3><p>é€šè¿‡æ•°æ®åº“é›†æˆåº“æˆ– <code>ORM</code> ï¼Œä¾‹å¦‚ <a href="https://www.npmjs.com/package/sequelize">Sequelize (recipe)</a>å’Œ <a href="https://github.com/typeorm/typeorm">TypeORM</a> ï¼Œä»¥åœ¨æ›´é«˜çš„æŠ½è±¡çº§åˆ«ä¸Šè¿›è¡Œæ“ä½œã€‚</p><blockquote><p>ORMï¼šå¯¹è±¡å…³ç³»æ˜ å°„ï¼ˆè‹±è¯­ï¼šObject Relational Mappingï¼‰æ˜¯ä¸€ç§ç¨‹åºè®¾è®¡æŠ€æœ¯ï¼Œç”¨äºå®ç°é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€é‡Œä¸åŒç±»å‹ç³»ç»Ÿçš„æ•°æ®ä¹‹é—´çš„è½¬æ¢ã€‚ ä»æ•ˆæœä¸Šè¯´ï¼Œå®ƒå…¶å®æ˜¯åˆ›å»ºäº†ä¸€ä¸ªå¯åœ¨ç¼–ç¨‹è¯­è¨€é‡Œä½¿ç”¨çš„â€œè™šæ‹Ÿå¯¹è±¡æ•°æ®åº“â€ã€‚</p></blockquote><p>åº”ç”¨åœºæ™¯ï¼š</p><ul><li>SQL -&gt; DBï¼šæˆ‘ä»¬å†™ä¸€å¥—é…ç½®ï¼Œé’ˆå¯¹ä¸åŒçš„æ•°æ®åº“ï¼Œéƒ½å¯ä»¥æ–¹ä¾¿çš„æ¥å…¥</li><li>DB -&gt; SQLï¼šé’ˆå¯¹ä¸åŒçš„æ•°æ®åº“ï¼Œéƒ½å¯ä»¥é€šè¿‡æŠ½è±¡å±‚è¿›è¡Œè”æ¥</li></ul><blockquote><p><code>Nest</code> è¿˜æä¾›äº†ä¸ç°æˆçš„ <code>TypeORM</code> ä¸ <code>@nestjs/typeorm</code> çš„ç´§å¯†é›†æˆï¼Œæˆ‘ä»¬å°†åœ¨æœ¬ç« ä¸­å¯¹æ­¤è¿›è¡Œä»‹ç»ï¼Œè€Œä¸ <code>@nestjs/mongoose</code> çš„ç´§å¯†é›†æˆå°†åœ¨å®˜æ–¹çš„<a href="https://docs.nestjs.cn/7/techniques?id=mongo">è¿™ä¸€ç« </a>ä¸­ä»‹ç»</p></blockquote><p>ç›®å‰ä¸»è¦çš„ORMå·¥å…·åº“ä¸ç‰¹ç‚¹ï¼š</p><ul><li><p><a href="https://www.npmjs.com/package/typeorm">typeorm</a>ï¼šè·¨åº“æŸ¥è¯¢ï¼Œäº‹åŠ¡ã€TSæ”¯æŒï¼Œæ”¯æŒæ•°æ®åº“ï¼šMySQL, MariaDB, Postgres, CockroachDB, SQLite, MSSQL, Oracle, SAPHana, sql.js, MongoDB</p></li><li><p><a href="https://www.npmjs.com/package/objection">objection</a>ï¼š TSã€äº‹åŠ¡ã€é¥¥é¥¿åŠ è½½ã€æ•°æ®æ•ˆéªŒï¼ŒåŸºäº<a href="http://knexjs.org/">knexjs</a>ï¼Œæ”¯æŒæ•°æ®åº“ï¼šPostgres**, <strong>MSSQL</strong>, <strong>MySQL</strong>, <strong>MariaDB</strong>, <strong>SQLite3</strong>, **Oracle, Amazon Redshift</p></li><li><p><a href="https://www.npmjs.com/package/sequelize">sequelize</a>ï¼š æœ‰éå®˜æ–¹çš„ä¸­æ–‡æ–‡æ¡£ï¼Œç›®å‰ç¼ºå°‘æ ¸å¿ƒçš„ç»´æŠ¤ä¸å¼€å‘ã€‚æ”¯æŒï¼šPostgreSQL, MySQL, MariaDB, SQLite, MSSQL</p></li><li><p><a href="https://www.npmjs.com/package/prisma">prisma</a>ï¼šåèµ·ä¹‹ç§€(å®˜æ–¹æ–‡æ¡£å†™çš„å¾ˆä¸é”™)ï¼ŒSQLè‡ªåŠ¨åˆå¹¶ï¼Œå¯¹æ¥GraphQLï¼Œå®¢æˆ·ç«¯ã€æœåŠ¡ç«¯+æ•°æ®ç®¡ç†GUIï¼Œæ”¯æŒï¼šPostgreSQL, MSSQL, MySQL, SQLite</p></li></ul><p>é€šè¿‡ä¸Šé¢çš„ç®€å•å¯¹æ¯”ï¼Œç›®å‰æ¥çœ‹TypeORMæ˜¯<code>nest</code>å®˜æ–¹æ”¯æŒä¸”æ¨èçš„ï¼Œå¯ä»¥æ¥<a href="https://typeorm.biunav.com/zh/#%E5%AE%89%E8%A3%85">è¿™é‡Œ</a>çœ‹çœ‹å®ƒçš„ç‰¹æ€§ã€‚</p><h3 id="ä½¿ç”¨docker-composeåˆ›å»ºprogresæ•°æ®åº“"><a href="#ä½¿ç”¨docker-composeåˆ›å»ºprogresæ•°æ®åº“" class="headerlink" title="ä½¿ç”¨docker-composeåˆ›å»ºprogresæ•°æ®åº“"></a>ä½¿ç”¨<code>docker-compose</code>åˆ›å»ºprogresæ•°æ®åº“</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3.5&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">postgres:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">postgres_container</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">postgres</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">POSTGRES_USER:</span> <span class="string">$&#123;POSTGRES_USER:-postgres&#125;</span></span><br><span class="line">      <span class="attr">POSTGRES_PASSWORD:</span> <span class="string">$&#123;POSTGRES_PASSWORD:-changeme&#125;</span></span><br><span class="line">      <span class="attr">PGDATA:</span> <span class="string">/data/postgres</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">       <span class="bullet">-</span> <span class="string">postgres:/data/postgres</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;5432:5432&quot;</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">postgres</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">unless-stopped</span></span><br><span class="line">  </span><br><span class="line">  <span class="attr">pgadmin:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">pgadmin_container</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">dpage/pgadmin4</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">PGADMIN_DEFAULT_EMAIL:</span> <span class="string">$&#123;PGADMIN_DEFAULT_EMAIL:-pgadmin4@pgadmin.org&#125;</span></span><br><span class="line">      <span class="attr">PGADMIN_DEFAULT_PASSWORD:</span> <span class="string">$&#123;PGADMIN_DEFAULT_PASSWORD:-admin&#125;</span></span><br><span class="line">      <span class="attr">PGADMIN_CONFIG_SERVER_MODE:</span> <span class="string">&#x27;False&#x27;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">       <span class="bullet">-</span> <span class="string">pgadmin:/root/.pgadmin</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;$&#123;PGADMIN_PORT:-5050&#125;:80&quot;</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">postgres</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">unless-stopped</span></span><br><span class="line"></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">postgres:</span></span><br><span class="line">    <span class="attr">driver:</span> <span class="string">bridge</span></span><br><span class="line"></span><br><span class="line"><span class="attr">volumes:</span></span><br><span class="line">    <span class="attr">postgres:</span></span><br><span class="line">    <span class="attr">pgadmin:</span></span><br></pre></td></tr></table></figure><ul><li>è®¿é—®postgres<br>localhost:5432<br>ç”¨æˆ·å: postgres (é»˜è®¤)<br>å¯†ç ï¼šchangemeï¼ˆé»˜è®¤ï¼‰</li><li>è¿›å…¥PgAdmin<br>ç½‘å€ï¼š<a href="http://localhost:5050/">http://localhost:5050</a><br>ç”¨æˆ·å: <a href="mailto:&#112;&#103;&#x61;&#x64;&#x6d;&#x69;&#x6e;&#x34;&#x40;&#x70;&#103;&#x61;&#x64;&#x6d;&#x69;&#x6e;&#x2e;&#111;&#x72;&#103;">&#112;&#103;&#x61;&#x64;&#x6d;&#x69;&#x6e;&#x34;&#x40;&#x70;&#103;&#x61;&#x64;&#x6d;&#x69;&#x6e;&#x2e;&#111;&#x72;&#103;</a> (é»˜è®¤)<br>å¯†ç ï¼šadminï¼ˆé»˜è®¤)</li></ul><h3 id="é›†æˆTypeORMå’ŒPostgreæ•°æ®åº“"><a href="#é›†æˆTypeORMå’ŒPostgreæ•°æ®åº“" class="headerlink" title="é›†æˆTypeORMå’ŒPostgreæ•°æ®åº“"></a>é›†æˆ<code>TypeORM</code>å’Œ<code>Postgre</code>æ•°æ®åº“</h3><p>æ­¥éª¤ï¼š</p><ul><li>å®‰è£…<code>@nestjs/typeorm</code>ï¼Œ<code>typeorm</code></li><li>å®‰è£…nodejsä¾§çš„æ•°æ®åº“é©±åŠ¨ç¨‹åºï¼Œå¦‚<code>mysql</code>ï¼Œ<code>pg</code></li><li>æ–°å»ºæ•°æ®åº“é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“</li><li>åœ¨<code>app.module.ts</code>å¼•å…¥æ•°æ®åº“çš„é…ç½®æ–‡ä»¶ï¼Œè°ƒç”¨<code>TypeOrmModule.forRoot</code>æ–¹æ³•</li><li>å¯åŠ¨ç¨‹åºï¼Œè¿›è¡Œæµ‹è¯•</li></ul><p>å®‰è£…ä¾èµ–ï¼ˆè·³è¿‡æ•°æ®åº“å®‰è£…è¿‡ç¨‹ï¼‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save @nestjs/typeorm typeorm pg</span><br></pre></td></tr></table></figure><p>æŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤ï¼Œåˆ›å»ºæ–‡ä»¶<code>src/config/database.config.ts</code>ï¼š</p><p>æ•°æ®åº“é…ç½®ä¿¡æ¯ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; TypeOrmModuleOptions &#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/typeorm&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> typeOrmConfig: TypeOrmModuleOptions = &#123;</span><br><span class="line">  <span class="keyword">type</span>: <span class="string">&#x27;postgres&#x27;</span>,</span><br><span class="line">  host: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">  port: <span class="number">5432</span>,</span><br><span class="line">  username: <span class="string">&#x27;postgres&#x27;</span>,</span><br><span class="line">  password: <span class="string">&#x27;changeme&#x27;</span>,</span><br><span class="line">  database: <span class="string">&#x27;demo-db&#x27;</span>,</span><br><span class="line">  entities: [<span class="string">`<span class="subst">$&#123;__dirname&#125;</span>/../entity/**/*.&#123;js,ts&#125;`</span>],</span><br><span class="line">  synchronize: <span class="literal">false</span>,</span><br><span class="line">  logging: [<span class="string">&quot;error&quot;</span>],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨<code>src/app.module.ts</code>ä¸­æ·»åŠ <code>TypeOrm</code>é…ç½®ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Module &#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/common&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; TypeOrmModule &#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/typeorm&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; typeOrmConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;./config/typeorm.config&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Module</span>(&#123;</span><br><span class="line">  imports: [</span><br><span class="line">    TypeOrmModule.forRoot(typeOrmConfig)</span><br><span class="line">  ],</span><br><span class="line">  providers: [],</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppModule</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥ä½¿ç”¨<code>npm run start:dev</code>æ¥è¿›è¡Œè°ƒè¯•äº†ã€‚</p><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>åº”ç”¨ç¨‹åºé€šå¸¸åœ¨ä¸åŒçš„<strong>ç¯å¢ƒ</strong>ä¸­è¿è¡Œï¼Œæ ¹æ®ç¯å¢ƒï¼ˆDevelopmentï¼ŒProductionï¼‰çš„ä¸åŒï¼Œåº”è¯¥ä½¿ç”¨ä¸åŒçš„é…ç½®è®¾ç½®ã€‚</p><p>ä¸¤ç§æ–¹æ³•ï¼š</p><ul><li>ä½¿ç”¨<code>@nestjs/config</code>æ¥å®ç°å¯¹<code>.env</code>çš„<code>key=value</code>å¯¹è¿›è¡Œè§£æ</li><li>ä½¿ç”¨<code>config</code>åº“è§£æ<code>yaml</code>æ ¼å¼çš„æ–‡ä»¶</li></ul><h3 id="å®˜æ–¹-nestjs-config"><a href="#å®˜æ–¹-nestjs-config" class="headerlink" title="å®˜æ–¹@nestjs/config"></a>å®˜æ–¹<code>@nestjs/config</code></h3><h4 id="æœ€ç®€å•çš„ç”¨æ³•"><a href="#æœ€ç®€å•çš„ç”¨æ³•" class="headerlink" title="æœ€ç®€å•çš„ç”¨æ³•"></a>æœ€ç®€å•çš„ç”¨æ³•</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i --save @nestjs/config</span><br></pre></td></tr></table></figure><p>é…ç½®<code>src/app.module.ts</code>ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Module &#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/common&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; AppController &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.controller&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; AppService &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.service&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ConfigModule &#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/config&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Module</span>(&#123;</span><br><span class="line">  imports: [</span><br><span class="line">    ConfigModule.forRoot(),</span><br><span class="line">  ],</span><br><span class="line">  controllers: [AppController],</span><br><span class="line">  providers: [AppService],</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppModule</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååˆ›å»ºï¼š<code>.env</code>æ–‡ä»¶ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">DATABASE_USER</span>=test</span><br><span class="line"><span class="attr">DATABASE_PASSWORD</span>=test123</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ¥ä½¿ç”¨<code>src/app.controller.ts</code>ä¸­ä½¿ç”¨ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Controller, Get &#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/common&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ConfigService &#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/config&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; AppService &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.service&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppController</span> </span>&#123;</span><br><span class="line">  <span class="title">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">    <span class="keyword">private</span> <span class="keyword">readonly</span> appService: AppService,</span></span><br><span class="line"><span class="params">    <span class="keyword">private</span> configService: ConfigService,</span></span><br><span class="line"><span class="params">  </span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Get</span>()</span><br><span class="line">  getHello(): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> dbUser = <span class="built_in">this</span>.configService.get&lt;<span class="built_in">string</span>&gt;(<span class="string">&#x27;DATABASE_USER&#x27;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(dbUser); <span class="comment">// è¿™é‡Œæ¥æµ‹è¯•</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.appService.getHello();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœè®¿é—®<code>localhost:3000</code>å³å¯ä»¥çœ‹åˆ°ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[Nest] 14039   - 2021/03/13 ä¸‹åˆ9:43:54   [NestFactory] Starting Nest application...</span><br><span class="line">[Nest] 14039   - 2021/03/13 ä¸‹åˆ9:43:54   [InstanceLoader] ConfigHostModule dependencies initialized +95ms</span><br><span class="line">[Nest] 14039   - 2021/03/13 ä¸‹åˆ9:43:54   [InstanceLoader] ConfigModule dependencies initialized +0ms</span><br><span class="line">[Nest] 14039   - 2021/03/13 ä¸‹åˆ9:43:54   [InstanceLoader] AppModule dependencies initialized +1ms</span><br><span class="line">[Nest] 14039   - 2021/03/13 ä¸‹åˆ9:43:54   [RoutesResolver] AppController &#123;&#125;: +7ms</span><br><span class="line">[Nest] 14039   - 2021/03/13 ä¸‹åˆ9:43:54   [RouterExplorer] Mapped &#123;, GET&#125; route +3ms</span><br><span class="line">[Nest] 14039   - 2021/03/13 ä¸‹åˆ9:43:54   [NestApplication] Nest application successfully started +2ms</span><br><span class="line"><span class="built_in">test</span></span><br></pre></td></tr></table></figure><h4 id="è¿›é˜¶ç©æ³•"><a href="#è¿›é˜¶ç©æ³•" class="headerlink" title="è¿›é˜¶ç©æ³•"></a>è¿›é˜¶ç©æ³•</h4><img class="lazyload" src="https://static.www.toimc.com/blog/img/2021/nestjs-example-project-4/nestjs-1.jpg?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/200"><p>ä»è¿™é‡Œç‚¹è¿›å»ï¼Œæˆ‘ä»¬å‘ç°<code>ConfigModuleOptions</code>ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ConfigFactory &#125; <span class="keyword">from</span> <span class="string">&#x27;./config-factory.interface&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> ConfigModuleOptions &#123;</span><br><span class="line">    cache?: <span class="built_in">boolean</span>;</span><br><span class="line">    isGlobal?: <span class="built_in">boolean</span>;</span><br><span class="line">    ignoreEnvFile?: <span class="built_in">boolean</span>;</span><br><span class="line">    ignoreEnvVars?: <span class="built_in">boolean</span>;</span><br><span class="line">    envFilePath?: <span class="built_in">string</span> | <span class="built_in">string</span>[];</span><br><span class="line">    encoding?: <span class="built_in">string</span>;</span><br><span class="line">    validate?: <span class="function">(<span class="params">config: Record&lt;<span class="built_in">string</span>, <span class="built_in">any</span>&gt;</span>) =&gt;</span> Record&lt;<span class="built_in">string</span>, <span class="built_in">any</span>&gt;;</span><br><span class="line">    validationSchema?: <span class="built_in">any</span>;</span><br><span class="line">    validationOptions?: Record&lt;<span class="built_in">string</span>, <span class="built_in">any</span>&gt;;</span><br><span class="line">    load?: <span class="built_in">Array</span>&lt;ConfigFactory&gt;;</span><br><span class="line">    expandVariables?: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰€æ”¯æŒçš„å‚æ•°ã€‚</p><p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨<code>envFilePath</code>é…åˆ<code>NODE_ENV</code>æ¥ï¼Œåœ¨ä¸åŒçš„å¯åŠ¨å‘½ä»¤çš„æ—¶å€™ä½¿ç”¨ä¸åŒçš„é…ç½®ã€‚</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i <span class="keyword">cross</span>-<span class="keyword">env</span></span><br></pre></td></tr></table></figure><p>ç„¶åæ·»åŠ ä¸¤ä¸ªæ–‡ä»¶ï¼š<code>.env.development</code>ä¸<code>.env.production</code>ï¼Œæ¯”å¦‚<code>.env.production</code>ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">DATABASE_USER</span>=test1</span><br><span class="line"><span class="attr">DATABASE_PASSWORD</span>=test123321</span><br></pre></td></tr></table></figure><p>ä¸‹é¢ä¿®æ”¹<code>scripts</code>ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;start:prod&quot;: &quot;cross-env NODE_ENV=production node dist/main&quot;,</span><br></pre></td></tr></table></figure><p>å¯ä»¥è®¾ç½®<code>app.module.ts</code>ä¸­é»˜è®¤æ˜¯<code>development</code>ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Module &#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/common&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; AppController &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.controller&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; AppService &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.service&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ConfigModule &#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/config&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> envPath = <span class="string">`.env.<span class="subst">$&#123;process.env.NODE_ENV || <span class="string">&#x27;development&#x27;</span>&#125;</span>`</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;ğŸš€ ~ file: app.module.ts ~ line 7 ~ envPath&#x27;</span>, envPath);</span><br><span class="line"></span><br><span class="line"><span class="meta">@Module</span>(&#123;</span><br><span class="line">  imports: [</span><br><span class="line">    ConfigModule.forRoot(&#123;</span><br><span class="line">      envFilePath: envPath,</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  controllers: [AppController],</span><br><span class="line">  providers: [AppService],</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppModule</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure><p>åŒæ ·ï¼Œå¤§å®¶å¯ä»¥å¯åŠ¨äº†æµ‹è¯•ä¸€ä¸‹ã€‚</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">âœ npm run start:prod</span><br><span class="line"></span><br><span class="line">&gt; nestjs-common-template@<span class="number">0.0</span>.<span class="number">1</span> start:prod <span class="regexp">/Users/m</span>acos<span class="regexp">/Projects/</span>nestjs/nestjs-common-template</span><br><span class="line">&gt; cross-env NODE_ENV=production node dist/main</span><br><span class="line"></span><br><span class="line">ğŸš€ ~ <span class="keyword">file</span>: app.module.ts ~ line <span class="number">7</span> ~ envPath .env.production</span><br><span class="line">[Nest] <span class="number">14977</span>   - <span class="number">2021</span><span class="regexp">/03/</span><span class="number">13</span> ä¸‹åˆ<span class="number">11</span>:<span class="number">10</span>:<span class="number">13</span>   [NestFactory] Starting Nest application...</span><br><span class="line">[Nest] <span class="number">14977</span>   - <span class="number">2021</span><span class="regexp">/03/</span><span class="number">13</span> ä¸‹åˆ<span class="number">11</span>:<span class="number">10</span>:<span class="number">13</span>   [InstanceLoader] ConfigHostModule <span class="keyword">dependencies</span> initialized +<span class="number">34</span>ms</span><br><span class="line">[Nest] <span class="number">14977</span>   - <span class="number">2021</span><span class="regexp">/03/</span><span class="number">13</span> ä¸‹åˆ<span class="number">11</span>:<span class="number">10</span>:<span class="number">13</span>   [InstanceLoader] ConfigModule <span class="keyword">dependencies</span> initialized +<span class="number">1</span>ms</span><br><span class="line">[Nest] <span class="number">14977</span>   - <span class="number">2021</span><span class="regexp">/03/</span><span class="number">13</span> ä¸‹åˆ<span class="number">11</span>:<span class="number">10</span>:<span class="number">13</span>   [InstanceLoader] AppModule <span class="keyword">dependencies</span> initialized +<span class="number">1</span>ms</span><br><span class="line">[Nest] <span class="number">14977</span>   - <span class="number">2021</span><span class="regexp">/03/</span><span class="number">13</span> ä¸‹åˆ<span class="number">11</span>:<span class="number">10</span>:<span class="number">13</span>   [RoutesResolver] AppController &#123;&#125;: +<span class="number">6</span>ms</span><br><span class="line">[Nest] <span class="number">14977</span>   - <span class="number">2021</span><span class="regexp">/03/</span><span class="number">13</span> ä¸‹åˆ<span class="number">11</span>:<span class="number">10</span>:<span class="number">13</span>   [RouterExplorer] Mapped &#123;, GET&#125; route +<span class="number">3</span>ms</span><br><span class="line">[Nest] <span class="number">14977</span>   - <span class="number">2021</span><span class="regexp">/03/</span><span class="number">13</span> ä¸‹åˆ<span class="number">11</span>:<span class="number">10</span>:<span class="number">13</span>   [NestApplication] Nest application successfully started +<span class="number">3</span>ms</span><br><span class="line">test1</span><br></pre></td></tr></table></figure><p>ä¸Šé¢æ‰“å°çš„<code>test1</code>æ­£æ˜¯æˆ‘ä»¬è®¾ç½®åœ¨<code>.env.production</code>ä¸­çš„å†…å®¹ã€‚</p><h4 id="è§£æyamlæ ¼å¼çš„é…ç½®"><a href="#è§£æyamlæ ¼å¼çš„é…ç½®" class="headerlink" title="è§£æyamlæ ¼å¼çš„é…ç½®"></a>è§£æ<code>yaml</code>æ ¼å¼çš„é…ç½®</h4><p>æ­¥éª¤ï¼š</p><ul><li><p>ä¸‹è½½<code>js-yaml</code>ä¸<code>@types/js-yaml</code></p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">npm</span> i js-yaml</span><br><span class="line"><span class="built_in">npm</span> i -D @types/js-yaml</span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºé…ç½®ï¼š<code>config.yml</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">http:</span></span><br><span class="line">  <span class="attr">host:</span> <span class="string">&#x27;localhost&#x27;</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line"></span><br><span class="line"><span class="attr">db:</span></span><br><span class="line">  <span class="attr">postgres:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">&#x27;localhost&#x27;</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">5432</span></span><br><span class="line">    <span class="attr">database:</span> <span class="string">&#x27;yaml-db&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">sqlite:</span></span><br><span class="line">    <span class="attr">database:</span> <span class="string">&#x27;sqlite.db&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>é…ç½®è‡ªå®šä¹‰æ–‡ä»¶<code>configuration.ts</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; readFileSync &#125; <span class="keyword">from</span> <span class="string">&#x27;fs&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> yaml <span class="keyword">from</span> <span class="string">&#x27;js-yaml&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; join &#125; <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> YAML_CONFIG_FILENAME = <span class="string">&#x27;config.yml&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> filePath = join(__dirname, YAML_CONFIG_FILENAME);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> yaml.load(readFileSync(filePath, <span class="string">&#x27;utf8&#x27;</span>));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>è°ƒç”¨<code>forRoot</code>ä¸­çš„loadæ–¹æ³•</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Module &#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/common&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; AppController &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.controller&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; AppService &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.service&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ConfigModule &#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/config&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> Configuration <span class="keyword">from</span> <span class="string">&#x27;./config/configuration&#x27;</span>; <span class="comment">// è¿™é‡Œè°ƒæ•´</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Module</span>(&#123;</span><br><span class="line">  imports: [</span><br><span class="line">    ConfigModule.forRoot(&#123;</span><br><span class="line">      load: [Configuration], <span class="comment">// loadæ–¹æ³•</span></span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  controllers: [AppController],</span><br><span class="line">  providers: [AppService],</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppModule</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹<code>app.controller.ts</code>ä¸­çš„ä»£ç ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Controller, Get &#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/common&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ConfigService &#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/config&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; AppService &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.service&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; DatabaseConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;./interface&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppController</span> </span>&#123;</span><br><span class="line">  <span class="title">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">    <span class="keyword">private</span> <span class="keyword">readonly</span> appService: AppService,</span></span><br><span class="line"><span class="params">    <span class="keyword">private</span> configService: ConfigService,</span></span><br><span class="line"><span class="params">  </span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Get</span>()</span><br><span class="line">  getHello(): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> db = <span class="built_in">this</span>.configService.get&lt;DatabaseConfig&gt;(<span class="string">&#x27;db&#x27;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(db);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.appService.getHello();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®šä¹‰<code>src/interface.ts</code>ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> DatabaseConfig &#123;</span><br><span class="line">  postgres: PostgresConfig;</span><br><span class="line">  sqlite: SqliteConfig;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> PostgresConfig &#123;</span><br><span class="line">  url: <span class="built_in">string</span>;</span><br><span class="line">  port: <span class="built_in">number</span>;</span><br><span class="line">  database: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> SqliteConfig &#123;</span><br><span class="line">  database: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>æœ€åæµ‹è¯•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[Nest] 16960   - 2021/03/13 ä¸‹åˆ11:34:00   [NestFactory] Starting Nest application...</span><br><span class="line">[Nest] 16960   - 2021/03/13 ä¸‹åˆ11:34:00   [InstanceLoader] ConfigHostModule dependencies initialized +30ms</span><br><span class="line">[Nest] 16960   - 2021/03/13 ä¸‹åˆ11:34:00   [InstanceLoader] ConfigModule dependencies initialized +0ms</span><br><span class="line">[Nest] 16960   - 2021/03/13 ä¸‹åˆ11:34:00   [InstanceLoader] AppModule dependencies initialized +0ms</span><br><span class="line">[Nest] 16960   - 2021/03/13 ä¸‹åˆ11:34:00   [RoutesResolver] AppController &#123;&#125;: +4ms</span><br><span class="line">[Nest] 16960   - 2021/03/13 ä¸‹åˆ11:34:00   [RouterExplorer] Mapped &#123;, GET&#125; route +3ms</span><br><span class="line">[Nest] 16960   - 2021/03/13 ä¸‹åˆ11:34:00   [NestApplication] Nest application successfully started +1ms</span><br><span class="line">&#123;</span><br><span class="line">  postgres: &#123; url: <span class="string">&#x27;localhost&#x27;</span>, port: 5432, database: <span class="string">&#x27;yaml-db&#x27;</span> &#125;,</span><br><span class="line">  sqlite: &#123; database: <span class="string">&#x27;sqlite.db&#x27;</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†™åˆ°è¿™é‡Œï¼Œåº”è¯¥å¤Ÿç”¨äº†ï¼Œä»£ç å¯ä»¥æŸ¥çœ‹<a href="https://github.com/toimc/nestjs-example-template/tree/48c0d75e807faa1da7de53de26a5b1512a6584aa">æœ¬æ¬¡æäº¤</a>ã€‚</p><h3 id="ä½¿ç”¨configåº“è§£æ"><a href="#ä½¿ç”¨configåº“è§£æ" class="headerlink" title="ä½¿ç”¨configåº“è§£æ"></a>ä½¿ç”¨<code>config</code>åº“è§£æ</h3><p>æ­¥éª¤ï¼š</p><ul><li><p>å®‰è£…ç¬¬ä¸‰æ–¹åŒ…<code>config</code></p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">npm</span> i config -S</span><br><span class="line"><span class="built_in">npm</span> i cross-env -D</span><br></pre></td></tr></table></figure></li><li><p>æ–°å»º é…ç½®æ–‡ä»¶<code>config/default.json</code>ï¼ŒåŒæ ·è¿˜å¯ä»¥å»ºç«‹<code>development.json</code>, <code>production.json</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;server&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;happy&quot;</span>: <span class="string">&quot;my default value&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>development.json</code>:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;server&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;port&quot;</span>: <span class="number">3001</span>,</span><br><span class="line">    <span class="attr">&quot;host&quot;</span>: <span class="string">&quot;localhost&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;test&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;test&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>production.json</code>:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;server&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;port&quot;</span>: <span class="number">3002</span>,</span><br><span class="line">    <span class="attr">&quot;host&quot;</span>: <span class="string">&quot;localhost&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;prod&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;prod&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨<code>app.controller.ts</code>ä¸­ä½¿ç”¨ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Controller, Get &#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/common&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; AppService &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.service&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> config <span class="keyword">from</span> <span class="string">&#x27;config&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppController</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"><span class="keyword">private</span> <span class="keyword">readonly</span> appService: AppService</span>)</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Get</span>()</span><br><span class="line">  getHello(): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> server = config.get(<span class="string">&#x27;server&#x27;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(server);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.appService.getHello();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>é…ç½®è„šæœ¬ï¼š</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;start:dev&quot;</span>: <span class="string">&quot;cross-env NODE_ENV=development nest start --watch&quot;</span>,</span><br><span class="line"><span class="string">&quot;start:prod&quot;</span>: <span class="string">&quot;cross-env NODE_ENV=production node dist/main&quot;</span>,</span><br></pre></td></tr></table></figure></li><li><p>è¿è¡Œç»“æœï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">âœ npm run start:dev</span><br><span class="line">[Nest] 34580   - 2021/03/14 ä¸Šåˆ12:50:42   [NestFactory] Starting Nest application...</span><br><span class="line">[Nest] 34580   - 2021/03/14 ä¸Šåˆ12:50:42   [InstanceLoader] AppModule dependencies initialized +34ms</span><br><span class="line">[Nest] 34580   - 2021/03/14 ä¸Šåˆ12:50:42   [RoutesResolver] AppController &#123;&#125;: +6ms</span><br><span class="line">[Nest] 34580   - 2021/03/14 ä¸Šåˆ12:50:42   [RouterExplorer] Mapped &#123;, GET&#125; route +3ms</span><br><span class="line">[Nest] 34580   - 2021/03/14 ä¸Šåˆ12:50:42   [NestApplication] Nest application successfully started +2ms</span><br><span class="line">&#123;</span><br><span class="line">  happy: <span class="string">&#x27;my default value&#x27;</span>,</span><br><span class="line">  port: 3001,</span><br><span class="line">  host: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">  username: <span class="string">&#x27;test&#x27;</span>,</span><br><span class="line">  password: <span class="string">&#x27;test&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">âœ npm run start:prod</span><br><span class="line"></span><br><span class="line">&gt; nestjs-common-template@0.0.1 start:prod /Users/macos/Projects/nestjs/nestjs-common-template</span><br><span class="line">&gt; cross-env NODE_ENV=production node dist/main</span><br><span class="line"></span><br><span class="line">[Nest] 34400   - 2021/03/14 ä¸Šåˆ12:50:03   [NestFactory] Starting Nest application...</span><br><span class="line">[Nest] 34400   - 2021/03/14 ä¸Šåˆ12:50:03   [InstanceLoader] AppModule dependencies initialized +71ms</span><br><span class="line">[Nest] 34400   - 2021/03/14 ä¸Šåˆ12:50:03   [RoutesResolver] AppController &#123;&#125;: +6ms</span><br><span class="line">[Nest] 34400   - 2021/03/14 ä¸Šåˆ12:50:03   [RouterExplorer] Mapped &#123;, GET&#125; route +2ms</span><br><span class="line">[Nest] 34400   - 2021/03/14 ä¸Šåˆ12:50:03   [NestApplication] Nest application successfully started +2ms</span><br><span class="line">&#123;</span><br><span class="line">  happy: <span class="string">&#x27;my default value&#x27;</span>,</span><br><span class="line">  port: 3002,</span><br><span class="line">  host: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">  username: <span class="string">&#x27;prod&#x27;</span>,</span><br><span class="line">  password: <span class="string">&#x27;prod&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é™„ä¸Šï¼š<a href="https://github.com/toimc/nestjs-example-template/tree/50858c28746323ee69a4dc65c6624f7d7c0937be">ä»£ç åœ°å€</a></p></li></ul><h3 id="é…ç½®éªŒè¯"><a href="#é…ç½®éªŒè¯" class="headerlink" title="é…ç½®éªŒè¯"></a>é…ç½®éªŒè¯</h3><p>é…ç½®éªŒè¯ï¼Œä¸»è¦æ˜¯æŒ‡åœ¨åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ï¼Œå¦‚æœæ²¡æœ‰æä¾›æ‰€éœ€çš„ç¯å¢ƒå˜é‡æˆ–ä¸ç¬¦åˆæŸäº›éªŒè¯è§„åˆ™ï¼Œå°±ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚<code>@nestjs/config</code>åŒ…å®ç°äº†ä¸¤ç§ä¸åŒçš„æ–¹å¼æ¥å®ç°è¿™ä¸€ç‚¹ã€‚</p><ul><li><code>Joi</code>å†…ç½®éªŒè¯å™¨ã€‚é€šè¿‡<a href="https://www.npmjs.com/package/joi">Joi</a>ï¼Œä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªå¯¹è±¡æ¨¡å¼ï¼Œå¹¶æ ¹æ®å®ƒéªŒè¯JavaScriptå¯¹è±¡</li><li>ä¸€ä¸ªè‡ªå®šä¹‰çš„<code>validate()</code>å‡½æ•°ï¼Œå®ƒå°†ç¯å¢ƒå˜é‡ä½œä¸ºè¾“å…¥</li></ul><h4 id="Joiç”¨æ³•"><a href="#Joiç”¨æ³•" class="headerlink" title="Joiç”¨æ³•"></a>Joiç”¨æ³•</h4><p>ç‰¹åˆ«è¯´æ˜ï¼š</p><ul><li>æœ€æ–°ç‰ˆæœ¬çš„<code>joi</code>éœ€è¦ä½ è¿è¡ŒNode v12æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚æ—§ç‰ˆæœ¬çš„nodeè¯·å®‰è£…<code>v16.1.8</code>ã€‚è¿™ä¸»è¦æ˜¯å› ä¸ºåœ¨<code>v17.0.2</code>å‘å¸ƒåï¼Œåœ¨æ„å»ºçš„æ—¶å€™ä¼šå‡ºç°é”™è¯¯ã€‚æ›´å¤šä¿¡æ¯è¯·å‚è€ƒå…¶17.0.0å‘å¸ƒè¯´æ˜ï¼Œ<a href="https://joi.dev/resources/changelog/">ç‚¹å‡»è¿™é‡Œ</a>ã€‚</li><li>joiæœ€å¥½é…åˆå®˜æ–¹çš„<code>@nestjs/config</code>è¿›è¡Œä½¿ç”¨</li></ul><p>æ­¥éª¤ï¼š</p><ul><li><p>å®‰è£…ä¾èµ–</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install <span class="comment">--save joi</span></span><br></pre></td></tr></table></figure></li><li><p>å®šä¹‰éªŒè¯Schemaï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Module &#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/common&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; AppController &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.controller&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; AppService &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.service&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> Joi <span class="keyword">from</span> <span class="string">&#x27;joi&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ConfigModule &#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/config&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> envPath = <span class="string">`.env.<span class="subst">$&#123;process.env.NODE_ENV || <span class="string">&#x27;development&#x27;</span>&#125;</span>`</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Module</span>(&#123;</span><br><span class="line">  imports: [</span><br><span class="line">    ConfigModule.forRoot(&#123;</span><br><span class="line">      envFilePath: envPath,</span><br><span class="line">      <span class="comment">// è¿™é‡Œå¤šäº†ä¸€ä¸ªå±æ€§ï¼švalidationSchema</span></span><br><span class="line">      validationSchema: Joi.object(&#123;</span><br><span class="line">        NODE_ENV: Joi.string()</span><br><span class="line">          .valid(<span class="string">&#x27;development&#x27;</span>, <span class="string">&#x27;production&#x27;</span>, <span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;provision&#x27;</span>)</span><br><span class="line">          .default(<span class="string">&#x27;development&#x27;</span>),</span><br><span class="line">        PORT: Joi.number().default(<span class="number">3000</span>),</span><br><span class="line">        DATABASE_USER: Joi.string().required()</span><br><span class="line">      &#125;),</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  controllers: [AppController],</span><br><span class="line">  providers: [AppService],</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppModule</span> </span>&#123;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>éªŒè¯æµ‹è¯•</p><p>é…ç½®<code>é”™è¯¯</code>è„šæœ¬ï¼š</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;start:dev&quot;</span>: <span class="string">&quot;cross-env NODE_ENV=development PORT=toimc nest start --watch&quot;</span>,</span><br></pre></td></tr></table></figure><p>é…ç½®æ­£ç¡®çš„è„šæœ¬ï¼š</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;start:dev&quot;</span>: <span class="string">&quot;cross-env NODE_ENV=development PORT=3000 nest start --watch&quot;</span>,</span><br></pre></td></tr></table></figure><p>æµ‹è¯•å‘½ä»¤</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="builtin-name">run</span> start:dev</span><br></pre></td></tr></table></figure><p>é”™è¯¯çš„æç¤ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[ä¸‹åˆ7:33:38] Found 0 errors. Watching <span class="keyword">for</span> file changes.</span><br><span class="line"></span><br><span class="line">/Users/macos/Projects/nestjs/nestjs-common-template/node_modules/_@nestjs_config@0.6.3@@nestjs/config/dist/config.module.js:61</span><br><span class="line">                throw new Error(`Config validation error: <span class="variable">$&#123;error.message&#125;</span>`);</span><br><span class="line">                ^</span><br><span class="line"></span><br><span class="line">Error: Config validation error: <span class="string">&quot;PORT&quot;</span> must be a number</span><br><span class="line">    at Function.forRoot (/Users/macos/Projects/nestjs/nestjs-common-template/node_modules/_@nestjs_config@0.6.3@@nestjs/config/dist/config.module.js:61:23)</span><br><span class="line">    at Object.&lt;anonymous&gt; (/Users/macos/Projects/nestjs/nestjs-common-template/dist/app.module.js:21:35)</span><br><span class="line">    at Module._compile (internal/modules/cjs/loader.js:1063:30)</span><br><span class="line">    at Object.Module._extensions..js (internal/modules/cjs/loader.js:1092:10)</span><br><span class="line">    at Module.load (internal/modules/cjs/loader.js:928:32)</span><br><span class="line">    at Function.Module._load (internal/modules/cjs/loader.js:769:14)</span><br><span class="line">    at Module.require (internal/modules/cjs/loader.js:952:19)</span><br><span class="line">    at require (internal/modules/cjs/helpers.js:88:18)</span><br><span class="line">    at Object.&lt;anonymous&gt; (/Users/macos/Projects/nestjs/nestjs-common-template/dist/main.js:4:22)</span><br><span class="line">    at Module._compile (internal/modules/cjs/loader.js:1063:30)</span><br></pre></td></tr></table></figure><p>æˆ–è€…ä¿®æ”¹<code>.env.development</code>ä¸­çš„é…ç½®ä¿¡æ¯ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DATABASE_USER=</span><br><span class="line"><span class="attr">DATABASE_PASSWORD</span>=test123</span><br></pre></td></tr></table></figure><p>é”™è¯¯æç¤ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">/Users/macos/Projects/nestjs/nestjs-common-template/node_modules/_@nestjs_config@0.6.3@@nestjs/config/dist/config.module.js:61</span><br><span class="line">                throw new Error(`Config validation error: <span class="variable">$&#123;error.message&#125;</span>`);</span><br><span class="line">                ^</span><br><span class="line"></span><br><span class="line">Error: Config validation error: <span class="string">&quot;DATABASE_USER&quot;</span> is not allowed to be empty</span><br><span class="line">    at Function.forRoot (/Users/macos/Projects/nestjs/nestjs-common-template/node_modules/_@nestjs_config@0.6.3@@nestjs/config/dist/config.module.js:61:23)</span><br><span class="line">    at Object.&lt;anonymous&gt; (/Users/macos/Projects/nestjs/nestjs-common-template/dist/app.module.js:21:35)</span><br><span class="line">    at Module._compile (internal/modules/cjs/loader.js:1063:30)</span><br><span class="line">    at Object.Module._extensions..js (internal/modules/cjs/loader.js:1092:10)</span><br><span class="line">    at Module.load (internal/modules/cjs/loader.js:928:32)</span><br><span class="line">    at Function.Module._load (internal/modules/cjs/loader.js:769:14)</span><br><span class="line">    at Module.require (internal/modules/cjs/loader.js:952:19)</span><br><span class="line">    at require (internal/modules/cjs/helpers.js:88:18)</span><br><span class="line">    at Object.&lt;anonymous&gt; (/Users/macos/Projects/nestjs/nestjs-common-template/dist/main.js:4:22)</span><br><span class="line">    at Module._compile (internal/modules/cjs/loader.js:1063:30)</span><br></pre></td></tr></table></figure></li></ul><p>ç»“è®ºï¼šä½¿ç”¨<code>Joi</code>å¯ä»¥å¾ˆæ–¹ä¾¿å¯¹ä¼ å…¥åº”ç”¨ç¨‹åºçš„å‚æ•°è¿›è¡ŒéªŒè¯ï¼Œå¯ä»¥é™åˆ¶ä¼ å…¥çš„æ•°æ®ç±»å‹ã€‚</p><p>é™¤äº†ä¸Šé¢å†™çš„éªŒè¯ä»¥å¤–ï¼Œè¿˜å¯ä»¥åŠ å…¥ä»¥ä¸‹å±æ€§æ¥éªŒè¯è¾“å…¥çš„<strong>å‘½ä»¤å‚æ•°</strong>ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Module</span>(&#123;</span><br><span class="line">  imports: [</span><br><span class="line">    ConfigModule.forRoot(&#123;</span><br><span class="line">      envFilePath: envPath,</span><br><span class="line">      validationSchema: Joi.object(&#123;</span><br><span class="line">        NODE_ENV: Joi.string()</span><br><span class="line">          .valid(<span class="string">&#x27;development&#x27;</span>, <span class="string">&#x27;production&#x27;</span>, <span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;provision&#x27;</span>)</span><br><span class="line">          .default(<span class="string">&#x27;development&#x27;</span>),</span><br><span class="line">        PORT: Joi.number().default(<span class="number">3000</span>),</span><br><span class="line">        DATABASE_USER: Joi.string().required()</span><br><span class="line">      &#125;),</span><br><span class="line">      validationOptions: &#123; <span class="comment">// è¿™é‡ŒåŠ </span></span><br><span class="line">        allowUnknown: <span class="literal">false</span>,</span><br><span class="line">        abortEarly: <span class="literal">true</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  controllers: [AppController],</span><br><span class="line">  providers: [AppService],</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppModule</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure><p><code>@nestjs/config</code>åŒ…ä½¿ç”¨çš„é»˜è®¤è®¾ç½®æ˜¯ï¼š</p><ul><li><code>allowUnknown</code>ï¼šæ§åˆ¶æ˜¯å¦å…è®¸åœ¨ç¯å¢ƒå˜é‡ä¸­ä½¿ç”¨æœªçŸ¥é”®ã€‚é»˜è®¤ä¸ºtrue</li><li><code>abortEarly</code>ï¼šå¦‚æœä¸ºtrueï¼Œåˆ™åœ¨ç¬¬ä¸€ä¸ªé”™è¯¯æ—¶åœæ­¢éªŒè¯ï¼›å¦‚æœä¸ºfalseï¼Œåˆ™è¿”å›æ‰€æœ‰é”™è¯¯ã€‚é»˜è®¤å€¼ä¸ºfalseã€‚</li></ul><p>æ³¨æ„ä¸Šé¢çš„Joiçš„ç”¨æ³•ï¼š</p><ul><li>ä¸»è¦æ˜¯æ ¡éªŒ<code>process.env</code>ä¼ å…¥çš„å‚æ•°</li><li>ä¸»è¦æ˜¯æ ¡éªŒ<code>envFilePath</code>åˆæ¬¡åŠ è½½çš„æ—¶å€™çš„å‚æ•°</li></ul><h4 id="ä½¿ç”¨class-validator"><a href="#ä½¿ç”¨class-validator" class="headerlink" title="ä½¿ç”¨class-validator"></a>ä½¿ç”¨<code>class-validator</code></h4><p>æ­¥éª¤ï¼š</p><ul><li><p>å®‰è£…ä¾èµ–<code>class-validator</code>ä¸<code>class-transformer</code></p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i <span class="keyword">class</span>-<span class="keyword">validator</span> <span class="keyword">class</span>-transformer</span><br></pre></td></tr></table></figure></li><li><p>é…ç½®æ•ˆéªŒæ–‡ä»¶<code>src/env.validation.ts</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; plainToClass &#125; <span class="keyword">from</span> <span class="string">&#x27;class-transformer&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; IsEnum, IsNumber, validateSync &#125; <span class="keyword">from</span> <span class="string">&#x27;class-validator&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">enum</span> Environment &#123;</span><br><span class="line">  Development = <span class="string">&quot;development&quot;</span>,</span><br><span class="line">  Production = <span class="string">&quot;production&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EnvironmentVariables</span> </span>&#123;</span><br><span class="line">  <span class="meta">@IsEnum</span>(Environment)</span><br><span class="line">  NODE_ENV: Environment;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@IsNumber</span>()</span><br><span class="line">  PORT: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">validate</span>(<span class="params">config: Record&lt;<span class="built_in">string</span>, unknown&gt;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> validatedConfig = plainToClass(</span><br><span class="line">    EnvironmentVariables,</span><br><span class="line">    config,</span><br><span class="line">    &#123; <span class="attr">enableImplicitConversion</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">const</span> errors = validateSync(validatedConfig, &#123; <span class="attr">skipMissingProperties</span>: <span class="literal">false</span> &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (errors.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(errors.toString());</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> validatedConfig;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è°ƒæ•´<code>app.module.ts</code>æ–‡ä»¶</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Module &#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/common&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; AppController &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.controller&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; AppService &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.service&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ConfigModule &#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/config&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; validate &#125; <span class="keyword">from</span> <span class="string">&#x27;./env.validation&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> envPath = <span class="string">`.env.<span class="subst">$&#123;process.env.NODE_ENV || <span class="string">&#x27;development&#x27;</span>&#125;</span>`</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Module</span>(&#123;</span><br><span class="line">  imports: [</span><br><span class="line">    ConfigModule.forRoot(&#123;</span><br><span class="line">      envFilePath: envPath,</span><br><span class="line">      validate,</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  controllers: [AppController],</span><br><span class="line">  providers: [AppService],</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppModule</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure></li></ul><p>ä¸ä½¿ç”¨<code>Joi</code>éªŒè¯ç»“æœä¸€è‡´ã€‚</p><h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><ul><li><p>ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„åŒ…<code>config</code>ï¼Œå¯ä»¥æ–¹ä¾¿çš„è¯»å–é…ç½®ä¿¡æ¯ï¼Œä½†æ˜¯æ ¡éªŒå´éœ€è¦åœ¨è¯»å–çš„ä½ç½®æ¥åŠ ï¼Œå¯¹äºä¸éœ€è¦éªŒè¯ï¼Œè€Œéœ€è¦å…¨å±€ä½¿ç”¨çš„é…ç½®é¡¹å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼ï¼›</p></li><li><p>å®˜æ–¹çš„<code>@nestjs/config</code>å¯ä»¥æ–¹ä¾¿çš„å¯¼å…¥<code>.env</code>çš„æ–‡ä»¶ï¼ŒåŒæ—¶ç»“åˆ<code>js-yaml</code>ä¹Ÿå¯ä»¥å¯¼å…¥<code>yaml</code>æ ¼å¼çš„é…ç½®ã€‚</p><p>é…ç½®çµæ´»ï¼Œè€Œä¸”å¯ä»¥é…åˆéªŒè¯å·¥å…·<code>Joi</code>è¿›è¡Œå‚æ•°çš„éªŒè¯ï¼ˆæ¨èï¼‰</p><p>è‡ªå®šä¹‰çš„æ ¡éªŒç¬¬ä¸‰æ–¹åŒ…<code>class-validator</code>è¿™é‡Œåªæ˜¯å†°å±±ä¸€è§’ï¼Œåé¢åœ¨å­¦ä¹ æ•°æ®éªŒè¯çš„æ—¶å€™è¿˜ä¼šä½¿ç”¨åˆ°å®ƒï¼›</p></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;è¿™æ˜¯ã€Šnestjsæ­å»ºé€šç”¨ä¸šåŠ¡æ¡†æ¶ã€‹ç³»åˆ—çš„ç¬¬5ç¯‡ï¼Œè¿›å…¥å¼€å‘å…·ä½“çš„åŠŸèƒ½ä¹‹å‰ï¼Œå­¦ä¹ nestæ¡†æ¶æœ¬èº«æä¾›çš„CLIå·¥å…·ä¸è§„åˆ’åˆç†çš„å·¥ç¨‹ç›®å½•ï¼Œå¯¹äºè¦å®ç°çš„å†…å®¹è¿›è¡Œæ¶æ„ä¸è®¡åˆ’ï¼Œè¿™æ˜¯å®ç°å¥å£®é«˜å¯ç”¨çš„æ¡†æ¶çš„å‰æã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="nestjsæ­å»ºé€šç”¨ä¸šåŠ¡æ¡†æ¶" scheme="https://www.toimc.com/categories/nestjs%E6%90%AD%E5%BB%BA%E9%80%9A%E7%94%A8%E4%B8%9A%E5%8A%A1%E6%A1%86%E6%9E%B6/"/>
    
    
    <category term="node.js" scheme="https://www.toimc.com/tags/node-js/"/>
    
    <category term="nestjs" scheme="https://www.toimc.com/tags/nestjs/"/>
    
    <category term="webæ¡†æ¶" scheme="https://www.toimc.com/tags/web%E6%A1%86%E6%9E%B6/"/>
    
  </entry>
  
  <entry>
    <title>nestjsæ­å»ºé€šç”¨ä¸šåŠ¡æ¡†æ¶ï¼ˆ4ï¼‰ï¼šå·¥ç¨‹ç›®å½•ä¸ä»£ç è§„èŒƒ</title>
    <link href="https://www.toimc.com/nestjs-example-project-4/"/>
    <id>https://www.toimc.com/nestjs-example-project-4/</id>
    <published>2021-03-13T03:02:33.000Z</published>
    <updated>2021-03-17T00:11:06.048Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™æ˜¯ã€Šnestjsæ­å»ºé€šç”¨ä¸šåŠ¡æ¡†æ¶ã€‹ç³»åˆ—çš„ç¬¬4ç¯‡ï¼Œè¿›å…¥å¼€å‘å…·ä½“çš„åŠŸèƒ½ä¹‹å‰ï¼Œå…»æˆè‰¯å¥½çš„å·¥ç¨‹ç›®å½•ä¸ä»£ç é£æ ¼çš„ä¹ æƒ¯ï¼Œç›®çš„æ„å»ºå¤§å‹å¤æ‚é¡¹ç›®ï¼Œæé«˜ä»£ç æ˜“ç»´æŠ¤æ€§ã€‚</p><span id="more"></span><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¤§å¤šæ•°å‰ç«¯åŒå­¦æ‹¿åˆ°ä¸€ä¸ªæ–°çš„ä»»åŠ¡çš„æ—¶å€™ï¼Œæˆ–è€…è¦åšä¸€ä¸ªæ–°çš„æŠ€æœ¯è®¾è®¡çš„æ—¶å€™ï¼Œå¾€å¾€æ— ä»ä¸‹æ‰‹ã€‚çŸ¥ä¹ã€æ˜é‡‘ä¸Šé—®äººå¯èƒ½æ˜¯ä¸€ç§æ–¹æ¡ˆï¼Œè¿˜å¯ä»¥æ‰¾ä¸€ä¸ªç¤¾äº¤æ¸ é“(æ¨ç‰¹ã€ç”µæŠ¥ã€å¾®åšã€æœ‹å‹åœˆã€å­¦æ ¡è®ºå›)ï¼Œé€šè¿‡åˆ«äººçš„ç°å®ä¾‹å­æ¥è¿›è¡Œæ¶æ„çš„è®¾è®¡æ˜¯ä¸€ä¸ªå¾ˆå¥½åˆ‡å…¥ç‚¹ã€‚å…¶å®ï¼Œå¤§å®¶å¯èƒ½å¿½è§†äº†ä»¥ä¸‹çš„æ¸ é“ï¼šæŠ€æœ¯æ¡†æ¶çš„å®˜æ–¹+ç¤ºä¾‹ã€å…¬å¸&amp;å›¢é˜Ÿçš„å†å²é¡¹ç›®åº“ã€æ‰¾æ¯”è¾ƒå‰å®³çš„åŒäº‹å–ç»å’Œå‘æœ‰å¿æŠ€æœ¯å’¨è¯¢çš„å•ï¼ˆç¨‹åºå‘˜å„ç§æ¥å•å¹³å°ï¼‰ç­‰ã€‚</p><p>é‚£ä¹ˆï¼Œå¯¹äºnestjsï¼Œå®ƒçš„å®˜æ–¹æä¾›äº†å¾ˆå¤šç°æˆçš„æŠ€æœ¯è§£å†³æ–¹æ¡ˆï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å€Ÿé‰´(æ‹¿æ¥å³ç”¨)ã€‚</p><h2 id="è®¤è¯†CLI"><a href="#è®¤è¯†CLI" class="headerlink" title="è®¤è¯†CLI"></a>è®¤è¯†CLI</h2><p>å…ˆä»å®˜æ–¹çš„CLIå¼€å§‹ï¼š</p><blockquote><p><a href="https://github.com/nestjs/nest-cli">Nest CLI</a>æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œç•Œé¢å·¥å…·ï¼Œä»¥å¸®åŠ©æ‚¨åˆå§‹åŒ–ã€å¼€å‘å’Œç»´æŠ¤ <code>Nest</code> åº”ç”¨ç¨‹åºã€‚å®ƒä»¥å¤šç§æ–¹å¼æä¾›å¸®åŠ©ï¼ŒåŒ…æ‹¬æ­å»ºé¡¹ç›®ã€ä»¥å¼€å‘æ¨¡å¼ä¸ºå…¶æä¾›æœåŠ¡ï¼Œä»¥åŠä¸ºç”Ÿäº§åˆ†å‘æ„å»ºå’Œæ‰“åŒ…åº”ç”¨ç¨‹åºã€‚å®ƒä½“ç°äº†æœ€ä½³å®è·µçš„æ¶æ„æ¨¡å¼ï¼Œä»¥æ„å»ºè‰¯å¥½çš„åº”ç”¨ç¨‹åºã€‚</p></blockquote><p>å¤§å¤šå‘½ä»¤è¡Œå·¥å…·å¯ä»¥ä½¿ç”¨<code>--help</code>æ¥æŸ¥çœ‹å¸®åŠ©ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">âœ nest --<span class="built_in">help</span></span><br><span class="line">Usage: nest &lt;<span class="built_in">command</span>&gt; [options]</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  -v, --version                                   Output the current version.</span><br><span class="line">  -h, --<span class="built_in">help</span>                                      Output usage information.</span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line">  new|n [options] [name]                          Generate Nest application.</span><br><span class="line">  build [options] [app]                           Build Nest application.</span><br><span class="line">  start [options] [app]                           Run Nest application.</span><br><span class="line">  info|i                                          Display Nest project details.</span><br><span class="line">  update|u [options]                              Update Nest dependencies.</span><br><span class="line">  add [options] &lt;library&gt;                         Adds support <span class="keyword">for</span> an external library to your project.</span><br><span class="line">  generate|g [options] &lt;schematic&gt; [name] [path]  Generate a Nest element.</span><br><span class="line">    Available schematics:</span><br><span class="line">      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">      â”‚ name          â”‚ <span class="built_in">alias</span>       â”‚ description                                  â”‚</span><br><span class="line">      â”‚ application   â”‚ application â”‚ Generate a new application workspace         â”‚</span><br><span class="line">      â”‚ class         â”‚ cl          â”‚ Generate a new class                         â”‚</span><br><span class="line">      â”‚ configuration â”‚ config      â”‚ Generate a CLI configuration file            â”‚</span><br><span class="line">      â”‚ controller    â”‚ co          â”‚ Generate a controller declaration            â”‚</span><br><span class="line">      â”‚ decorator     â”‚ d           â”‚ Generate a custom decorator                  â”‚</span><br><span class="line">      â”‚ filter        â”‚ f           â”‚ Generate a filter declaration                â”‚</span><br><span class="line">      â”‚ gateway       â”‚ ga          â”‚ Generate a gateway declaration               â”‚</span><br><span class="line">      â”‚ guard         â”‚ gu          â”‚ Generate a guard declaration                 â”‚</span><br><span class="line">      â”‚ interceptor   â”‚ <span class="keyword">in</span>          â”‚ Generate an interceptor declaration          â”‚</span><br><span class="line">      â”‚ interface     â”‚ interface   â”‚ Generate an interface                        â”‚</span><br><span class="line">      â”‚ middleware    â”‚ mi          â”‚ Generate a middleware declaration            â”‚</span><br><span class="line">      â”‚ module        â”‚ mo          â”‚ Generate a module declaration                â”‚</span><br><span class="line">      â”‚ pipe          â”‚ pi          â”‚ Generate a pipe declaration                  â”‚</span><br><span class="line">      â”‚ provider      â”‚ pr          â”‚ Generate a provider declaration              â”‚</span><br><span class="line">      â”‚ resolver      â”‚ r           â”‚ Generate a GraphQL resolver declaration      â”‚</span><br><span class="line">      â”‚ service       â”‚ s           â”‚ Generate a service declaration               â”‚</span><br><span class="line">      â”‚ library       â”‚ lib         â”‚ Generate a new library within a monorepo     â”‚</span><br><span class="line">      â”‚ sub-app       â”‚ app         â”‚ Generate a new application within a monorepo â”‚</span><br><span class="line">      â”‚ resource      â”‚ res         â”‚ Generate a new CRUD resource                 â”‚</span><br><span class="line">      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œå¦‚æœæƒ³çŸ¥é“å…¶ä¸­æŸä¸€ä¸ªå­å‘½ä»¤çš„ç”¨æ³•ï¼Œå¯ä»¥ä½¿ç”¨<code>nest &lt;command&gt; --help</code>çš„å½¢å¼æ¥è¿›è¡ŒæŸ¥çœ‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚ï¼š</span></span><br><span class="line">âœ nest generate --<span class="built_in">help</span></span><br></pre></td></tr></table></figure><p>ç‰¹åˆ«è¯´æ˜ï¼š</p><table><thead><tr><th>åç§°</th><th>ç¼©å†™</th><th>æè¿°</th></tr></thead><tbody><tr><td>application</td><td>application</td><td>ç”Ÿæˆä¸€ä¸ªæ–°çš„åº”ç”¨å·¥ä½œåŒº</td></tr><tr><td>class</td><td>cl</td><td>ç”Ÿæˆä¸€ä¸ªæ–°çš„class</td></tr><tr><td>configuration</td><td>config</td><td>ç”Ÿæˆ CLI é…ç½®æ–‡ä»¶</td></tr><tr><td>controller</td><td>co</td><td>ç”Ÿæˆä¸€ä¸ªæ§åˆ¶å™¨å£°æ˜</td></tr><tr><td>decorator</td><td>d</td><td>ç”Ÿæˆä¸€ä¸ªè‡ªå®šä¹‰çš„è£…é¥°è€…</td></tr><tr><td>filter</td><td>f</td><td>ç”Ÿæˆä¸€ä¸ªè¿‡æ»¤å™¨å£°æ˜</td></tr><tr><td>gateway</td><td>ga</td><td>ç”Ÿæˆç½‘å…³</td></tr><tr><td>guard</td><td>gu</td><td>ç”Ÿæˆå®ˆå«</td></tr><tr><td>interceptor</td><td>in</td><td>ç”Ÿæˆæ‹¦æˆªå™¨</td></tr><tr><td>interface</td><td>interface</td><td>ç”Ÿæˆæ¥å£å£°æ˜</td></tr><tr><td>middleware</td><td>mi</td><td>ç”Ÿæˆä¸­é—´ä»¶å£°æ˜</td></tr><tr><td>module</td><td>mo</td><td>ç”Ÿæˆä¸€ä¸ªæ¨¡å—å£°æ˜</td></tr><tr><td>pipe</td><td>pi</td><td>ç”Ÿæˆç®¡é“å£°æ˜</td></tr><tr><td>provider</td><td>pr</td><td>ç”Ÿæˆæä¾›è€…å£°æ˜</td></tr><tr><td>resolver</td><td>r</td><td>ç”ŸæˆGraphQL resolverå£°æ˜</td></tr><tr><td>service</td><td>s</td><td>ç”ŸæˆæœåŠ¡</td></tr><tr><td>library</td><td>lib</td><td>ç”Ÿæˆä¸€ä¸ªmonorepoåº“</td></tr><tr><td>sub-app</td><td>App</td><td>ç”Ÿæˆä¸€ä¸ªmonorepoçš„åº”ç”¨</td></tr><tr><td>resource</td><td>Res</td><td>ç”Ÿæˆä¸€ä¸ªæ–°çš„CURDèµ„æº</td></tr></tbody></table><p>æˆ‘ä»¬æœ€å¼€å§‹ä½¿ç”¨äº†ä¸€ä¸ª<code>new</code>å‘½ä»¤ï¼Œåé¢æœ€å¸¸ç”¨çš„å³æ˜¯<code>generator</code>æˆ–<code>g</code>ï¼ˆç®€å†™ï¼‰å‘½ä»¤ï¼Œå¯ä»¥å¯¹ç…§ç€ä¸Šè¡¨è¿›è¡Œç†Ÿæ‚‰ã€‚</p><h2 id="åˆç†çš„å·¥ç¨‹ç›®å½•"><a href="#åˆç†çš„å·¥ç¨‹ç›®å½•" class="headerlink" title="åˆç†çš„å·¥ç¨‹ç›®å½•"></a>åˆç†çš„å·¥ç¨‹ç›®å½•</h2><p>ä¸ºäº†å»ç†è§£Pythonçš„è¯­è¨€è®¾è®¡ä¹‹ç¾ï¼Œå…¶å®æ›´è¦ç†è§£è¿™æ ·çš„ä¸€å¥è¯â€œçº¦å®šå¤§äºé…ç½®â€ï¼Œå¥½çš„å·¥ç¨‹åŒ–ç›®å½•ï¼ˆçº¦å®šï¼‰èƒ½å¤Ÿå¾ˆå¥½çš„æå‡é¡¹ç›®çš„å¯ç»´æŠ¤æ€§ã€‚</p><h3 id="ä½œè€…æ¨è"><a href="#ä½œè€…æ¨è" class="headerlink" title="ä½œè€…æ¨è"></a>ä½œè€…æ¨è</h3><p>åœ¨å®˜æ–¹çš„issuesä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°ä¸€äº›æç¤ºï¼š<a href="https://github.com/nestjs/nest/issues/2249#issuecomment-494734673">Best scalable project structure #2249</a> è¿™é‡Œæœ‰ä½œè€…çš„å›å¤ã€‚</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> src</span><br><span class="line"><span class="bullet">  -</span> core</span><br><span class="line"><span class="bullet">  -</span> common</span><br><span class="line"><span class="bullet">    -</span> middleware</span><br><span class="line"><span class="bullet">    -</span> interceptors</span><br><span class="line"><span class="bullet">    -</span> guards</span><br><span class="line"><span class="bullet">  -</span> user</span><br><span class="line"><span class="bullet">      -</span> interceptors (scoped interceptors)</span><br><span class="line"><span class="bullet">    -</span> user.controller.ts</span><br><span class="line"><span class="bullet">    -</span> user.model.ts</span><br><span class="line"><span class="bullet">  -</span> store</span><br><span class="line"><span class="bullet">    -</span> store.controller.ts</span><br><span class="line"><span class="bullet">    -</span> store.model.ts</span><br></pre></td></tr></table></figure><ul><li><p>å¯ä»¥ä½¿ç”¨monorepoçš„æ–¹æ³•â€”â€”åœ¨ä¸€ä¸ªrepoä¸­åˆ›å»ºä¸¤ä¸ªé¡¹ç›®ï¼Œå¹¶åœ¨å®ƒä»¬ä¹‹é—´å…±äº«å…±åŒçš„ä¸œè¥¿ï¼Œå¦‚åº“/åŒ…ã€‚</p></li><li><p>æ²¡æœ‰æ¨¡å—ç›®å½•ï¼ŒæŒ‰ç…§åŠŸèƒ½è¿›è¡Œåˆ’åˆ†ã€‚</p></li><li><p>æŠŠé€šç”¨/æ ¸å¿ƒçš„ä¸œè¥¿å½’ä¸ºå•ç‹¬çš„ç›®å½•ï¼šcommonï¼Œæ¯”å¦‚ï¼šæ‹¦æˆªå™¨/å®ˆå«/ç®¡é“</p></li></ul><h3 id="å‚è€ƒé¡¹ç›®"><a href="#å‚è€ƒé¡¹ç›®" class="headerlink" title="å‚è€ƒé¡¹ç›®"></a>å‚è€ƒé¡¹ç›®</h3><p><strong>ç¬¬ä¸€ä¸ªå‚è€ƒé¡¹ç›®</strong></p><p>æŠ€æœ¯æ ˆï¼šNest + sequelize-typescript + JWT + Jest + Swagger</p><p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/kentloog/nestjs-sequelize-typescript">kentloog/nestjs-sequelize-typescript</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ assets</span><br><span class="line">â”‚Â Â  â””â”€â”€ logo.png</span><br><span class="line">â”œâ”€â”€ config</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ config.development.ts</span><br><span class="line">â”‚Â Â  â””â”€â”€ config.production.ts</span><br><span class="line">â”œâ”€â”€ config.ts</span><br><span class="line">â”œâ”€â”€ db</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ config.ts</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ migrations</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ 20190128160000-create-table-user.js</span><br><span class="line">â”‚Â Â  â””â”€â”€ seeders-dev</span><br><span class="line">â”‚Â Â      â””â”€â”€ 20190129093300-test-data-users.js</span><br><span class="line">â”œâ”€â”€ nest-cli.json</span><br><span class="line">â”œâ”€â”€ nodemon-debug.json</span><br><span class="line">â”œâ”€â”€ nodemon.json</span><br><span class="line">â”œâ”€â”€ package-lock.json</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ app.module.ts</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ database</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ database.module.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ database.providers.ts</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ main.ts</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ posts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ dto</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ create-post.dto.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ post.dto.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ update-post.dto.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ post.entity.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ posts.controller.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ posts.module.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ posts.providers.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ posts.service.ts</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ shared</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ config</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ config.service.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ enum</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ gender.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ shared.module.ts</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ swagger.ts</span><br><span class="line">â”‚Â Â  â””â”€â”€ users</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ auth</span><br><span class="line">â”‚Â Â      â”‚Â Â  â”œâ”€â”€ jwt-payload.model.ts</span><br><span class="line">â”‚Â Â      â”‚Â Â  â””â”€â”€ jwt-strategy.ts</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ dto</span><br><span class="line">â”‚Â Â      â”‚Â Â  â”œâ”€â”€ create-user.dto.ts</span><br><span class="line">â”‚Â Â      â”‚Â Â  â”œâ”€â”€ update-user.dto.ts</span><br><span class="line">â”‚Â Â      â”‚Â Â  â”œâ”€â”€ user-login-request.dto.ts</span><br><span class="line">â”‚Â Â      â”‚Â Â  â”œâ”€â”€ user-login-response.dto.ts</span><br><span class="line">â”‚Â Â      â”‚Â Â  â””â”€â”€ user.dto.ts</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ user.entity.ts</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ users.controller.ts</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ users.module.ts</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ users.providers.ts</span><br><span class="line">â”‚Â Â      â””â”€â”€ users.service.ts</span><br><span class="line">â”œâ”€â”€ <span class="built_in">test</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ app.e2e-spec.ts</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ jest-e2e.json</span><br><span class="line">â”‚Â Â  â””â”€â”€ test-data.ts</span><br><span class="line">â”œâ”€â”€ tsconfig.build.json</span><br><span class="line">â”œâ”€â”€ tsconfig.json</span><br><span class="line">â””â”€â”€ tslint.json</span><br></pre></td></tr></table></figure><p>ç‰¹ç‚¹ï¼š</p><ul><li> é¡¹ç›®æ–‡æ¡£åŠç›¸å…³çš„èµ„æºåœ¨æ ¹ç›®å½•</li><li>æ•°æ®åº“åŠé¡¹ç›®é…ç½®ä¼šæ”¾åœ¨æ ¹ç›®å½•ï¼ˆç»†èŠ‚ï¼šæ•°æ®åº“å‡çº§æ–‡ä»¶ï¼‰</li><li><code>src</code>ä¸­ä¼šå¯¹åŠŸèƒ½è¿›è¡Œåˆ’åˆ†å»ºä¸åŒçš„æ–‡ä»¶å¤¹<code>users</code>ã€<code>posts</code></li><li>å•ä¸ªåŠŸèƒ½æ–‡ä»¶å¤¹ä¸­ï¼Œä¼šåŒ…æ‹¬ä¸€ä¸ªå®Œæ•´CURDçš„ç›¸å…³æ–‡ä»¶(dto/controller/module/providers/service)</li><li>æŠ½ç¦»å…¬å…±é…ç½®åˆ°<code>shared</code>æ–‡ä»¶å¤¹</li></ul><p><strong>ç¬¬äºŒä¸ªå‚è€ƒé¡¹ç›®</strong></p><p>æŠ€æœ¯æ ˆï¼šå…·æœ‰AWS Lambdaï¼ŒDynamoDBï¼ŒDynamoDB Streamsçš„å®Œå…¨æ— æœåŠ¡å™¨ç”Ÿäº§åº”ç”¨ç¨‹åº</p><p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/International-Slackline-Association/Rankings-Backend">International-Slackline-Association/Rankings-Backend</a></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ LICENSE</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ docs</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ AWS_Architecture.png</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ Development\ Notes.md</span><br><span class="line">â”‚Â Â  â””â”€â”€ GourceOutput.png</span><br><span class="line">â”œâ”€â”€ jest<span class="selector-class">.config</span>.js</span><br><span class="line">â”œâ”€â”€ package-lock.json</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ serverless</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ environment.yml</span><br><span class="line">â”‚Â Â  â””â”€â”€ secrets<span class="selector-class">.example</span>.yml</span><br><span class="line">â”œâ”€â”€ serverless.yml</span><br><span class="line">â”œâ”€â”€ <span class="attribute">src</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ api</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ admin</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ api<span class="selector-class">.module</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ athlete</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ contest</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ database<span class="selector-class">.module</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ results</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ submit</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ webapp</span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ api<span class="selector-class">.module</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ athlete</span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ contest</span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ country</span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ database<span class="selector-class">.module</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ nestjsTest<span class="selector-class">.controller</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â      â””â”€â”€ rankings</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ core</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ athlete</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ athlete<span class="selector-class">.service</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ entity</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ interfaces</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ rankings<span class="selector-class">.service</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ aws</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ aws<span class="selector-class">.module</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ aws<span class="selector-class">.services</span><span class="selector-class">.interface</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ aws<span class="selector-class">.services</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ category</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ categories<span class="selector-class">.service</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ contest</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ contest<span class="selector-class">.service</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ entity</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ points-calculator<span class="selector-class">.service</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ database</span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ database<span class="selector-class">.module</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ database<span class="selector-class">.service</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ dynamodb</span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ redis</span><br><span class="line">â”‚Â Â  â”‚Â Â      â””â”€â”€ test</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ cron-job</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cron-job<span class="selector-class">.module</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cron-job<span class="selector-class">.service</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cron-job<span class="selector-class">.spec</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ database<span class="selector-class">.module</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ dynamodb-streams</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ athlete</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ athlete-contest-record<span class="selector-class">.service</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ athlete-details-record<span class="selector-class">.service</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ athlete-records<span class="selector-class">.module</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ contest</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ contest-record<span class="selector-class">.service</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ contest-records<span class="selector-class">.module</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ database<span class="selector-class">.module</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ dynamodb-streams<span class="selector-class">.module</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ dynamodb-streams<span class="selector-class">.service</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ test</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ contest-modifications<span class="selector-class">.spec</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ lambda-trigger.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ utils.ts</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ image-resizer</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ S3Events<span class="selector-class">.module</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ S3Events<span class="selector-class">.service</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ database<span class="selector-class">.module</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ index.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ test</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ lambda-trigger.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ s3-image-put<span class="selector-class">.spec</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ thumbnail-creator</span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ imagemagick.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ s3<span class="selector-class">.service</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ thumbnail-creator<span class="selector-class">.module</span>.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â      â””â”€â”€ thumbnail-creator<span class="selector-class">.service</span>.ts</span><br><span class="line">â”‚Â Â  â””â”€â”€ shared</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ constants.ts</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ decorators</span><br><span class="line">â”‚Â Â      â”‚Â Â  â””â”€â”€ roles<span class="selector-class">.decorator</span>.ts</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ enums</span><br><span class="line">â”‚Â Â      â”‚Â Â  â”œâ”€â”€ contestType-utility.ts</span><br><span class="line">â”‚Â Â      â”‚Â Â  â”œâ”€â”€ discipline-utility.ts</span><br><span class="line">â”‚Â Â      â”‚Â Â  â”œâ”€â”€ enums-utility.ts</span><br><span class="line">â”‚Â Â      â”‚Â Â  â””â”€â”€ index.ts</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ env_variables.ts</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ exceptions</span><br><span class="line">â”‚Â Â      â”‚Â Â  â”œâ”€â”€ api<span class="selector-class">.error</span>.ts</span><br><span class="line">â”‚Â Â      â”‚Â Â  â””â”€â”€ api<span class="selector-class">.exceptions</span>.ts</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ extensions.ts</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ filters</span><br><span class="line">â”‚Â Â      â”‚Â Â  â””â”€â”€ exception<span class="selector-class">.filter</span>.ts</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ generators</span><br><span class="line">â”‚Â Â      â”‚Â Â  â””â”€â”€ id<span class="selector-class">.generator</span>.ts</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ guards</span><br><span class="line">â”‚Â Â      â”‚Â Â  â””â”€â”€ roles<span class="selector-class">.guard</span>.ts</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ index.ts</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ logger.ts</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ pipes</span><br><span class="line">â”‚Â Â      â”‚Â Â  â””â”€â”€ JoiValidation<span class="selector-class">.pipe</span>.ts</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ types</span><br><span class="line">â”‚Â Â      â”‚Â Â  â”œâ”€â”€ express<span class="selector-class">.d</span>.ts</span><br><span class="line">â”‚Â Â      â”‚Â Â  â”œâ”€â”€ extensions<span class="selector-class">.d</span>.ts</span><br><span class="line">â”‚Â Â      â”‚Â Â  â””â”€â”€ shared<span class="selector-class">.d</span>.ts</span><br><span class="line">â”‚Â Â      â””â”€â”€ utils.ts</span><br><span class="line">â”œâ”€â”€ test</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ jest-e2e.json</span><br><span class="line">â”‚Â Â  â””â”€â”€ test-setup.ts</span><br><span class="line">â”œâ”€â”€ tsconfig.json</span><br><span class="line">â”œâ”€â”€ tslint.json</span><br><span class="line">â””â”€â”€ webpack</span><br><span class="line">    â”œâ”€â”€ webpack<span class="selector-class">.config</span><span class="selector-class">.Dev</span>.js</span><br><span class="line">    â”œâ”€â”€ webpack<span class="selector-class">.config</span><span class="selector-class">.Prod</span>.js</span><br><span class="line">    â”œâ”€â”€ webpack<span class="selector-class">.config</span><span class="selector-class">.Test</span>.js</span><br><span class="line">    â””â”€â”€ webpack<span class="selector-class">.config</span><span class="selector-class">.base</span>.js</span><br></pre></td></tr></table></figure><p>ç‰¹ç‚¹ï¼š</p><ul><li>æ ¹ç›®å½•ä¸­å­˜æ”¾webpackã€å¾®æœåŠ¡é…ç½® + é¡¹ç›®æ–‡æ¡£</li><li><code>src</code>ä¸­ä¼šå¯¹åŠŸèƒ½è¿›è¡Œåˆ’åˆ†å»ºä¸åŒçš„æ–‡ä»¶å¤¹ï¼š <code>api</code>ã€<code>core</code>ã€<code>dynamodb-stream</code>ã€<code>image-resizer</code></li><li>åœ¨æ ¸å¿ƒæ¨¡å—ä¸­ï¼ŒæŒ‰ç…§åŠŸèƒ½æ¨¡å—è¿›åˆ’åˆ†ï¼Œä¸ä¹‹ç›¸å…³çš„entityã€serviceæ”¾ç½®åœ¨åŒä¸€æ–‡ä»¶å¤¹ä¸­</li><li>æŠ½ç¦»å…¬å…±é…ç½®åˆ°<code>shared</code>æ–‡ä»¶å¤¹ï¼šå¸¸é‡ã€è‡ªå®šä¹‰çš„è£…é¥°å™¨ã€ç»Ÿä¸€é”™è¯¯å¤„ç†ã€è¿‡æ»¤å™¨ã€ç”Ÿæˆå™¨ã€å®ˆå«ã€æ—¥å¿—æœåŠ¡</li></ul><p>ç¬¬ä¸‰ä¸ªå‚è€ƒé¡¹ç›®ï¼š</p><p>æŠ€æœ¯æ ˆï¼šä½¿ç”¨ NestJS çš„ Blog/CMSï¼Œ RESTful API æœåŠ¡ç«¯åº”ç”¨</p><p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/surmon-china/nodepress">surmon-china/nodepressTemplate</a></p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ API_DOC.md</span><br><span class="line">â”œâ”€â”€ CHANGELOG.md</span><br><span class="line">â”œâ”€â”€ LICENSE</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ classified</span><br><span class="line">â”œâ”€â”€ cspell.json</span><br><span class="line">â”œâ”€â”€ dbbackup</span><br><span class="line">â”œâ”€â”€ logo.png</span><br><span class="line">â”œâ”€â”€ logo.psd</span><br><span class="line">â”œâ”€â”€ nest-cli.json</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ scripts</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ README.md</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ dbbackup.<span class="keyword">sh</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ dbrecover.<span class="keyword">sh</span></span><br><span class="line">â”‚Â Â  â””â”€â”€ deploy.<span class="keyword">sh</span></span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ app.config.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ app.controller.spec.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ app.controller.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ app.environment.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ app.module.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ constants</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cache.constant.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ meta.constant.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ <span class="built_in">system</span>.constant.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ text.constant.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ decorators</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cache.decorator.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ http.decorator.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ query-params.decorator.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ errors</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ <span class="keyword">bad</span>-request.error.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ custom.error.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ forbidden.error.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ unauthorized.error.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ validation.error.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ filters</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ error.<span class="built_in">filter</span>.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ guards</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ auth.guard.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ humanized-auth.guard.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ interceptors</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cache.interceptor.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ error.interceptor.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ logging.interceptor.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ transform.interceptor.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ interfaces</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ http.interface.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ mongoose.interface.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ state.interface.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ main.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ middlewares</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cors.middleware.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ origin.middleware.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ models</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ <span class="built_in">extend</span>.model.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ modules</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ announcement</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ announcement.controller.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ announcement.model.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ announcement.module.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ announcement.service.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ article</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ article.controller.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ article.model.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ article.module.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ article.service.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ auth</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ auth.controller.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ auth.interface.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ auth.model.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ auth.module.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ auth.service.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ jwt.strategy.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ category</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ category.controller.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ category.model.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ category.module.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ category.service.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ comment</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ comment.controller.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ comment.model.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ comment.module.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ comment.service.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ expansion</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ expansion.controller.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ expansion.module.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ expansion.service.dbbackup.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ expansion.service.statistic.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ like</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ like.controller.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ like.module.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ like.service.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ option</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ option.controller.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ option.model.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ option.module.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ option.service.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ syndication</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ syndication.controller.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ syndication.module.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ syndication.service.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ <span class="keyword">tag</span></span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ <span class="keyword">tag</span>.controller.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ <span class="keyword">tag</span>.model.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ <span class="keyword">tag</span>.module.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â      â””â”€â”€ <span class="keyword">tag</span>.service.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ pipes</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ validation.pipe.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ processors</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cache</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cache.config.service.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cache.module.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ cache.service.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ database</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ database.module.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ database.provider.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ helper</span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ helper.module.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ helper.service.akismet.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ helper.service.<span class="keyword">cs</span>.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ helper.service.email.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ helper.service.google.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â      â”œâ”€â”€ helper.service.ip.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â”‚Â Â      â””â”€â”€ helper.service.seo.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â””â”€â”€ transformers</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ codec.transformer.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â      â”œâ”€â”€ error.transformer.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â      â”œâ”€â”€ model.transformer.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â      â”œâ”€â”€ mongoose.transformer.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â      â””â”€â”€ urlmap.transformer.<span class="keyword">ts</span></span><br><span class="line">â”œâ”€â”€ test</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ app.e2e-spec.<span class="keyword">ts</span></span><br><span class="line">â”‚Â Â  â””â”€â”€ jest-e2e.json</span><br><span class="line">â”œâ”€â”€ tsconfig.build.json</span><br><span class="line">â”œâ”€â”€ tsconfig.json</span><br><span class="line">â”œâ”€â”€ tsconfig.spec.json</span><br><span class="line">â””â”€â”€ yarn.lock</span><br></pre></td></tr></table></figure><p>ç‰¹ç‚¹ï¼š</p><ul><li> é¡¹ç›®æ–‡æ¡£åŠç›¸å…³çš„èµ„æºåœ¨æ ¹ç›®å½•</li><li><code>src</code>ä¸­<code>modules</code>ä¼šå¯¹åŠŸèƒ½è¿›è¡Œåˆ’åˆ†å»ºä¸åŒçš„æ–‡ä»¶å¤¹</li><li>å•ä¸ªåŠŸèƒ½æ–‡ä»¶å¤¹ä¸­ï¼Œä¼šåŒ…æ‹¬ä¸€ä¸ªå®Œæ•´CURDçš„ç›¸å…³æ–‡ä»¶(model/controller/module/service)</li><li>æŠŠå…¬å…±çš„ä»£ç ï¼ˆæŒ‰ç…§nestjsé€»è¾‘åˆ†å±‚ï¼‰æ‹†æˆå•ç‹¬çš„æ–‡ä»¶å¤¹<code>guards</code>ã€<code>filters</code>ã€<code>decorators</code>ã€<code>interceptors</code>ã€<code>interfaces</code>ã€<code>errors</code></li></ul><h3 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a>æœ€ä½³å®è·µ</h3><p>é¡¹ç›®ï¼š<a href="https://github.com/CatsMiaow/node-nestjs-structure">CatsMiaow/node-nestjs-structure</a></p><p>ä¸‹é¢çš„é¡¹ç›®ç»“æ„ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">+-- bin                  <span class="regexp">//</span> Custom tasks</span><br><span class="line">+-- dist                 <span class="regexp">//</span> Source build</span><br><span class="line">+-- public               <span class="regexp">//</span> Static Files</span><br><span class="line">+-- src</span><br><span class="line">|   +-- config           <span class="regexp">//</span> Environment Configuration</span><br><span class="line">|   +-- entity           <span class="regexp">//</span> TypeORM Entities generated by `typeorm-model-generator` module</span><br><span class="line">|   +-- auth             <span class="regexp">//</span> Authentication</span><br><span class="line">|   +-- common           <span class="regexp">//</span> Global Nest Module</span><br><span class="line">|   |   +-- constants    <span class="regexp">//</span> Constant value and Enum</span><br><span class="line">|   |   +-- controllers  <span class="regexp">//</span> Nest Controllers</span><br><span class="line">|   |   +-- decorators   <span class="regexp">//</span> Nest Decorators</span><br><span class="line">|   |   +-- dto          <span class="regexp">//</span> DTO (Data Transfer Object) Schema, Validation</span><br><span class="line">|   |   +-- filters      <span class="regexp">//</span> Nest Filters</span><br><span class="line">|   |   +-- guards       <span class="regexp">//</span> Nest Guards</span><br><span class="line">|   |   +-- interceptors <span class="regexp">//</span> Nest Interceptors</span><br><span class="line">|   |   +-- interfaces   <span class="regexp">//</span> TypeScript Interfaces</span><br><span class="line">|   |   +-- middleware   <span class="regexp">//</span> Nest Middleware</span><br><span class="line">|   |   +-- pipes        <span class="regexp">//</span> Nest Pipes</span><br><span class="line">|   |   +-- providers    <span class="regexp">//</span> Nest Providers</span><br><span class="line">|   |   +-- *            <span class="regexp">//</span> models, repositories, services...</span><br><span class="line">|   +-- shared           <span class="regexp">//</span> Shared Nest Modules</span><br><span class="line">|   +-- gql              <span class="regexp">//</span> GraphQL Structure Sample</span><br><span class="line">|   +-- *                <span class="regexp">//</span> Other Nest Modules, non-global, same as common structure above</span><br><span class="line">+-- test                 <span class="regexp">//</span> Jest testing</span><br><span class="line">+-- typings              <span class="regexp">//</span> Modules and global type definitions</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯åŠŸèƒ½æ¨¡å—ï¼š</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// Module structure</span><br><span class="line">// <span class="keyword">Add</span> folders according <span class="keyword">to</span> module scale. <span class="keyword">If</span> it<span class="string">&#x27;s small, you don&#x27;</span>t need <span class="keyword">to</span> <span class="keyword">add</span> folders.</span><br><span class="line">+<span class="comment">-- src/greeter</span></span><br><span class="line">|   +<span class="comment">-- *                // folders</span></span><br><span class="line">|   +<span class="comment">-- greeter.constant.ts</span></span><br><span class="line">|   +<span class="comment">-- greeter.controller.ts</span></span><br><span class="line">|   +<span class="comment">-- greeter.service.ts</span></span><br><span class="line">|   +<span class="comment">-- greeter.module.ts</span></span><br><span class="line">|   +<span class="comment">-- greeter.*.ts</span></span><br><span class="line">|   +<span class="comment">-- index.ts</span></span><br></pre></td></tr></table></figure><p>ç‰¹ç‚¹ï¼š</p><ul><li>é¡¹ç›®æ–‡æ¡£åŠç›¸å…³çš„èµ„æºåœ¨æ ¹ç›®å½•ï¼ŒåŒ…æ‹¬<code>typings</code>ã€<code>test</code>ã€<code>bin</code></li><li><code>src</code>ä¸­ä¼šå¯¹åŠŸèƒ½è¿›è¡Œåˆ’åˆ†å»ºä¸åŒçš„æ–‡ä»¶å¤¹</li><li>æŠ½ç¦»å…¬å…±ä»£ç åˆ°<code>common</code>æ–‡ä»¶å¤¹ï¼Œé…ç½®æ–‡ä»¶æ”¾åœ¨<code>config</code>æ–‡ä»¶å¤¹ï¼Œå®ä½“ç±»æ”¾ç½®åœ¨<code>entity</code>ä¸­</li><li>é‰´æƒç›¸å…³çš„é€»è¾‘æ”¾åœ¨<code>auth</code></li><li>æŠŠåŒç±»çš„<code>guards</code>ã€<code>filters</code>ã€<code>decorators</code>ã€<code>interceptors</code>ã€<code>interfaces</code>ã€<code>errors</code>å­˜æ”¾åœ¨<code>common</code>æ–‡ä»¶å¤¹ä¸­</li></ul><h2 id="ä»£ç è§„èŒƒ-é£æ ¼æŒ‡å—"><a href="#ä»£ç è§„èŒƒ-é£æ ¼æŒ‡å—" class="headerlink" title="ä»£ç è§„èŒƒ(é£æ ¼æŒ‡å—)"></a>ä»£ç è§„èŒƒ(é£æ ¼æŒ‡å—)</h2><p>æˆ‘ä»¬å¯¹Angularé£æ ¼æŒ‡å—è¿›è¡Œäº†æ‘˜æŠ„ï¼Œå¦‚ä¸‹ï¼š</p><blockquote><p>å‚è€ƒï¼š<a href="https://angular.cn/guide/styleguide">Angularé£æ ¼æŒ‡å—</a></p></blockquote><h3 id="æ€»åˆ™"><a href="#æ€»åˆ™" class="headerlink" title="æ€»åˆ™"></a>æ€»åˆ™</h3><p><strong>åšæŒ</strong>æ¯ä¸ªæ–‡ä»¶åªå®šä¹‰ä¸€æ ·ä¸œè¥¿ï¼ˆä¾‹å¦‚æœåŠ¡æˆ–ç»„ä»¶ï¼‰</p><p><strong>è€ƒè™‘</strong>æŠŠæ–‡ä»¶å¤§å°é™åˆ¶åœ¨ 400 è¡Œä»£ç ä»¥å†…</p><p><strong>åšæŒ</strong>å®šä¹‰ç®€å•å‡½æ•°</p><p><strong>è€ƒè™‘</strong>é™åˆ¶åœ¨ 75 è¡Œä¹‹å†…</p><h3 id="å‘½å"><a href="#å‘½å" class="headerlink" title="å‘½å"></a>å‘½å</h3><p><strong>åšæŒ</strong>æ‰€æœ‰ç¬¦å·ä½¿ç”¨ä¸€è‡´çš„å‘½åè§„åˆ™</p><p><strong>åšæŒ</strong>éµå¾ªåŒä¸€ä¸ªæ¨¡å¼æ¥æè¿°ç¬¦å·çš„ç‰¹æ€§å’Œç±»å‹</p><h4 id="ä½¿ç”¨ç‚¹å’Œæ¨ªæ æ¥åˆ†éš”æ–‡ä»¶å"><a href="#ä½¿ç”¨ç‚¹å’Œæ¨ªæ æ¥åˆ†éš”æ–‡ä»¶å" class="headerlink" title="ä½¿ç”¨ç‚¹å’Œæ¨ªæ æ¥åˆ†éš”æ–‡ä»¶å"></a>ä½¿ç”¨ç‚¹å’Œæ¨ªæ æ¥åˆ†éš”æ–‡ä»¶å</h4><p><strong>åšæŒ</strong> åœ¨æè¿°æ€§åå­—ä¸­ï¼Œç”¨æ¨ªæ æ¥åˆ†éš”å•è¯ã€‚</p><p><strong>åšæŒ</strong>ä½¿ç”¨ç‚¹æ¥åˆ†éš”æè¿°æ€§åå­—å’Œç±»å‹ã€‚</p><p><strong>åšæŒ</strong>éµå¾ªå…ˆæè¿°ç»„ä»¶ç‰¹æ€§ï¼Œå†æè¿°å®ƒçš„ç±»å‹çš„æ¨¡å¼ï¼Œå¯¹æ‰€æœ‰ç»„ä»¶ä½¿ç”¨ä¸€è‡´çš„ç±»å‹å‘½åè§„åˆ™ã€‚æ¨èçš„æ¨¡å¼ä¸º <code>feature.type.ts</code>ã€‚</p><p><strong>åšæŒ</strong>ä½¿ç”¨æƒ¯ç”¨çš„åç¼€æ¥æè¿°ç±»å‹ï¼ŒåŒ…æ‹¬ <code>*.service</code>ã€<code>*.component</code>ã€<code>*.pipe</code>ã€<code>.module</code>ã€<code>.directive</code>ã€‚ å¿…è¦æ—¶å¯ä»¥åˆ›å»ºæ›´å¤šç±»å‹åï¼Œä½†å¿…é¡»æ³¨æ„ï¼Œä¸è¦åˆ›å»ºå¤ªå¤šã€‚</p><h4 id="ç¬¦å·åä¸æ–‡ä»¶å"><a href="#ç¬¦å·åä¸æ–‡ä»¶å" class="headerlink" title="ç¬¦å·åä¸æ–‡ä»¶å"></a>ç¬¦å·åä¸æ–‡ä»¶å</h4><p><strong>åšæŒ</strong>ä¸ºæ‰€æœ‰ä¸œè¥¿ä½¿ç”¨ä¸€è‡´çš„å‘½åçº¦å®šï¼Œä»¥å®ƒä»¬æ‰€ä»£è¡¨çš„ä¸œè¥¿å‘½åã€‚</p><p><strong>åšæŒ</strong>ä½¿ç”¨<strong>å¤§å†™é©¼å³°å‘½åæ³•æ¥å‘½åç±»</strong></p><p><strong>åšæŒ</strong>åŒ¹é…ç¬¦å·åä¸å®ƒæ‰€åœ¨çš„æ–‡ä»¶å</p><p><strong>åšæŒ</strong>åœ¨ç¬¦å·ååé¢è¿½åŠ çº¦å®šçš„ç±»å‹åç¼€ï¼ˆä¾‹å¦‚ <code>Component</code>ã€<code>Directive</code>ã€<code>Module</code>ã€<code>Pipe</code>ã€<code>Service</code>ï¼‰ã€‚</p><p><strong>åšæŒ</strong>åœ¨æ–‡ä»¶ååé¢è¿½åŠ çº¦å®šçš„ç±»å‹åç¼€ï¼ˆä¾‹å¦‚ <code>.component.ts</code>ã€<code>.directive.ts</code>ã€<code>.module.ts</code>ã€<code>.pipe.ts</code>ã€<code>.service.ts</code>ï¼‰</p><p><strong>åšæŒ</strong>ä½¿ç”¨<em>ä¸­çº¿å‘½åæ³•ï¼ˆdashed-caseï¼‰</em>æˆ–å«<em>çƒ¤ä¸²å‘½åæ³•ï¼ˆkebab-caseï¼‰</em>æ¥å‘½åç»„ä»¶çš„å…ƒç´ é€‰æ‹©å™¨ã€‚</p><h4 id="æœåŠ¡å-amp-ç®¡é“å"><a href="#æœåŠ¡å-amp-ç®¡é“å" class="headerlink" title="æœåŠ¡å&amp;ç®¡é“å"></a>æœåŠ¡å&amp;ç®¡é“å</h4><p><strong>åšæŒ</strong>ä½¿ç”¨ä¸€è‡´çš„è§„åˆ™å‘½åæœåŠ¡ï¼Œä»¥å®ƒä»¬çš„ç‰¹æ€§æ¥å‘½å</p><p><strong>åšæŒ</strong>ä¸ºæœåŠ¡çš„ç±»ååŠ ä¸Š <code>Service</code> åç¼€ã€‚ ä¾‹å¦‚ï¼Œè·å–æ•°æ®æˆ–è‹±é›„åˆ—è¡¨çš„æœåŠ¡åº”è¯¥å‘½åä¸º <code>DataService</code> æˆ– <code>HeroService</code></p><p><strong>åšæŒ</strong>ä¸ºæ‰€æœ‰ç®¡é“ä½¿ç”¨ä¸€è‡´çš„å‘½åçº¦å®šï¼Œç”¨å®ƒä»¬çš„ç‰¹æ€§æ¥å‘½åã€‚ ç®¡é“ç±»ååº”è¯¥ä½¿ç”¨ <a href="https://angular.cn/guide/glossary#case-types">UpperCamelCase</a>ï¼ˆç±»åçš„é€šç”¨çº¦å®šï¼‰ï¼Œè€Œç›¸åº”çš„ <code>name</code> å­—ç¬¦ä¸²åº”è¯¥ä½¿ç”¨ lowerCamelCaseã€‚ <code>name</code> å­—ç¬¦ä¸²ä¸­ä¸åº”è¯¥ä½¿ç”¨ä¸­çº¿ï¼ˆâ€œä¸­çº¿æ ¼å¼â€æˆ–â€œçƒ¤ä¸²æ ¼å¼â€ï¼‰ã€‚ä¾‹å¦‚ï¼š</p><p><code>ellipsis.pipe.ts</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Pipe</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;ellipsis&#x27;</span> &#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">EllipsisPipe</span> <span class="title">implements</span> <span class="title">PipeTransform</span> </span>&#123; &#125;</span><br></pre></td></tr></table></figure><p>å’Œ</p><p><code>init-caps.pipe.ts</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Pipe</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;initCaps&#x27;</span> &#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">InitCapsPipe</span> <span class="title">implements</span> <span class="title">PipeTransform</span> </span>&#123; &#125;</span><br></pre></td></tr></table></figure><p><strong>åšæŒ</strong>åœ¨æ¨¡å—ä¸­åªåŒ…å«æ¨¡å—é—´çš„ä¾èµ–å…³ç³»ï¼Œæ‰€æœ‰å…¶å®ƒé€»è¾‘éƒ½åº”è¯¥æ”¾åˆ°æœåŠ¡ä¸­</p><p><strong>åšæŒ</strong>æŠŠå¯å¤ç”¨çš„é€»è¾‘æ”¾åˆ°æœåŠ¡ä¸­ï¼Œä¿æŒç»„ä»¶ç®€å•ï¼Œèšç„¦äºå®ƒä»¬é¢„æœŸç›®çš„</p><p><strong>åšæŒ</strong>åœ¨åŒä¸€ä¸ªæ³¨å…¥å™¨å†…ï¼ŒæŠŠæœåŠ¡å½“åšå•ä¾‹ä½¿ç”¨ï¼Œç”¨å®ƒä»¬æ¥å…±äº«æ•°æ®å’ŒåŠŸèƒ½</p><p><strong>åšæŒ</strong>åˆ›å»ºå°è£…åœ¨ä¸Šä¸‹æ–‡ä¸­çš„å•ä¸€èŒè´£çš„æœåŠ¡</p><p><strong>åšæŒ</strong>å½“æœåŠ¡æˆé•¿åˆ°è¶…å‡ºå•ä¸€ç”¨é€”æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªæ–°æœåŠ¡</p><p><strong>åšæŒ</strong>æŠŠæ•°æ®æ“ä½œå’Œä¸æ•°æ®äº¤äº’çš„é€»è¾‘é‡æ„åˆ°æœåŠ¡é‡Œã€‚</p><h4 id="å¼•å¯¼"><a href="#å¼•å¯¼" class="headerlink" title="å¼•å¯¼"></a>å¼•å¯¼</h4><p><strong>åšæŒ</strong>æŠŠåº”ç”¨çš„å¼•å¯¼ç¨‹åºå’Œå¹³å°ç›¸å…³çš„é€»è¾‘æ”¾åˆ°åä¸º <code>main.ts</code> çš„æ–‡ä»¶é‡Œ</p><p><strong>åšæŒ</strong>åœ¨å¼•å¯¼é€»è¾‘ä¸­åŒ…å«é”™è¯¯å¤„ç†ä»£ç </p><p><strong>é¿å…</strong>æŠŠåº”ç”¨é€»è¾‘æ”¾åœ¨ <code>main.ts</code> ä¸­ï¼Œè€Œåº”æ”¾åœ¨ç»„ä»¶æˆ–æœåŠ¡é‡Œ</p><h4 id="æµ‹è¯•æ–‡ä»¶å"><a href="#æµ‹è¯•æ–‡ä»¶å" class="headerlink" title="æµ‹è¯•æ–‡ä»¶å"></a>æµ‹è¯•æ–‡ä»¶å</h4><p><strong>å•å…ƒæµ‹è¯•ï¼š</strong></p><p><strong>åšæŒ</strong>æµ‹è¯•è§„æ ¼æ–‡ä»¶åä¸è¢«æµ‹è¯•ç»„ä»¶æ–‡ä»¶åç›¸åŒ</p><p><strong>åšæŒ</strong>æµ‹è¯•è§„æ ¼æ–‡ä»¶åæ·»åŠ  <code>.spec</code> åç¼€</p><p><strong>ç«¯åˆ°ç«¯çš„æµ‹è¯•ï¼š</strong></p><p><strong>åšæŒ</strong>ç«¯åˆ°ç«¯æµ‹è¯•è§„æ ¼æ–‡ä»¶å’Œå®ƒä»¬æ‰€æµ‹è¯•çš„ç‰¹æ€§åŒåï¼Œæ·»åŠ  <code>.e2e-spec</code> åç¼€ï¼Œæˆ–è€…æ”¾åœ¨ç‰¹å®šçš„æ–‡ä»¶å¤¹ä¸­ã€‚</p><h3 id="å…¶ä»–åŸåˆ™"><a href="#å…¶ä»–åŸåˆ™" class="headerlink" title="å…¶ä»–åŸåˆ™"></a>å…¶ä»–åŸåˆ™</h3><ul><li><p>å®šä½ï¼š</p><p><strong>åšæŒ</strong>ç›´è§‚ã€ç®€å•å’Œå¿«é€Ÿåœ°å®šä½ä»£ç ã€‚</p></li><li><p>è¯†åˆ«ï¼š</p><p><strong>åšæŒ</strong>å‘½åæ–‡ä»¶åˆ°è¿™ä¸ªç¨‹åº¦ï¼šçœ‹åˆ°åå­—ç«‹åˆ»çŸ¥é“å®ƒåŒ…å«äº†ä»€ä¹ˆï¼Œä»£è¡¨äº†ä»€ä¹ˆã€‚</p><p><strong>åšæŒ</strong>æ–‡ä»¶åè¦å…·æœ‰è¯´æ˜æ€§ï¼Œç¡®ä¿æ–‡ä»¶ä¸­åªåŒ…å«ä¸€ä¸ªç»„ä»¶ã€‚</p><p><strong>é¿å…</strong>åˆ›å»ºåŒ…å«å¤šä¸ªç»„ä»¶ã€æœåŠ¡æˆ–è€…æ··åˆä½“çš„æ–‡ä»¶ã€‚</p></li><li><p>æ‰å¹³</p><p><strong>åšæŒ</strong>å°½å¯èƒ½ä¿æŒæ‰å¹³çš„ç›®å½•ç»“æ„ã€‚</p><p><strong>è€ƒè™‘</strong>å½“åŒä¸€ç›®å½•ä¸‹è¾¾åˆ° 7 ä¸ªæˆ–æ›´å¤šä¸ªæ–‡ä»¶æ—¶åˆ›å»ºå­ç›®å½•ã€‚</p><p><strong>è€ƒè™‘</strong>é…ç½® IDEï¼Œä»¥éšè—æ— å…³çš„æ–‡ä»¶ï¼Œä¾‹å¦‚ç”Ÿæˆå‡ºæ¥çš„ <code>.js</code> æ–‡ä»¶å’Œ <code>.js.map</code> æ–‡ä»¶ç­‰ã€‚</p></li><li><p>T-DRY</p><p><strong>åšæŒ</strong> DRYï¼ˆDonâ€™t Repeat Yourselfï¼Œä¸é‡å¤è‡ªå·±ï¼‰ã€‚</p><p><strong>é¿å…</strong>è¿‡åº¦ DRYï¼Œä»¥è‡´ç‰ºç‰²äº†é˜…è¯»æ€§</p></li><li><p>ä»£ç ç»“æ„</p><p><strong>åšæŒ</strong>ä»é›¶å¼€å§‹ï¼Œä½†è¦è€ƒè™‘åº”ç”¨ç¨‹åºæ¥ä¸‹æ¥çš„è·¯å¾€å“ªå„¿èµ°</p><p><strong>åšæŒ</strong>æœ‰ä¸€ä¸ªè¿‘æœŸå®æ–½æ–¹æ¡ˆå’Œä¸€ä¸ªé•¿æœŸçš„æ„¿æ™¯</p><p><strong>åšæŒ</strong>æŠŠæ‰€æœ‰æºä»£ç éƒ½æ”¾åˆ°åä¸º <code>src</code> çš„ç›®å½•é‡Œ</p><p><strong>åšæŒ</strong>å¦‚æœç»„ä»¶å…·æœ‰å¤šä¸ªä¼´ç”Ÿæ–‡ä»¶ (<code>.ts</code>ã€<code>.html</code>ã€<code>.css</code> å’Œ <code>.spec</code>)ï¼Œå°±ä¸ºå®ƒåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹</p></li><li><p>ESLint</p><p><strong>åšæŒ</strong>ä½¿ç”¨VSCodeç­‰IDEã€é…åˆESLint + Prettierç­‰å·¥å…·æ¥æ•´ç†ä»£ç æ ¼å¼ã€æ£€æŸ¥ä»£ç é£æ ¼é—®é¢˜ã€‚</p></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;è¿™æ˜¯ã€Šnestjsæ­å»ºé€šç”¨ä¸šåŠ¡æ¡†æ¶ã€‹ç³»åˆ—çš„ç¬¬4ç¯‡ï¼Œè¿›å…¥å¼€å‘å…·ä½“çš„åŠŸèƒ½ä¹‹å‰ï¼Œå…»æˆè‰¯å¥½çš„å·¥ç¨‹ç›®å½•ä¸ä»£ç é£æ ¼çš„ä¹ æƒ¯ï¼Œç›®çš„æ„å»ºå¤§å‹å¤æ‚é¡¹ç›®ï¼Œæé«˜ä»£ç æ˜“ç»´æŠ¤æ€§ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="nestjsæ­å»ºé€šç”¨ä¸šåŠ¡æ¡†æ¶" scheme="https://www.toimc.com/categories/nestjs%E6%90%AD%E5%BB%BA%E9%80%9A%E7%94%A8%E4%B8%9A%E5%8A%A1%E6%A1%86%E6%9E%B6/"/>
    
    
    <category term="node.js" scheme="https://www.toimc.com/tags/node-js/"/>
    
    <category term="nestjs" scheme="https://www.toimc.com/tags/nestjs/"/>
    
    <category term="webæ¡†æ¶" scheme="https://www.toimc.com/tags/web%E6%A1%86%E6%9E%B6/"/>
    
  </entry>
  
  <entry>
    <title>ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥?</title>
    <link href="https://www.toimc.com/what-is-dependency-injection/"/>
    <id>https://www.toimc.com/what-is-dependency-injection/</id>
    <published>2021-03-12T02:39:50.000Z</published>
    <updated>2021-03-12T09:48:11.539Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬ç¯‡æ˜¯nestjsç³»åˆ—æ–‡ç« çš„ç•ªå¤–ç¯‡ï¼Œä¸»è¦æ˜¯ä»‹ç»æ§åˆ¶åè½¬Invention of Control(IoC)å’Œä¾èµ–æ³¨å…¥Dependecy Injection(DI)ï¼Œä½œä¸ºnestjså’Œangularçš„æ ¸å¿ƒæ¦‚å¿µï¼Œå­¦ä¹ å®ƒä»¬æœ‰åˆ©äºæ›´å¥½çš„è¿›è¡Œæ¡†æ¶çš„å­¦ä¹ ã€‚</p><span id="more"></span><h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p><strong>æ§åˆ¶åè½¬ï¼ˆInversion of Controlï¼‰</strong>æ˜¯ä¸€ç§æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„ä¸€ç§è®¾è®¡åŸåˆ™ï¼Œç”¨æ¥å‡ä½è®¡ç®—æœºä»£ç ä¹‹é—´çš„è€¦åˆåº¦ã€‚å…¶åŸºæœ¬æ€æƒ³æ˜¯ï¼šå€ŸåŠ©äºâ€œç¬¬ä¸‰æ–¹â€å®ç°å…·æœ‰ä¾èµ–å…³ç³»çš„å¯¹è±¡ä¹‹é—´çš„è§£è€¦ã€‚</p><p><strong>ä¾èµ–æ³¨å…¥</strong>æ˜¯ä¸€ç§ç”¨äºå®ç°IoCçš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸åœ¨ç±»å¤–åˆ›å»ºä¾èµ–å¯¹è±¡ï¼Œå¹¶é€šè¿‡ä¸åŒçš„æ–¹å¼å°†è¿™äº›å¯¹è±¡æä¾›ç»™ç±»ã€‚ä½¿ç”¨DIï¼Œæˆ‘ä»¬å°†ä¾èµ–å¯¹è±¡çš„åˆ›å»ºå’Œç»‘å®šç§»åˆ°ä¾èµ–å®ƒä»¬çš„ç±»ä¹‹å¤–ã€‚å…·ä½“çš„åšæ³•ï¼Œæ¯”å¦‚ï¼šå°†å®ä¾‹å˜é‡ä¼ å…¥åˆ°ä¸€ä¸ªå¯¹è±¡ä¸­å»(Dependency injection means giving an object its instance variables)</p><p>ç®€å•æ¥è¯´å®ƒå’Œä¾èµ–æ³¨å…¥é—´çš„åŒºåˆ«å°±æ˜¯ï¼š</p><ul><li><strong>æ§åˆ¶åè½¬æ˜¯ä¸€ç§è®¾è®¡æ€æƒ³</strong></li><li><strong>ä¾èµ–æ³¨å…¥æ˜¯ä¸€ç§ç¼–ç¨‹æŠ€å·§</strong></li></ul><h2 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h2><p>å…ˆçœ‹ä¸ªä¾‹å­ï¼šæˆ‘ä»¬å¸Œæœ›åœ¨é€šçŸ¥ç»„ä»¶(NotificationComponent)ä¸­é€šè¿‡æ¶ˆæ¯æœåŠ¡(MessageService)å‘é€ä¸€æ¡æ¶ˆæ¯ã€‚</p><p>å¦‚æœä¸ä½¿ç”¨ä¾èµ–æ³¨å…¥çš„è¯ï¼Œæˆ‘ä»¬çš„ä»£ç å¤§æ¦‚é•¿è¿™æ ·ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NotificationComponent</span> </span>&#123;</span><br><span class="line">  msg: MessageService;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">     <span class="built_in">this</span>.msg = <span class="keyword">new</span> MessageService();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">sendMsg</span>(<span class="params">msgType: string, info: string</span>)</span> &#123;</span><br><span class="line">     <span class="built_in">this</span>.msg.send(msgType, info);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ä¾èµ–æ³¨å…¥æ—¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NotificationComponent</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">msg: MessageService</span>)</span> &#123;&#125;  <span class="comment">// Angular ä¸­æ³¨å…¥ä¾èµ–çš„æ–¹å¼</span></span><br><span class="line">  <span class="function"><span class="title">sendMsg</span>(<span class="params">msgType: string, info: string</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.msg.send(msgType, info);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»è¿‡å¯¹æ¯”ï¼Œå¯ä»¥çœ‹åˆ°ä½¿ç”¨ä¾èµ–æ³¨å…¥æœ‰ä¸¤ä¸ªå¾ˆæ˜¾ç„¶çš„ä¼˜ç‚¹ï¼š</p><ul><li>ä»£ç çš„è¡Œæ•°å˜å°‘äº†</li><li><code>NotificationComponent</code> ä¸ <code>MessageService</code> é—´çš„è€¦åˆæ€§é™ä½äº†</li></ul><h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><p>åœ¨æ§åˆ¶åè½¬ä¸­ï¼Œâ€æ§åˆ¶â€œæ˜¯æŒ‡å¯¹ç¨‹åºæµç¨‹çš„æ§åˆ¶ï¼Œâ€åè½¬â€œåˆ™æ˜¯å°†æ§åˆ¶æƒä»ç¨‹åºå‘˜çš„æ‰‹é‡Œåè½¬åˆ°äº†å¤–å±‚æ¡†æ¶ã€‚</p><p>æ§åˆ¶åè½¬æ˜¯ä¸€ç§åœ¨è½¯ä»¶å·¥ç¨‹ä¸­è§£è€¦åˆçš„æ€æƒ³ï¼Œè°ƒç”¨ç±»åªä¾èµ–æ¥å£ï¼Œè€Œä¸ä¾èµ–å…·ä½“çš„å®ç°ç±»ï¼Œå‡å°‘äº†è€¦åˆã€‚æ§åˆ¶æƒäº¤ç»™äº†å®¹å™¨ï¼Œåœ¨è¿è¡Œçš„æ—¶å€™æ‰ç”±å®¹å™¨å†³å®šå°†å…·ä½“çš„å®ç°åŠ¨æ€çš„â€œæ³¨å…¥â€åˆ°è°ƒç”¨ç±»çš„å¯¹è±¡ä¸­ã€‚</p><p>æ—¢ç„¶æ§åˆ¶åè½¬æ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ï¼Œé‚£ä¹ˆä½œä¸ºç›¸åº”å®ç°æ–¹å¼ä¹‹ä¸€çš„ä¾èµ–æ³¨å…¥ï¼ˆæ¨¡æ¿æ¨¡å¼ä¹Ÿæ˜¯ç§å®ç°æ–¹å¼ï¼‰å¿…ç„¶ä¹Ÿéµå¾ªæ­¤æ€æƒ³ã€‚</p><p>ä¾èµ–æ³¨å…¥æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå¯ä»¥ä½œä¸ºæ§åˆ¶åè½¬çš„ä¸€ç§å®ç°æ–¹å¼ã€‚ä¾èµ–æ³¨å…¥å°±æ˜¯å°†å®ä¾‹å˜é‡ä¼ å…¥åˆ°ä¸€ä¸ªå¯¹è±¡ä¸­å»(Dependency injection means giving an object its instance variables)ã€‚</p><p>é€šè¿‡IoCæ¡†æ¶ï¼Œç±»Aä¾èµ–ç±»Bçš„å¼ºè€¦åˆå…³ç³»å¯ä»¥åœ¨è¿è¡Œæ—¶é€šè¿‡å®¹å™¨å»ºç«‹ï¼Œä¹Ÿå°±æ˜¯è¯´æŠŠåˆ›å»ºBå®ä¾‹çš„å·¥ä½œç§»äº¤ç»™å®¹å™¨ï¼Œç±»Aåªç®¡ä½¿ç”¨å°±å¯ä»¥ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ¬ç¯‡æ˜¯nestjsç³»åˆ—æ–‡ç« çš„ç•ªå¤–ç¯‡ï¼Œä¸»è¦æ˜¯ä»‹ç»æ§åˆ¶åè½¬Invention of Control(IoC)å’Œä¾èµ–æ³¨å…¥Dependecy Injection(DI)ï¼Œä½œä¸ºnestjså’Œangularçš„æ ¸å¿ƒæ¦‚å¿µï¼Œå­¦ä¹ å®ƒä»¬æœ‰åˆ©äºæ›´å¥½çš„è¿›è¡Œæ¡†æ¶çš„å­¦ä¹ ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="Dependecy Injection(DI)" scheme="https://www.toimc.com/tags/Dependecy-Injection-DI/"/>
    
    <category term="Invention of Control(IoC)" scheme="https://www.toimc.com/tags/Invention-of-Control-IoC/"/>
    
    <category term="ä¾èµ–æ³¨å…¥" scheme="https://www.toimc.com/tags/%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/"/>
    
    <category term="æ¶æ„æ€ç»´" scheme="https://www.toimc.com/tags/%E6%9E%B6%E6%9E%84%E6%80%9D%E7%BB%B4/"/>
    
  </entry>
  
  <entry>
    <title>nestjsæ­å»ºé€šç”¨ä¸šåŠ¡æ¡†æ¶ï¼ˆ3ï¼‰ï¼šæ ¸å¿ƒæ¦‚å¿µ</title>
    <link href="https://www.toimc.com/nestjs-example-project-3/"/>
    <id>https://www.toimc.com/nestjs-example-project-3/</id>
    <published>2021-03-11T01:30:45.000Z</published>
    <updated>2021-03-12T03:40:36.290Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™æ˜¯ã€Šnestjsæ­å»ºé€šç”¨ä¸šåŠ¡æ¡†æ¶ã€‹ç³»åˆ—çš„ç¬¬3ç¯‡ï¼Œä¸»è¦æ˜¯ä»‹ç»nestjsä¸­çš„æ ¸å¿ƒæ¦‚å¿µï¼Œç†è§£è¿™äº›æ¦‚å¿µä¸ä½¿ç”¨æ–¹æ³•æ˜¯ä»Šåå­¦ä¹ ä¸Šçš„å«è„šçŸ³ã€‚PS: å¯¹äºæœ¬ç¯‡çš„å­¦ä¹ ï¼Œä½ éœ€è¦æœ‰ä¸€å®šçš„TSçš„åŸºç¡€ï¼Œç†è§£èµ·æ¥æ‰ä¼šæ¯”è¾ƒé¡ºç•…ã€‚</p><span id="more"></span><blockquote><p>æœ¬ç« çš„å†…å®¹ä¸æ˜¯éšæ„çš„å¤åˆ¶ã€ç²˜è´´å®˜æ–¹çš„è¯‘æœ¬ï¼Œè¿™æ ·æ²¡æœ‰ä»»ä½•å­¦ä¹ çš„ä»·å€¼ã€‚æ‰€æœ‰çš„å†…å®¹ç»è¿‡ä¸ªäººçš„æ•´ç†ï¼Œä¹Ÿç®—æ˜¯çŸ¥è¯†çš„è¾“å‡ºï¼Œå¤§å®¶ä¸”å­¦ä¸”æ‰‹ä¸‹ç•™æƒ…ã€‚</p><p>å…¶ä¸­æ¯”è¾ƒé‡è¦çš„å†…å®¹ï¼šè£…é¥°å™¨ã€è£…é¥°å™¨ - ä¾èµ–æ³¨å…¥ï¼Œåœ¨ä¾èµ–æ³¨å…¥éƒ¨åˆ†å› ä¸ºæ¦‚å¿µæ¯”è¾ƒéš¾ç†è§£ï¼Œæ‰€ä»¥åé¢æ‰“ç®—å•ç‹¬å†å†™ä¸€ç¯‡å…³äºä¾èµ–æ³¨å…¥ï¼ˆè®¾è®¡æ¨¡å¼ï¼‰çš„åšæ–‡ï¼æ¬¢è¿è®¢é˜…RSSï¼</p></blockquote><h2 id="æ€»è§ˆæ¦‚å¿µ"><a href="#æ€»è§ˆæ¦‚å¿µ" class="headerlink" title="æ€»è§ˆæ¦‚å¿µ"></a>æ€»è§ˆæ¦‚å¿µ</h2><p>å…ˆä¸åºŸè¯ï¼Œç»™å¤§å®¶æ€»ç»“äº†ä¸€å¼ åŸºç¡€æ¦‚å¿µçš„æ€ç»´å¯¼å›¾ï¼š</p><img class="lazyload" src="https://static.www.toimc.com/blog/img/2021/nestjs-example-project-3/nestjsï¼ˆTypeScriptï¼‰æ ¸å¿ƒæ¦‚å¿µ.jpg?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/200"><p>å¤§å®¶å¯ä»¥æŠŠä¸Šé¢çš„å›¾ï¼Œå½“æˆæ˜¯å¹³æ—¶æŸ¥é˜…æ¦‚å¿µçš„ä¸€ä¸ªç´¢å¼•ï¼Œæˆ‘ä»¬æŠŠç›¸å…³çš„å†…å®¹è¿›è¡Œäº†è¿æ¥ä¸åˆ†å±‚ï¼Œæ–¹ä¾¿å¤§å®¶å­¦ä¹ ã€‚</p><h2 id="è£…é¥°å™¨"><a href="#è£…é¥°å™¨" class="headerlink" title="è£…é¥°å™¨"></a>è£…é¥°å™¨</h2><p><strong>è¿™æ˜¯nestjsï¼ˆAngularï¼‰å­¦ä¹ ä¸­éå¸¸ï¼éå¸¸ï¼éå¸¸é‡è¦çš„ä¸€éƒ¨åˆ†ï¼</strong>å¯ä»¥è¯´æ˜¯nestjså€Ÿç”¨ESé«˜çº§ç‰¹æ€§çš„ä¸€ä¸ªçµé­‚~ï¼Œæˆ‘ä»¬å°†ä¼šä»ä»¥ä¸‹å‡ ä¸ªæ¦‚å¿µå‡ºå‘æ¥è¿›è¡Œå­¦ä¹ ã€‚</p><p><u>åœ¨ä¸‹é¢çš„å­¦ä¹ ä¸­ï¼Œä¸ä¹ä¼šæœ‰ä¸€äº›ä»£ç çš„å†…å®¹ï¼Œçœ‹ä¸æ‡‚æ²¡æœ‰å…³ç³»</u>ï¼Œå…ˆè¯»æ¯ä¸€éƒ¨åˆ†çš„å‰ç½®çš„ä»‹ç»ï¼Œç„¶åTSä»£ç çš„å†…å®¹ï¼Œä¸»è¦æ˜¯äº†è§£åŸºç¡€çš„åº”ç”¨ä¸è¯¥è£…é¥°å™¨çš„ä½œç”¨å³å¯ã€‚</p><h3 id="æ§åˆ¶å™¨"><a href="#æ§åˆ¶å™¨" class="headerlink" title="æ§åˆ¶å™¨"></a>æ§åˆ¶å™¨</h3><p>æ§åˆ¶å™¨è´Ÿè´£å¤„ç†ä¼ å…¥çš„ <strong>è¯·æ±‚</strong> å’Œå‘å®¢æˆ·ç«¯è¿”å› <strong>å“åº”</strong> ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Controller, Get &#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/common&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&#x27;cats&#x27;</span>) <span class="comment">// Controller - æ§åˆ¶å™¨çš„è£…é¥°å™¨ï¼Œ cats - è·¯ç”±ï¼Œæˆ–è€…è¯´æ˜¯è¯·æ±‚çš„ä¸€ä¸ªå‰ç¼€ï¼Œç±»ä¼¼äº /api/user /api/test ... ä¸­çš„/api</span></span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">CatsController</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Get</span>(<span class="string">&#x27;ab*cd&#x27;</span>) <span class="comment">// Get - è¯·æ±‚çš„ç±»å‹çš„è£…é¥°å™¨</span></span><br><span class="line">  findAll(<span class="meta">@Req</span>() request: Request): <span class="built_in">string</span> &#123; <span class="comment">// å…·ä½“å¯¹åº”ä¸Šé¢è¯·æ±‚çš„å“åº”å‡½æ•°</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;This action returns all cats&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Post</span>()</span><br><span class="line">  <span class="meta">@HttpCode</span>(<span class="number">204</span>) <span class="comment">// httpçŠ¶æ€ç </span></span><br><span class="line">  <span class="meta">@Header</span>(<span class="string">&#x27;Cache-Control&#x27;</span>, <span class="string">&#x27;none&#x27;</span>) <span class="comment">// å“åº”å¤´</span></span><br><span class="line">  <span class="function"><span class="title">create</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;This action adds a new cat&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Get</span>(<span class="string">&#x27;docs&#x27;</span>)</span><br><span class="line">  <span class="meta">@Redirect</span>(<span class="string">&#x27;https://docs.nestjs.com&#x27;</span>, <span class="number">302</span>) <span class="comment">// é‡å®šå‘</span></span><br><span class="line">  <span class="function"><span class="title">getDocs</span>(<span class="params"><span class="meta">@Query</span>(<span class="string">&#x27;version&#x27;</span>) version</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (version &amp;&amp; version === <span class="string">&#x27;5&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">url</span>: <span class="string">&#x27;https://docs.nestjs.com/v5/&#x27;</span> &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Get</span>(<span class="string">&#x27;:id&#x27;</span>) <span class="comment">// å‚æ•°  - è·¯å¾„ä¼ å‚ä½¿ç”¨Paramï¼Œurlä¼ å‚ä½¿ç”¨Queryï¼Œpostä¼ å‚ä½¿ç”¨Body</span></span><br><span class="line">  findOne(<span class="meta">@Param</span>() params): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(params.id);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`This action returns a #<span class="subst">$&#123;params.id&#125;</span> cat`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nest g controller [<span class="built_in">file</span>-<span class="built_in">name</span>]</span><br></pre></td></tr></table></figure><p>æ¥åˆ›å»ºä¸€ä¸ªæ ‡å‡†çš„æ§åˆ¶å™¨æ–‡ä»¶ã€‚</p><ul><li><p>è·¯ç”± - <code>@Controller</code></p></li><li><p>Request - å¦‚ä¸‹è¡¨ï¼š</p><p>äº†è§£Expressçš„åŒå­¦åº”è¯¥çŸ¥é“ï¼Œè¯·æ±‚å¯¹è±¡<code>req</code>ä¸å“åº”å¯¹è±¡<code>res</code>ï¼š</p><table><thead><tr><th>è£…é¥°å™¨</th><th>å¯¹åº”çš„Expressä¸­çš„å¯¹è±¡æˆ–è€…ç”¨æ³•</th></tr></thead><tbody><tr><td><code>@Request()</code></td><td><code>req</code></td></tr><tr><td><code>@Response() @Res()*</code></td><td><code>res</code></td></tr><tr><td><code>@Next()</code></td><td><code>next</code></td></tr><tr><td><code>@Session()</code></td><td><code>req.session</code></td></tr><tr><td><code>@Param(key?: string)</code></td><td><code>req.params</code> / <code>req.params[key]</code></td></tr><tr><td><code>@Body(key?: string)</code></td><td><code>req.body</code> / <code>req.body[key]</code></td></tr><tr><td><code>@Query(key?: string)</code></td><td><code>req.query</code> / <code>req.query[key]</code></td></tr><tr><td><code>@Headers(name?: string)</code></td><td><code>req.headers</code> / <code>req.headers[name]</code></td></tr><tr><td><code>@Ip()</code></td><td><code>req.ip</code></td></tr></tbody></table></li><li><p>èµ„æºï¼ˆè¯·æ±‚æ–¹æ³•ï¼‰- <code>@Put()</code> ã€ <code>@Delete()</code>ã€ <code>@Patch()</code>ã€ <code>@Options()</code>ã€ <code>@Head()</code>å’Œ <code>@All()</code>ã€‚è¿™äº›è¡¨ç¤ºå„è‡ªçš„ <code>HTTP</code>è¯·æ±‚æ–¹æ³•ã€‚</p></li><li><p>è·¯ç”±é€šé…ç¬¦ - è®¾ç½®åœ¨ä¸Šé¢çš„èµ„æºä¸­çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå­—ç¬¦ <code>?</code> ã€ <code>+</code> ã€ <code>*</code> ä»¥åŠ <code>()</code> æ˜¯å®ƒä»¬çš„æ­£åˆ™è¡¨è¾¾å¼å¯¹åº”é¡¹çš„å­é›†ã€‚è¿å­—ç¬¦ (<code>-</code>) å’Œç‚¹ (<code>.</code>) æŒ‰å­—ç¬¦ä¸²è·¯å¾„è§£æã€‚å¦‚ï¼š<code>@Get(&#39;ab*cd&#39;)</code>ä¼šåŒ¹é…æˆ<code>abcd</code>ï¼Œ <code>ab_cd</code>ï¼Œ<code>abecd</code>ç­‰ã€‚</p></li><li><p>çŠ¶æ€ç  - <code>@HttpCode()</code></p></li><li><p>å“åº”å¤´ - <code>@Header</code></p></li></ul><h3 id="æä¾›è€…"><a href="#æä¾›è€…" class="headerlink" title="æä¾›è€…"></a>æä¾›è€…</h3><p>æä¾›è€…æ˜¯<code>nest</code>å€Ÿç”¨<code>Angular</code>çš„è®¾è®¡æ¨¡å¼å¼•å…¥çš„ä¸€ä¸ªæ¦‚å¿µã€‚</p><blockquote><p>Providers æ˜¯ <code>Nest</code> çš„ä¸€ä¸ªåŸºæœ¬æ¦‚å¿µï¼Œè®¸å¤šåŸºæœ¬çš„ <code>Nest</code> ç±»å¯èƒ½è¢«è§†ä¸º provider - <code>service</code>,<code> repository</code>, <code>factory</code>, <code>helper</code> ç­‰ç­‰ï¼Œä»–ä»¬éƒ½å¯ä»¥é€šè¿‡ <code>constructor</code> <strong>æ³¨å…¥</strong>ä¾èµ–å…³ç³»ã€‚</p></blockquote><p><code>providers</code>å°±æ˜¯åœ¨ä»£ç ç»„ç»‡ä¸ŠæŠ½è±¡çš„ä¸€å±‚å­˜æ”¾å…¬å…±ä»£ç çš„éƒ¨åˆ†ï¼Œåœ¨ç¨‹åºå†…éƒ¨äº¤ç”±æ¡†æ¶æ¥å¤„ç†ä¾èµ–å…³ç³»ï¼Œé€šè¿‡<code>providers</code>å’Œ<code>@Injectable()</code>æ³¨è§£å¯ä»¥è‡ªç”±çš„ä½¿ç”¨è¿™äº›å…¬å…±çš„ä»£ç ä¸­çš„é€»è¾‘ã€‚</p><h4 id="æœåŠ¡"><a href="#æœåŠ¡" class="headerlink" title="æœåŠ¡"></a>æœåŠ¡</h4><p>è¿™å¼ å›¾å¾ˆå¥½çš„è§£é‡Šäº†<code>@Injectable()</code>çš„ä½œç”¨ï¼š</p><img class="lazyload" src="https://static.www.toimc.com/blog/img/2021/nestjs-example-project-3/injector-injects.png?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/200"><p>è§£é‡Šï¼š</p><p>ä¸€ä¸ª<code>ServiceA</code>è¢«åŠ ä¸Š<code>@Injectable()</code>çš„æ³¨è§£ä¹‹åï¼Œå°±å˜æˆäº†ä¸€ä¸ªå¯ä»¥è¢«å…¶ä»–<code>Component</code>åœ¨æ„é€ å™¨éƒ¨åˆ†å¼•ç”¨çš„å‚æ•°ï¼Œåœ¨<code>nest</code>çš„æä¾›è€…<code>providers:[]</code>ä¸­éœ€è¦æ·»åŠ å¯¹åº”çš„<code>ServiceA</code>ï¼Œå¦‚ï¼š<code>providers: [ ServiceA ]</code>ï¼Œä»¥ä¾¿æ¡†æ¶è‡ªåŠ¨æ¥å¤„ç†ä¾èµ–å…³ç³»ï¼Œå¹¶è¿›è¡Œ<u>å¿…è¦çš„</u>å®ä¾‹åŒ–ã€‚</p><p>ç”¨æ³•ï¼š</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nest <span class="keyword">generate</span> service [service-name]</span><br></pre></td></tr></table></figure><h4 id="ä¾èµ–æ³¨å…¥-é‡è¦"><a href="#ä¾èµ–æ³¨å…¥-é‡è¦" class="headerlink" title="ä¾èµ–æ³¨å…¥(é‡è¦)"></a>ä¾èµ–æ³¨å…¥(é‡è¦)</h4><p>ä¸»è¦æœ‰ä¸‰ç±»å…·ä½“çš„åº”ç”¨ï¼š</p><ul><li>ç®¡é“ - å®ç°æ•°æ®çš„è½¬æ¢ä¸éªŒè¯</li><li>å®ˆå« - å®ç°æµç¨‹æ§åˆ¶ï¼Œé‰´æƒç®¡ç†</li><li>æ‹¦æˆªå™¨ - ç»‘å®šå‡½æ•°æ‰§è¡Œå‰åçš„å¤„ç†å‡½æ•°ï¼Œå¦‚ï¼šè¯·æ±‚&amp;å“åº”æ‹¦æˆªå™¨ã€é”™è¯¯ç»Ÿä¸€å¤„ç†ã€ç¼“å­˜ç­‰</li></ul><blockquote><p>è¿™ä¸‰ç±»å…¨æ˜¯<code>@Injectable()</code>ä¿®é¥°çš„ï¼Œå®˜æ–¹åœ¨æ¶æ„ä¸Šæä¾›çš„ç°æˆçš„å·¥å…·ç±»ï¼Œç®¡é“åº”å®ç° <code>PipeTransform</code> æ¥å£ï¼Œå®ˆå«åº”è¯¥å®ç° <code>CanActivate</code> æ¥å£ï¼Œæ‹¦æˆªå™¨åº”è¯¥å®ç° <code>NestInterceptor</code> æ¥å£ã€‚</p></blockquote><p>è¦ç†è§£ä¾èµ–æ³¨å…¥ï¼Œè¦å…ˆçœ‹ä¸ªä¾‹å­ï¼šæˆ‘ä»¬å¸Œæœ›åœ¨é€šçŸ¥ç»„ä»¶(NotificationComponent)ä¸­é€šè¿‡æ¶ˆæ¯æœåŠ¡(MessageService)å‘é€ä¸€æ¡æ¶ˆæ¯ã€‚</p><p>å¦‚æœä¸ä½¿ç”¨ä¾èµ–æ³¨å…¥çš„è¯ï¼Œæˆ‘ä»¬çš„ä»£ç å¤§æ¦‚é•¿è¿™æ ·ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NotificationComponent</span> </span>&#123;</span><br><span class="line">  msg: MessageService;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">     <span class="built_in">this</span>.msg = <span class="keyword">new</span> MessageService();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">sendMsg</span>(<span class="params">msgType: string, info: string</span>)</span> &#123;</span><br><span class="line">     <span class="built_in">this</span>.msg.send(msgType, info);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ä¾èµ–æ³¨å…¥æ—¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NotificationComponent</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">msg: MessageService</span>)</span> &#123;&#125;  <span class="comment">// Angular ä¸­æ³¨å…¥ä¾èµ–çš„æ–¹å¼</span></span><br><span class="line">  <span class="function"><span class="title">sendMsg</span>(<span class="params">msgType: string, info: string</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.msg.send(msgType, info);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»è¿‡å¯¹æ¯”ï¼Œå¯ä»¥çœ‹åˆ°ä½¿ç”¨ä¾èµ–æ³¨å…¥æœ‰ä¸¤ä¸ªå¾ˆæ˜¾ç„¶çš„ä¼˜ç‚¹ï¼š</p><ul><li>ä»£ç çš„è¡Œæ•°å˜å°‘äº†</li><li>NotificationComponent ä¸ MessageService é—´çš„è€¦åˆæ€§é™ä½äº†</li></ul><p>å¤§å®¶å…ˆå¯ä»¥å»äº†è§£ä¸€ä¸‹IoCï¼ˆInversion of Controlï¼‰æ§åˆ¶åè½¬ï¼Œç®€å•æ¥è¯´å®ƒå’Œä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼‰é—´çš„åŒºåˆ«å°±æ˜¯ï¼š</p><ul><li><strong>ä¾èµ–æ³¨å…¥æ˜¯ä¸€ç§ç¼–ç¨‹æŠ€å·§</strong></li><li><strong>æ§åˆ¶åè½¬æ˜¯ä¸€ç§è®¾è®¡æ€æƒ³</strong></li></ul><p><strong>ä¾èµ–æ³¨å…¥</strong>å°±æ˜¯ä¸é€šè¿‡ new è¿™ç§æ–¹å¼æ¥åœ¨ç±»ï¼ˆNotificationComponentï¼‰çš„å†…éƒ¨åˆ›å»ºæ‰€ä¾èµ–ç±»ï¼ˆMessageServiceï¼‰çš„å¯¹è±¡ï¼Œè€Œæ˜¯åœ¨å¤–éƒ¨åˆ›å»ºå¥½éœ€è¦ä¾èµ–çš„ç±»å¯¹è±¡ä¹‹åé€šè¿‡æ„é€ å‡½æ•°ç­‰æ–¹å¼æ³¨å…¥è¿›æ¥å°±å¯ä»¥äº†ã€‚</p><p>åœ¨<strong>æ§åˆ¶åè½¬</strong>ä¸­ï¼Œâ€æ§åˆ¶â€œæ˜¯æŒ‡å¯¹ç¨‹åºæµç¨‹çš„æ§åˆ¶ï¼Œâ€åè½¬â€œåˆ™æ˜¯å°†æ§åˆ¶æƒä»ç¨‹åºå‘˜çš„æ‰‹é‡Œåè½¬åˆ°äº†å¤–å±‚æ¡†æ¶ã€‚</p><ol><li><p>ç®¡é“(Pipe)</p><p>ç®¡é“æœ‰ä¸¤ä¸ªä½œç”¨:</p><ul><li><strong>è½¬æ¢</strong>ï¼šç®¡é“å°†è¾“å…¥æ•°æ®è½¬æ¢ä¸ºæ‰€éœ€çš„æ•°æ®è¾“å‡º</li><li><strong>éªŒè¯</strong>ï¼šå¯¹è¾“å…¥æ•°æ®è¿›è¡ŒéªŒè¯ï¼Œå¦‚æœéªŒè¯æˆåŠŸç»§ç»­ä¼ é€’; éªŒè¯å¤±è´¥åˆ™æŠ›å‡ºå¼‚å¸¸;</li></ul><p>æŒ‰ç…§ä½œç”¨åˆ†çš„ç±»å‹ï¼šå†…ç½®ç®¡é“ã€ç»“æ„éªŒè¯ã€ç±»éªŒè¯ã€è½¬æ¢ç®¡é“</p><img class="lazyload" src="https://static.www.toimc.com/blog/img/2021/nestjs-example-project-3/Pipe_1.png?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/200"></li><li><p>å®ˆå«(Guard)</p><p>å®ˆå«æœ‰ä¸€ä¸ªå•ç‹¬çš„è´£ä»»ï¼Œå®ƒä»¬æ ¹æ®è¿è¡Œæ—¶å‡ºç°çš„æŸäº›æ¡ä»¶ï¼ˆä¾‹å¦‚æƒé™ï¼Œè§’è‰²ï¼Œè®¿é—®æ§åˆ¶åˆ—è¡¨ç­‰ï¼‰æ¥ç¡®å®šç»™å®šçš„è¯·æ±‚æ˜¯å¦ç”±è·¯ç”±å¤„ç†ç¨‹åºå¤„ç†ã€‚ è¿™é€šå¸¸ç§°ä¸ºæˆæƒã€‚</p><img class="lazyload" src="https://static.www.toimc.com/blog/img/2021/nestjs-example-project-3/Guards_1.png?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/200"></li><li><p>æ‹¦æˆªå™¨(Interceptor)</p><p>æ‹¦æˆªå™¨å…·æœ‰ä¸€ç³»åˆ—æœ‰ç”¨çš„åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½å—é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰æŠ€æœ¯çš„å¯å‘ã€‚å®ƒä»¬å¯ä»¥ï¼š</p><ul><li>åœ¨å‡½æ•°æ‰§è¡Œä¹‹å‰/ä¹‹åç»‘å®š<strong>é¢å¤–çš„é€»è¾‘</strong></li><li>è½¬æ¢ä»å‡½æ•°è¿”å›çš„ç»“æœ</li><li><strong>è½¬æ¢</strong>ä»å‡½æ•°æŠ›å‡ºçš„å¼‚å¸¸</li><li>æ‰©å±•åŸºæœ¬å‡½æ•°è¡Œä¸º</li><li>æ ¹æ®æ‰€é€‰æ¡ä»¶å®Œå…¨é‡å†™å‡½æ•° (ä¾‹å¦‚, ç¼“å­˜ç›®çš„)</li></ul><img class="lazyload" src="https://static.www.toimc.com/blog/img/2021/nestjs-example-project-3/Interceptors_1.png?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/200"></li></ol><h3 id="æ¨¡å—"><a href="#æ¨¡å—" class="headerlink" title="æ¨¡å—"></a>æ¨¡å—</h3><p>æ¨¡å—åŒ–çš„æ¦‚å¿µæ— å¤„ä¸åœ¨ï¼Œåœ¨<code>nest</code>ä¸­ï¼Œæ¨¡å—æ˜¯åº”ç”¨ç¨‹åºçš„åŸºç¡€çš„ç»„æˆéƒ¨åˆ†ï¼Œå¦‚ä¸‹å›¾ï¼š</p><img class="lazyload" src="https://static.www.toimc.com/blog/img/2021/nestjs-example-project-3/Modules_1.png?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/200"><p>å…·ä½“ç‰¹ç‚¹ï¼š</p><ul><li><p>æ¨¡å—æ˜¯å…·æœ‰ <code>@Module()</code> è£…é¥°å™¨çš„ç±»ã€‚</p></li><li><p>æ¯ä¸ª Nest åº”ç”¨ç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªæ¨¡å—ï¼Œå³æ ¹æ¨¡å—ã€‚æ ¹æ¨¡å—å¯èƒ½æ˜¯åº”ç”¨ç¨‹åºä¸­å”¯ä¸€çš„æ¨¡å—ï¼Œç‰¹åˆ«æ˜¯å½“åº”ç”¨ç¨‹åºå¾ˆå°æ—¶ï¼Œä½†æ˜¯å¯¹äºå¤§å‹ç¨‹åºæ¥è¯´è¿™æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚</p></li><li><p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ‚¨å°†æ‹¥æœ‰å¤šä¸ªæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—éƒ½æœ‰ä¸€ç»„ç´§å¯†ç›¸å…³çš„å±æ€§ï¼Œå¦‚ä¸‹è¡¨ï¼š</p></li></ul><p><code>@module()</code> è£…é¥°å™¨æ¥å—ä¸€ä¸ªæè¿°æ¨¡å—å±æ€§çš„å¯¹è±¡ï¼š</p><table><thead><tr><th>å±æ€§å</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>providers</td><td>ç”± Nest æ³¨å…¥å™¨å®ä¾‹åŒ–çš„æä¾›è€…ï¼Œå¹¶ä¸”å¯ä»¥è‡³å°‘åœ¨æ•´ä¸ªæ¨¡å—ä¸­å…±äº«</td></tr><tr><td>controllers</td><td>å¿…é¡»åˆ›å»ºçš„ä¸€ç»„æ§åˆ¶å™¨</td></tr><tr><td>imports</td><td>å¯¼å…¥æ¨¡å—çš„åˆ—è¡¨ï¼Œè¿™äº›æ¨¡å—å¯¼å‡ºäº†æ­¤æ¨¡å—ä¸­æ‰€éœ€æä¾›è€…</td></tr><tr><td>exports</td><td>ç”±æœ¬æ¨¡å—æä¾›å¹¶åº”åœ¨å…¶ä»–æ¨¡å—ä¸­å¯ç”¨çš„æä¾›è€…çš„å­é›†ã€‚</td></tr></tbody></table><h2 id="ä¸­é—´ä»¶"><a href="#ä¸­é—´ä»¶" class="headerlink" title="ä¸­é—´ä»¶"></a>ä¸­é—´ä»¶</h2><p>ä¸­é—´ä»¶æ˜¯åœ¨è·¯ç”±å¤„ç†ç¨‹åº <strong>ä¹‹å‰</strong> è°ƒç”¨çš„å‡½æ•°ï¼Œå®ç° <code>NestMiddleware</code> æ¥å£ã€‚</p><p>Nest ä¸­é—´ä»¶å®é™…ä¸Šç­‰ä»·äº <a href="http://expressjs.com/en/guide/using-middleware.html">express</a> ä¸­é—´ä»¶ã€‚ ä¸‹é¢æ˜¯Expresså®˜æ–¹æ–‡æ¡£ä¸­æ‰€è¿°çš„ä¸­é—´ä»¶åŠŸèƒ½ï¼š</p><p>ä¸­é—´ä»¶å‡½æ•°å¯ä»¥æ‰§è¡Œä»¥ä¸‹ä»»åŠ¡:</p><ul><li>æ‰§è¡Œä»»ä½•ä»£ç ã€‚</li><li>å¯¹è¯·æ±‚å’Œå“åº”å¯¹è±¡è¿›è¡Œæ›´æ”¹ã€‚</li><li>ç»“æŸè¯·æ±‚-å“åº”å‘¨æœŸã€‚</li><li>è°ƒç”¨å †æ ˆä¸­çš„ä¸‹ä¸€ä¸ªä¸­é—´ä»¶å‡½æ•°ã€‚</li><li>å¦‚æœå½“å‰çš„ä¸­é—´ä»¶å‡½æ•°æ²¡æœ‰ç»“æŸè¯·æ±‚-å“åº”å‘¨æœŸ, å®ƒå¿…é¡»è°ƒç”¨ <code>next()</code> å°†æ§åˆ¶ä¼ é€’ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶å‡½æ•°ã€‚å¦åˆ™, è¯·æ±‚å°†è¢«æŒ‚èµ·ã€‚</li></ul><img class="lazyload" src="https://static.www.toimc.com/blog/img/2021/nestjs-example-project-3/Middlewares_1.png?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/200"><h2 id="å¼‚å¸¸è¿‡æ»¤å™¨"><a href="#å¼‚å¸¸è¿‡æ»¤å™¨" class="headerlink" title="å¼‚å¸¸è¿‡æ»¤å™¨"></a>å¼‚å¸¸è¿‡æ»¤å™¨</h2><p>å†…ç½®çš„<strong>å¼‚å¸¸å±‚</strong>è´Ÿè´£å¤„ç†æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­çš„æ‰€æœ‰æŠ›å‡ºçš„å¼‚å¸¸ã€‚å½“æ•è·åˆ°æœªå¤„ç†çš„å¼‚å¸¸æ—¶ï¼Œæœ€ç»ˆç”¨æˆ·å°†æ”¶åˆ°å‹å¥½çš„å“åº”ã€‚</p><p>å¼€ç®±å³ç”¨ï¼Œæ­¤æ“ä½œç”±å†…ç½®çš„å…¨å±€å¼‚å¸¸è¿‡æ»¤å™¨æ‰§è¡Œï¼Œè¯¥è¿‡æ»¤å™¨å¤„ç†ç±»å‹ <code>HttpException</code>ï¼ˆåŠå…¶å­ç±»ï¼‰çš„å¼‚å¸¸ã€‚æ¯ä¸ªå‘ç”Ÿçš„å¼‚å¸¸éƒ½ç”±å…¨å±€å¼‚å¸¸è¿‡æ»¤å™¨å¤„ç†, å½“è¿™ä¸ªå¼‚å¸¸<strong>æ— æ³•è¢«è¯†åˆ«</strong>æ—¶ (æ—¢ä¸æ˜¯ <code>HttpException</code> ä¹Ÿä¸æ˜¯ç»§æ‰¿çš„ç±» <code>HttpException</code> ) , ç”¨æˆ·å°†æ”¶åˆ°ä»¥ä¸‹ <code>JSON</code> å“åº”:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;statusCode&quot;</span>: <span class="number">500</span>,</span><br><span class="line">    <span class="attr">&quot;message&quot;</span>: <span class="string">&quot;Internal server error&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>é€šè¿‡æœ¬ç¯‡çš„ä»‹ç»ï¼Œå¤§å®¶åº”è¯¥æœ‰å¦‚ä¸‹çš„æ„Ÿå—ï¼š</p><ul><li><code>nest</code>å¤§é‡ä½¿ç”¨äº†æ³¨è§£æ¥ç®€åŒ–é€»è¾‘</li><li><code>nest</code>çš„ç¨‹åºè®¾è®¡ï¼ˆæ¶æ„ï¼‰å¾ˆä¸°å¯Œï¼Œè§£è€¦&amp;æ˜“ç”¨ã€‚è§£è€¦ä¸ç”¨è¯´ï¼Œä»ä¸Šé¢çš„åˆ†å±‚å°±èƒ½çœ‹å‡ºæ¥ï¼›æ˜“ç”¨ï¼Œä¸»è¦ä½“ç°åœ¨è¯­ä¹‰åŒ–å…³é”®è¯ã€å¼ºå¤§çš„CLIå‘½ä»¤ã€‚</li></ul><p>æ ¸å¿ƒçš„æ¦‚å¿µï¼šæ¨¡å— -&gt; æ§åˆ¶å™¨ -&gt; æœåŠ¡ã€ç®¡é“ã€å®ˆå«ã€æ‹¦æˆªå™¨ -&gt; ä¸­é—´ä»¶ -&gt; å¼‚å¸¸è¿‡æ»¤å™¨ã€‚</p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p>æ¨èä¸€äº›éå®˜æ–¹çš„ï¼Œç”¨äºå»ç†è§£â€œä¾èµ–æ³¨å…¥â€çš„èµ„æ–™ï¼š</p><ul><li><a href="https://zhuanlan.zhihu.com/p/113299696">è¯¦è§£Angularä¾èµ–æ³¨å…¥</a>ï¼šå›½äººå†™çš„æ¡ˆä¾‹ï¼Œè¿˜æ¯”è¾ƒæœ‰æ„æ€ï¼Œè§£é‡Šçš„æ¯”è¾ƒæ¸…æ¥šçš„äº†ï¼Œæœ¬ç¯‡å¼•ç”¨äº†éƒ¨åˆ†å†…å®¹</li><li><a href="https://angular.cn/guide/architecture-services#dependency-injection-di">Angular - æœåŠ¡ä¸ä¾èµ–æ³¨å…¥ç®€ä»‹</a>ï¼šè¿™ä¸ªæ˜¯Angularçš„å®˜æ–¹è§£è¯»ï¼Œä¹Ÿæœ‰é…å›¾ï¼Œæˆ‘æ„Ÿè§‰è¿˜æ˜¯æ¯”è¾ƒå®¹æ˜“ææ¸…æ¥šçš„</li><li><a href="https://www.tutorialsteacher.com/ioc/dependency-injection">Dependency Injection</a>ï¼šè™½ç„¶æ˜¯è‹±æ–‡ï¼Œä½†æ˜¯éå¸¸æ¨èå»è¯»ä¸€è¯»</li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;è¿™æ˜¯ã€Šnestjsæ­å»ºé€šç”¨ä¸šåŠ¡æ¡†æ¶ã€‹ç³»åˆ—çš„ç¬¬3ç¯‡ï¼Œä¸»è¦æ˜¯ä»‹ç»nestjsä¸­çš„æ ¸å¿ƒæ¦‚å¿µï¼Œç†è§£è¿™äº›æ¦‚å¿µä¸ä½¿ç”¨æ–¹æ³•æ˜¯ä»Šåå­¦ä¹ ä¸Šçš„å«è„šçŸ³ã€‚PS: å¯¹äºæœ¬ç¯‡çš„å­¦ä¹ ï¼Œä½ éœ€è¦æœ‰ä¸€å®šçš„TSçš„åŸºç¡€ï¼Œç†è§£èµ·æ¥æ‰ä¼šæ¯”è¾ƒé¡ºç•…ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="nestjsæ­å»ºé€šç”¨ä¸šåŠ¡æ¡†æ¶" scheme="https://www.toimc.com/categories/nestjs%E6%90%AD%E5%BB%BA%E9%80%9A%E7%94%A8%E4%B8%9A%E5%8A%A1%E6%A1%86%E6%9E%B6/"/>
    
    
    <category term="node.js" scheme="https://www.toimc.com/tags/node-js/"/>
    
    <category term="nestjs" scheme="https://www.toimc.com/tags/nestjs/"/>
    
    <category term="webæ¡†æ¶" scheme="https://www.toimc.com/tags/web%E6%A1%86%E6%9E%B6/"/>
    
  </entry>
  
  <entry>
    <title>nestjsæ­å»ºé€šç”¨ä¸šåŠ¡æ¡†æ¶ï¼ˆ2ï¼‰ï¼šåˆä½“éªŒ</title>
    <link href="https://www.toimc.com/nestjs-example-project-2/"/>
    <id>https://www.toimc.com/nestjs-example-project-2/</id>
    <published>2021-03-09T13:14:10.000Z</published>
    <updated>2021-03-12T03:40:49.702Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©æ˜¯ã€Šnestjsæ­å»ºé€šç”¨ä¸šåŠ¡æ¡†æ¶ã€‹ç³»åˆ—çš„ç¬¬2ç¯‡ï¼Œä¸»è¦æ˜¯ä»‹ç»å¦‚ä½•ä½¿ç”¨nestjsçš„CLIå·¥å…·å¿«é€Ÿåˆå§‹åŒ–é¡¹ç›®ï¼Œäº†è§£é¡¹ç›®çš„å¯åŠ¨ä¸è°ƒè¯•ã€‚PS: è°ƒè¯•æŠ€å·§éå¸¸çš„é‡è¦ï¼Œæœ‰åˆ©äºåç»­å­¦ä¹ æ¡†æ¶çš„æ ¸å¿ƒçš„åŸç†ã€‚</p><span id="more"></span><h2 id="nodeç¯å¢ƒå‡†å¤‡"><a href="#nodeç¯å¢ƒå‡†å¤‡" class="headerlink" title="nodeç¯å¢ƒå‡†å¤‡"></a>nodeç¯å¢ƒå‡†å¤‡</h2><p>nodeä¸npmçš„ç‰ˆæœ¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">âœ node -v</span><br><span class="line">nv14.15.1</span><br><span class="line">~</span><br><span class="line">âœ npm -v</span><br><span class="line">6.14.8</span><br></pre></td></tr></table></figure><p>å¤§å®¶ä½¿ç”¨nodeå®˜æ–¹çš„LTSçš„ç‰ˆæœ¬å³å¯ï¼Œ<a href="https://nodejs.org/zh-cn/download/">ä¸‹è½½åœ°å€</a></p><blockquote><p>å®‰è£…å¯ä»¥ä½¿ç”¨<code>nrm</code>æˆ–è€…<code>npm config set registry https://registry.npm.taobao.org/</code>æ¥è¿›è¡ŒåŠ é€Ÿ</p></blockquote><h2 id="å®‰è£…CLI"><a href="#å®‰è£…CLI" class="headerlink" title="å®‰è£…CLI"></a>å®‰è£…CLI</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span> å…¨å±€å®‰è£…cliå·¥å…·</span><br><span class="line">âœ npm i -g @nestjs/cli</span><br><span class="line"><span class="regexp">/Users/m</span>acos<span class="regexp">/.nvm/</span>versions<span class="regexp">/node/</span>v14.<span class="number">15.1</span><span class="regexp">/bin/</span>nest -&gt; <span class="regexp">/Users/m</span>acos<span class="regexp">/.nvm/</span>versions<span class="regexp">/node/</span>v14.<span class="number">15.1</span><span class="regexp">/lib/</span>node_modules<span class="regexp">/@nestjs/</span>cli<span class="regexp">/bin/</span>nest.js</span><br><span class="line">+ @nestjs/cli@<span class="number">7.5</span>.<span class="number">6</span></span><br><span class="line">added <span class="number">15</span> packages from <span class="number">4</span> contributors, removed <span class="number">1080</span> packages and updated <span class="number">262</span> packages <span class="keyword">in</span> <span class="number">12.239</span>s</span><br></pre></td></tr></table></figure><p>åˆå§‹åŒ–é¡¹ç›®<code>nest new [project-name]</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">~/Projects/nestjs</span><br><span class="line">âœ nest new nestjs-common-template</span><br><span class="line">âš¡  We will scaffold your app <span class="keyword">in</span> a few seconds..</span><br><span class="line"></span><br><span class="line">CREATE nestjs-common-template/.eslintrc.js (631 bytes)</span><br><span class="line">CREATE nestjs-common-template/.prettierrc (51 bytes)</span><br><span class="line">CREATE nestjs-common-template/README.md (3339 bytes)</span><br><span class="line">CREATE nestjs-common-template/nest-cli.json (64 bytes)</span><br><span class="line">CREATE nestjs-common-template/package.json (1984 bytes)</span><br><span class="line">CREATE nestjs-common-template/tsconfig.build.json (97 bytes)</span><br><span class="line">CREATE nestjs-common-template/tsconfig.json (339 bytes)</span><br><span class="line">CREATE nestjs-common-template/src/app.controller.spec.ts (617 bytes)</span><br><span class="line">CREATE nestjs-common-template/src/app.controller.ts (274 bytes)</span><br><span class="line">CREATE nestjs-common-template/src/app.module.ts (249 bytes)</span><br><span class="line">CREATE nestjs-common-template/src/app.service.ts (142 bytes)</span><br><span class="line">CREATE nestjs-common-template/src/main.ts (208 bytes)</span><br><span class="line">CREATE nestjs-common-template/<span class="built_in">test</span>/app.e2e-spec.ts (630 bytes)</span><br><span class="line">CREATE nestjs-common-template/<span class="built_in">test</span>/jest-e2e.json (183 bytes)</span><br><span class="line"></span><br><span class="line">? Which package manager would you â¤ï¸  to use? (Use arrow keys)</span><br><span class="line">â¯ npm</span><br><span class="line">  yarn</span><br><span class="line">  </span><br><span class="line">â–¹â–¹â–¹â–¹â–¸ Installation <span class="keyword">in</span> progress... â˜•</span><br><span class="line">ğŸš€  Successfully created project nestjs-common-template</span><br><span class="line">ğŸ‘‰  Get started with the following commands:</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">cd</span> nestjs-common-template</span><br><span class="line">$ npm run start</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                          Thanks <span class="keyword">for</span> installing Nest ğŸ™</span><br><span class="line">                 Please consider donating to our open collective</span><br><span class="line">                        to <span class="built_in">help</span> us maintain this package.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">               ğŸ·  Donate: https://opencollective.com/nest</span><br></pre></td></tr></table></figure><p>è¿è¡Œé¡¹ç›®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">~/Projects/nestjs took 22s 385ms</span><br><span class="line">âœ <span class="built_in">cd</span> nestjs-common-template/</span><br><span class="line">nestjs-common-template on î‚  HEAD [?] is ğŸ“¦ v0.0.1 via â¬¢ v14.15.1</span><br><span class="line">âœ npm run start</span><br><span class="line"></span><br><span class="line">&gt; nestjs-common-template@0.0.1 start /Users/macos/Projects/nestjs/nestjs-common-template</span><br><span class="line">&gt; nest start</span><br><span class="line"></span><br><span class="line">[Nest] 5918   - 2021/03/09 ä¸‹åˆ11:06:10   [NestFactory] Starting Nest application...</span><br><span class="line">[Nest] 5918   - 2021/03/09 ä¸‹åˆ11:06:10   [InstanceLoader] AppModule dependencies initialized +47ms</span><br><span class="line">[Nest] 5918   - 2021/03/09 ä¸‹åˆ11:06:10   [RoutesResolver] AppController &#123;&#125;: +4ms</span><br><span class="line">[Nest] 5918   - 2021/03/09 ä¸‹åˆ11:06:10   [RouterExplorer] Mapped &#123;, GET&#125; route +2ms</span><br><span class="line">[Nest] 5918   - 2021/03/09 ä¸‹åˆ11:06:10   [NestApplication] Nest application successfully started +1ms</span><br></pre></td></tr></table></figure><p>ä¸‹é¢å¯ä»¥æ‰“å¼€æµè§ˆå™¨æ¥è®¿é—®<code>http://localhost:3000</code>å¯ä»¥çœ‹åˆ°<code>hello world</code>çš„å­—æ ·ã€‚</p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello World!</span><br></pre></td></tr></table></figure><p>è¯´æ˜æˆ‘ä»¬çš„é¡¹ç›®å¯åŠ¨æˆåŠŸäº†ã€‚</p><h2 id="é¡¹ç›®ç›®å½•ä¸package-json"><a href="#é¡¹ç›®ç›®å½•ä¸package-json" class="headerlink" title="é¡¹ç›®ç›®å½•ä¸package.json"></a>é¡¹ç›®ç›®å½•ä¸<code>package.json</code></h2><p>å…ˆæ¥çœ‹çœ‹é¡¹ç›®çš„å·¥ç¨‹ç›®å½•ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ dist                       <span class="comment">// æ‰“åŒ…è¿‡åï¼Œç›®æ ‡ä»£ç </span></span><br><span class="line">â”‚   â”œâ”€â”€ app<span class="selector-class">.controller</span><span class="selector-class">.d</span>.ts</span><br><span class="line">â”‚   â”œâ”€â”€ app<span class="selector-class">.controller</span>.js</span><br><span class="line">â”‚   â”œâ”€â”€ app<span class="selector-class">.controller</span><span class="selector-class">.js</span>.map</span><br><span class="line">â”‚   â”œâ”€â”€ app<span class="selector-class">.module</span><span class="selector-class">.d</span>.ts</span><br><span class="line">â”‚   â”œâ”€â”€ app<span class="selector-class">.module</span>.js</span><br><span class="line">â”‚   â”œâ”€â”€ app<span class="selector-class">.module</span><span class="selector-class">.js</span>.map</span><br><span class="line">â”‚   â”œâ”€â”€ app<span class="selector-class">.service</span><span class="selector-class">.d</span>.ts</span><br><span class="line">â”‚   â”œâ”€â”€ app<span class="selector-class">.service</span>.js</span><br><span class="line">â”‚   â”œâ”€â”€ app<span class="selector-class">.service</span><span class="selector-class">.js</span>.map</span><br><span class="line">â”‚   â”œâ”€â”€ <span class="selector-tag">main</span><span class="selector-class">.d</span>.ts</span><br><span class="line">â”‚   â”œâ”€â”€ <span class="selector-tag">main</span>.js</span><br><span class="line">â”‚   â”œâ”€â”€ <span class="selector-tag">main</span><span class="selector-class">.js</span>.map</span><br><span class="line">â”‚   â””â”€â”€ tsconfig<span class="selector-class">.build</span>.tsbuildinfo</span><br><span class="line">â”œâ”€â”€ nest-cli<span class="selector-class">.json</span>              <span class="comment">// clié…ç½®æ–‡ä»¶</span></span><br><span class="line">â”œâ”€â”€ package-lock.json</span><br><span class="line">â”œâ”€â”€ package<span class="selector-class">.json</span>               <span class="comment">// npmé¡¹ç›®é…ç½®</span></span><br><span class="line">â”œâ”€â”€ <span class="attribute">src</span>                        // æºæ–‡ä»¶</span><br><span class="line">â”‚   â”œâ”€â”€ app<span class="selector-class">.controller</span><span class="selector-class">.spec</span><span class="selector-class">.ts</span> <span class="comment">// æµ‹è¯•æ–‡ä»¶</span></span><br><span class="line">â”‚   â”œâ”€â”€ app<span class="selector-class">.controller</span><span class="selector-class">.ts</span>      <span class="comment">// é¡¹ç›®æ ¹æ§åˆ¶å™¨</span></span><br><span class="line">â”‚   â”œâ”€â”€ app<span class="selector-class">.module</span><span class="selector-class">.ts</span>          <span class="comment">// é¡¹ç›®æ ¹æ¨¡å—</span></span><br><span class="line">â”‚   â”œâ”€â”€ app<span class="selector-class">.service</span><span class="selector-class">.ts</span>         <span class="comment">// é¡¹ç›®æ ¹æœåŠ¡</span></span><br><span class="line">â”‚   â””â”€â”€ <span class="selector-tag">main</span><span class="selector-class">.ts</span>                <span class="comment">// ä¸»å…¥å£æ–‡ä»¶</span></span><br><span class="line">â”œâ”€â”€ test                       <span class="comment">// æµ‹è¯•é…ç½®æ–‡ä»¶ + æµ‹è¯•æ–‡ä»¶</span></span><br><span class="line">â”‚   â”œâ”€â”€ app<span class="selector-class">.e2e-spec</span>.ts</span><br><span class="line">â”‚   â””â”€â”€ jest-e2e.json</span><br><span class="line">â”œâ”€â”€ tsconfig<span class="selector-class">.build</span><span class="selector-class">.json</span>        <span class="comment">// tsæ‰“åŒ…é…ç½®</span></span><br><span class="line">â””â”€â”€ tsconfig<span class="selector-class">.json</span>              <span class="comment">// tsé…ç½®</span></span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬å†æ¥çœ‹çœ‹<code>package.json</code>ï¼Œå…¶ä¸­æœ‰ä¸¤ä¸ªéƒ¨åˆ†éå¸¸éœ€è¦æ³¨æ„ï¼š</p><ul><li>scriptsè‡ªå®šä¹‰çš„è„šæœ¬ï¼š<ul><li><code>start</code>: é»˜è®¤å¯åŠ¨è„šæœ¬</li><li><code>start:dev</code>: å¼€å¯ä»£ç å˜åŒ–ç›‘è§†çš„å¯åŠ¨è„šæœ¬</li><li><code>start:debug</code>ï¼šå¼€å¯ä»£ç debugè°ƒè¯•çš„å¯åŠ¨è„šæœ¬</li><li><code>start:prod</code>ï¼šè¿è¡Œæœ€ç»ˆæ‰“åŒ…è¿‡åçš„ä»£ç </li></ul></li><li>jesté…ç½®</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;prebuild&quot;</span>: <span class="string">&quot;rimraf dist&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;build&quot;</span>: <span class="string">&quot;nest build&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;format&quot;</span>: <span class="string">&quot;prettier --write \&quot;src/**/*.ts\&quot; \&quot;test/**/*.ts\&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;start&quot;</span>: <span class="string">&quot;nest start&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;start:dev&quot;</span>: <span class="string">&quot;nest start --watch&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;start:debug&quot;</span>: <span class="string">&quot;nest start --debug --watch&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;start:prod&quot;</span>: <span class="string">&quot;node dist/main&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;lint&quot;</span>: <span class="string">&quot;eslint \&quot;&#123;src,apps,libs,test&#125;/**/*.ts\&quot; --fix&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;test&quot;</span>: <span class="string">&quot;jest&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;test:watch&quot;</span>: <span class="string">&quot;jest --watch&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;test:cov&quot;</span>: <span class="string">&quot;jest --coverage&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;test:debug&quot;</span>: <span class="string">&quot;node --inspect-brk -r tsconfig-paths/register -r ts-node/register node_modules/.bin/jest --runInBand&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;test:e2e&quot;</span>: <span class="string">&quot;jest --config ./test/jest-e2e.json&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ....</span></span><br><span class="line">  <span class="attr">&quot;jest&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;moduleFileExtensions&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;js&quot;</span>,</span><br><span class="line">      <span class="string">&quot;json&quot;</span>,</span><br><span class="line">      <span class="string">&quot;ts&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;rootDir&quot;</span>: <span class="string">&quot;src&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;testRegex&quot;</span>: <span class="string">&quot;.*\\.spec\\.ts$&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;transform&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;^.+\\.(t|j)s$&quot;</span>: <span class="string">&quot;ts-jest&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;collectCoverageFrom&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;**/*.(t|j)s&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;coverageDirectory&quot;</span>: <span class="string">&quot;../coverage&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;testEnvironment&quot;</span>: <span class="string">&quot;node&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸»ç¨‹åºæ–‡ä»¶ï¼ˆå…¥å£æ–‡ä»¶ï¼‰main-ts"><a href="#ä¸»ç¨‹åºæ–‡ä»¶ï¼ˆå…¥å£æ–‡ä»¶ï¼‰main-ts" class="headerlink" title="ä¸»ç¨‹åºæ–‡ä»¶ï¼ˆå…¥å£æ–‡ä»¶ï¼‰main.ts"></a>ä¸»ç¨‹åºæ–‡ä»¶ï¼ˆå…¥å£æ–‡ä»¶ï¼‰<code>main.ts</code></h2><p>åœ¨é¡¹ç›®çš„<code>src</code>ç›®å½•ä¸­ï¼Œæœ‰æ•´ä¸ªé¡¹ç›®çš„ä¸»ç¨‹åºæ–‡ä»¶<code>main.ts</code>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import &#123; NestFactory &#125; from &#39;@nestjs&#x2F;core&#39;;</span><br><span class="line">import &#123; AppModule &#125; from &#39;.&#x2F;app.module&#39;;</span><br><span class="line"></span><br><span class="line">async function bootstrap() &#123;</span><br><span class="line">  const app &#x3D; await NestFactory.create(AppModule);</span><br><span class="line">  await app.listen(3000);</span><br><span class="line">&#125;</span><br><span class="line">bootstrap();</span><br></pre></td></tr></table></figure><p>è¿™ä¸»ç¨‹åºæ–‡ä»¶ä¸­ï¼š</p><ul><li>ä½¿ç”¨<code>NestFactory</code>åˆå§‹åŒ–äº†ä¸€ä¸ªNestå®ä¾‹<code>app</code></li><li>å®šä¹‰æœåŠ¡ç›‘å¬<code>3000</code>ç«¯å£</li><li>ä½¿ç”¨<code>bootstrap()</code>å¯åŠ¨äº†è¯¥æœåŠ¡</li></ul><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¯¥æ–‡ä»¶å¼•å…¥äº†ä¸€ä¸ª<code>æ¨¡å—</code>å³<code>./app.module</code>ï¼Œå¯ä»¥ä»è¿™ä¸ªæ–‡ä»¶æ‰¾åˆ°ä¸€äº›æ•´ä¸ªåº”ç”¨çš„è››ä¸é©¬è¿¹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Module &#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/common&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; AppController &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.controller&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; AppService &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.service&#x27;</span>;</span><br><span class="line"></span><br><span class="line">@Module(&#123;</span><br><span class="line">  imports: [],</span><br><span class="line">  controllers: [AppController],</span><br><span class="line">  providers: [AppService],</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppModule</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œä½¿ç”¨åˆ°äº†<code>TypeScript</code>ä¸­çš„<code>Decorator</code>ï¼Œå¼•å…¥äº†ä¸€ä¸ª<code>AppService</code>å’Œ<code>AppController</code>ï¼Œå¦‚æœç†Ÿæ‚‰Angularçš„å°ä¼™ä¼´ï¼Œçœ‹åˆ°è¿™é‡Œå°±æƒŠè®¶äº†ã€‚å§æ§½ï¼Œè¿™ä¸æ˜¯Augularå—ï¼Ÿæ˜¯çš„ï¼Œå®˜æ–¹ç»™å‡ºäº†å¦‚ä¸‹çš„è§£é‡Šï¼š</p><blockquote><p>Nest provides an out-of-the-box application architecture which allows developers and teams to create highly testable, scalable, loosely coupled, and easily maintainable applications. <strong>The architecture is heavily inspired by Angular.</strong></p></blockquote><p>è¿™æ˜¯<code>nestjs</code>çš„å“²å­¦ï¼š</p><blockquote><p>Nestæä¾›äº†ä¸€ä¸ªå¼€ç®±å³ç”¨çš„åº”ç”¨æ¶æ„ï¼Œå…è®¸å¼€å‘äººå‘˜å’Œå›¢é˜Ÿåˆ›å»ºé«˜åº¦å¯æµ‹è¯•ã€å¯æ‰©å±•ã€æ¾æ•£è€¦åˆå’Œæ˜“äºç»´æŠ¤çš„åº”ç”¨ã€‚<strong>è¯¥æ¶æ„æ·±å—Angularçš„å¯å‘ã€‚</strong></p></blockquote><p>äº†è§£åˆ°è¿™ä¸€ç‚¹æ¥è¯´ä¹‹åï¼Œæ–¹ä¾¿å­¦ä¹ è¿‡Angularçš„åŒå­¦å¿«é€Ÿçš„å…¥æ‰‹ï¼Œé‚£ä¹ˆå¯¹äºæ²¡æœ‰å­¦è¿‡Angularçš„åŒå­¦ï¼Œå¯ä»¥ä»ä»¥ä¸‹ä¸¤ä¸ªè§’åº¦æ¥æ€è€ƒå­¦ä¹ ã€‚</p><ol><li><p>å¯¹äºæ¯«æ— <code>Angular</code>åŸºç¡€çš„åŒå­¦æ¥è¯´ï¼š</p><ul><li>åº”ç”¨æ˜¯åŸºç¡€ï¼šå…ˆå­¦ä¼šå¦‚ä½•ä½¿ç”¨ï¼Œå†™ä¸€äº›åŸºç¡€çš„æ¥å£ï¼Œç„¶åå†å»æ€è€ƒå†…åœ¨çš„é€»è¾‘ï¼Œå…å¾—ææ··äº†ï¼›</li><li>å­¦ä¹ å…ˆè¿›æ¡†æ¶çš„æ¦‚å¿µï¼šå®˜æ–¹æœ‰ä¸€æ‰‹çš„ä»‹ç»ï¼Œæ‰€ä»¥ä¸€ç‚¹ä¸ç”¨æ…Œï¼Œè€Œä¸”è¿™äº›æ¦‚å¿µæºäºGoogleï¼Œéƒ½æ˜¯ç»è¿‡äº†éªŒè¯çš„ï¼›</li><li>å¹³æ—¶å¼€å‘å¤šé—®å‡ ä¸ªä¸ºä»€ä¹ˆï¼šæ¯”å¦‚ï¼Œä¸ºä»€ä¹ˆnestjsçš„å…¥å£æ˜¯<code>main.ts</code>ï¼Ÿ<code>nestjs</code>æ˜¯ç”¨ä»€ä¹ˆæ‰“åŒ…çš„ï¼Ÿæ€ä¹ˆæ²¡æœ‰çœ‹åˆ°webpackçš„é…ç½®ï¼Ÿ</li></ul></li><li><p>å¯¹äºå­¦è¿‡<code>Angular</code>çš„åŒå­¦æ¥è¯´ï¼š</p><ul><li>å¤§è‡´æµè§ˆåŸºç¡€ç¤ºä¾‹ä»£ç ï¼šåœ¨æ¸…æ¥šæ ¸å¿ƒçš„æ¦‚å¿µä¹‹åï¼Œè¿™æ ·æœ‰åˆ©äºå¿«é€Ÿå…¥æ‰‹ï¼›</li><li>åšä¸€äº›å®æˆ˜é¡¹ç›®ï¼šå·¥å…·çš„å­¦ä¹ ä¸èƒ½æµ®äºè¡¨é¢ï¼Œä¸€å®šè¦åº”ç”¨äºè‡ªå·±çš„å·¥ä½œä¸­æ¥ï¼Œå¯¹äºå°é¡¹ç›®ï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹çš„<a href="https://docs.nestjs.cn/7/awesome">awesomeç¤ºä¾‹é¡µ</a>ï¼›</li></ul></li></ol><p>ä¸‹é¢æ¥å›ç­”å‡ ä¸ªé—®é¢˜ï¼š</p><h3 id="ä¸ºä»€ä¹ˆnestjsçš„å…¥å£æ˜¯main-tsï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆnestjsçš„å…¥å£æ˜¯main-tsï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆnestjsçš„å…¥å£æ˜¯main.tsï¼Ÿ"></a>ä¸ºä»€ä¹ˆnestjsçš„å…¥å£æ˜¯<code>main.ts</code>ï¼Ÿ</h3><p>ä¸‹é¢æ˜¯æˆ‘ä¸ªäººçš„æ€è€ƒè·¯å¾„ï¼š</p><ul><li>package.jsonä¸­çš„mainå±æ€§ï¼Œæœ‰æ²¡æœ‰ï¼Ÿâ€”â€”æ²¡æœ‰</li><li>å®˜æ–¹çš„é…ç½®æ–‡ä»¶ä¸­<code>nest-cli.json</code>ï¼Œæœ‰æ²¡æœ‰ï¼Ÿâ€”â€”æ²¡æœ‰</li><li>scriptsä¸­çš„è¿è¡Œè„šæœ¬ï¼Œæœ‰æ²¡æœ‰ï¼Ÿâ€”â€”æœ‰ï¼Œä½†æ˜¯æ²¡æœ‰æŒ‡æ˜ï¼Œåªæœ‰<code>nest start</code></li><li>è¿è¡Œè„šæœ¬ä½¿ç”¨çš„CLIï¼ŒCLIçš„åŸæ–‡ä»¶ä¸­ï¼Œæœ‰æ²¡æœ‰ï¼Ÿâ€”â€”è¿™é‡Œï¼Œå°±éœ€è¦è°ƒè¯•<code>node_modules</code>äº†</li></ul><p>æŒ‰ç…§ä¸Šé¢çš„è·¯å¾„ï¼Œå¯ä»¥è‡ªå·±å»ºä¸€ä¸ªNodejsçš„è°ƒè¯•é¡¹ç›®è¿›è¡Œè¿è¡Œä¸è°ƒè¯•ï¼å®˜æ–¹æä¾›äº†<code>--debug</code>è„šæœ¬ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥æ¥åˆ›å»ºï¼Œä»¥<code>VSCode</code>ä¸ºä¾‹ï¼šåˆ›å»º<code>.vscode/launch.json</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">// ä½¿ç”¨ IntelliSense äº†è§£ç›¸å…³å±æ€§ã€‚ </span></span><br><span class="line">  <span class="comment">// æ‚¬åœä»¥æŸ¥çœ‹ç°æœ‰å±æ€§çš„æè¿°ã€‚</span></span><br><span class="line">  <span class="comment">// æ¬²äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—®: https://go.microsoft.com/fwlink/?linkid=830387</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;0.2.0&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;configurations&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Launch via NPM&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;request&quot;</span>: <span class="string">&quot;launch&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;runtimeArgs&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;run-script&quot;</span>,</span><br><span class="line">        <span class="string">&quot;start:debug&quot;</span></span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">&quot;runtimeExecutable&quot;</span>: <span class="string">&quot;npm&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;skipFiles&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;&lt;node_internals&gt;/**&quot;</span></span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;pwa-node&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç›´æ¥ä½¿ç”¨<code>VSCode</code>çš„è°ƒè¯•å·¥å…·è¿›è¡Œè°ƒè¯•ï¼Œè¿™æ—¶å€™ï¼Œæ–°çš„é—®é¢˜æ¥äº†ï¼Œæ–­ç‚¹æ‰“åœ¨å“ªé‡Œï¼Ÿï¼å­¦ä¹ è¿‡æˆ‘ä»¬<a href="https://class.imooc.com/sale/webfullstack">æ…•è¯¾ç½‘ã€Šå¤§å‰ç«¯ã€‹</a>çš„åŒå­¦åº”è¯¥äº†è§£åˆ°CLIå·¥å…·çš„å·¥ä½œåŸç†ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªç»„æˆéƒ¨åˆ†ï¼š</p><ul><li>Commander â€”â€” å¤„ç†ä¼ é€’çš„å‚æ•°</li><li>Action â€”â€” å…·ä½“çš„å‡½æ•°</li></ul><p>ä¸‹é¢æ‰“å¼€<code>node_modules</code>ï¼Œæ‰¾åˆ°<code>@nestjs/cli</code>æ˜ å…¥æˆ‘ä»¬çœ¼å¸˜çš„æ˜¯ï¼š</p><img class="lazyload" width="300" src="https://static.www.toimc.com/blog/img/2021/nestjs-example-project-2/nestjs-1.jpg?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/200"><p>è¿™ä¸å·§äº†ï¼Ÿæ€ä¹ˆæœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼Œå¾ˆæ‰“çœ¼å‘¢ï¼Ÿ<code>commands</code>ä¸<code>actions</code>ï¼Œæˆ‘ä»¬æ¥æŸ¥çœ‹ä¸€ä¸‹ï¼š</p><p>ç¬¬ä¸€ä¸ªï¼š</p><img class="lazyload" width="300" src="https://static.www.toimc.com/blog/img/2021/nestjs-example-project-2/nestjs-2.jpg?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/200"><p>ç¬¬äºŒä¸ªï¼š</p><img class="lazyload" width="300" src="https://static.www.toimc.com/blog/img/2021/nestjs-example-project-2/nestjs-3.jpg?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/200"><p>åˆ†åˆ«ç‚¹å¼€ï¼š</p><ul><li><p><code>start.command.js</code>ä¸­ä¸»è¦æ˜¯è§£æå‘½ä»¤å‚æ•°ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªå…³é”®æ–¹æ³•ï¼š<code>this.action.handle(inputs, options)</code></p></li><li><p>æœ€ç»ˆä¼šæ¥æ‰§è¡Œ<code>start.action.js</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">handle</span>(<span class="params">inputs, options</span>)</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> __awaiter(<span class="built_in">this</span>, <span class="keyword">void</span> <span class="number">0</span>, <span class="keyword">void</span> <span class="number">0</span>, <span class="function"><span class="keyword">function</span>* (<span class="params"></span>) </span>&#123;</span><br><span class="line">           <span class="keyword">try</span> &#123;</span><br><span class="line">               <span class="keyword">const</span> configFileName = options.find(<span class="function">(<span class="params">option</span>) =&gt;</span> option.name === <span class="string">&#x27;config&#x27;</span>)</span><br><span class="line">                   .value;</span><br><span class="line">               <span class="keyword">const</span> configuration = <span class="keyword">yield</span> <span class="built_in">this</span>.loader.load(configFileName);</span><br><span class="line">               <span class="keyword">const</span> appName = inputs.find(<span class="function">(<span class="params">input</span>) =&gt;</span> input.name === <span class="string">&#x27;app&#x27;</span>)</span><br><span class="line">                   .value;</span><br><span class="line">               <span class="keyword">const</span> pathToTsconfig = get_value_or_default_1.getValueOrDefault(configuration, <span class="string">&#x27;compilerOptions.tsConfigPath&#x27;</span>, appName, <span class="string">&#x27;path&#x27;</span>, options);</span><br><span class="line">               <span class="keyword">const</span> binaryToRunOption = options.find(<span class="function">(<span class="params">option</span>) =&gt;</span> option.name === <span class="string">&#x27;exec&#x27;</span>);</span><br><span class="line">               <span class="keyword">const</span> debugModeOption = options.find(<span class="function">(<span class="params">option</span>) =&gt;</span> option.name === <span class="string">&#x27;debug&#x27;</span>);</span><br><span class="line">               <span class="keyword">const</span> watchModeOption = options.find(<span class="function">(<span class="params">option</span>) =&gt;</span> option.name === <span class="string">&#x27;watch&#x27;</span>);</span><br><span class="line">               <span class="keyword">const</span> isWatchEnabled = !!(watchModeOption &amp;&amp; watchModeOption.value);</span><br><span class="line">               <span class="keyword">const</span> watchAssetsModeOption = options.find(<span class="function">(<span class="params">option</span>) =&gt;</span> option.name === <span class="string">&#x27;watchAssets&#x27;</span>);</span><br><span class="line">               <span class="keyword">const</span> isWatchAssetsEnabled = !!(watchAssetsModeOption &amp;&amp; watchAssetsModeOption.value);</span><br><span class="line">               <span class="keyword">const</span> debugFlag = debugModeOption &amp;&amp; debugModeOption.value;</span><br><span class="line">               <span class="keyword">const</span> binaryToRun = binaryToRunOption &amp;&amp; binaryToRunOption.value;</span><br><span class="line">               <span class="keyword">const</span> &#123; <span class="attr">options</span>: tsOptions &#125; = <span class="built_in">this</span>.tsConfigProvider.getByConfigFilename(pathToTsconfig);</span><br><span class="line">               <span class="keyword">const</span> outDir = tsOptions.outDir || defaults_1.defaultOutDir;</span><br><span class="line">               <span class="keyword">const</span> onSuccess = <span class="built_in">this</span>.createOnSuccessHook(configuration, appName, debugFlag, outDir, binaryToRun);</span><br><span class="line">               <span class="keyword">yield</span> <span class="built_in">this</span>.runBuild(inputs, options, isWatchEnabled, isWatchAssetsEnabled, !!debugFlag, onSuccess);</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">               <span class="keyword">if</span> (err <span class="keyword">instanceof</span> <span class="built_in">Error</span>) &#123;</span><br><span class="line">                   <span class="built_in">console</span>.log(<span class="string">`\n<span class="subst">$&#123;ui_1.ERROR_PREFIX&#125;</span> <span class="subst">$&#123;err.message&#125;</span>\n`</span>);</span><br><span class="line">               &#125;</span><br><span class="line">               <span class="keyword">else</span> &#123;</span><br><span class="line">                   <span class="built_in">console</span>.error(<span class="string">`\n<span class="subst">$&#123;chalk.red(err)&#125;</span>\n`</span>);</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‰“å°ä¸€ä¸ª<code>configuration</code>äº†æˆ–è€…åŠ ä¸ªæ–­ç‚¹ï¼Œä½¿ç”¨<code>npm start</code>æ¥è·‘ä¸€ä¸‹ï¼Œå¾—åˆ°çš„ç»“æœæ— éå¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">ğŸš€ ~ file: start.action.js ~ line <span class="number">29</span> ~ StartAction ~ return__awaiter ~ configuration &#123;</span><br><span class="line">  language: <span class="string">&#x27;ts&#x27;</span>,</span><br><span class="line">  sourceRoot: <span class="string">&#x27;src&#x27;</span>,</span><br><span class="line">  collection: <span class="string">&#x27;@nestjs/schematics&#x27;</span>,</span><br><span class="line">  entryFile: <span class="string">&#x27;main&#x27;</span>,</span><br><span class="line">  projects: &#123;&#125;,</span><br><span class="line">  monorepo: <span class="literal">false</span>,</span><br><span class="line">  compilerOptions: &#123;</span><br><span class="line">    tsConfigPath: <span class="string">&#x27;tsconfig.build.json&#x27;</span>,</span><br><span class="line">    webpack: <span class="literal">true</span>,</span><br><span class="line">    webpackConfigPath: <span class="string">&#x27;webpack.config.js&#x27;</span>,</span><br><span class="line">    plugins: [],</span><br><span class="line">    assets: []</span><br><span class="line">  &#125;,</span><br><span class="line">  generateOptions: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å·²ç»è®©æˆ‘ä»¬çœ‹åˆ°äº†<code>entryFile</code>çš„å­—æ ·ï¼Œè‡³æ­¤ï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†å…¥å£æ–‡ä»¶ã€‚è¿˜å¯ä»¥é¡ºè¿™è¿™æ¡æ€è·¯ï¼Œç»§ç»­æ¥æ‰¾ï¼š</p></li></ul><img class="lazyload" src="https://static.www.toimc.com/blog/img/2021/nestjs-example-project-2/nestjs-4.jpg?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/2000"><p>â€‹        ç»§ç»­å¾€ä¸‹æ‰¾ï¼š</p><img class="lazyload" src="https://static.www.toimc.com/blog/img/2021/nestjs-example-project-2/nestjs-5.jpg?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/2000"><h3 id="nestjsæ˜¯ç”¨ä»€ä¹ˆæ‰“åŒ…çš„ï¼Ÿ"><a href="#nestjsæ˜¯ç”¨ä»€ä¹ˆæ‰“åŒ…çš„ï¼Ÿ" class="headerlink" title="nestjsæ˜¯ç”¨ä»€ä¹ˆæ‰“åŒ…çš„ï¼Ÿ"></a><code>nestjs</code>æ˜¯ç”¨ä»€ä¹ˆæ‰“åŒ…çš„ï¼Ÿ</h3><p>æœ‰äº†ä¸Šé¢è°ƒè¯•çš„æŠ€å·§ï¼Œæ¥å›ç­”è¿™ä¸ªé—®é¢˜å˜å¾—å¾ˆç®€å•ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹<code>scripts</code>ä¸­çš„æ‰“åŒ…å‘½ä»¤<code>&quot;build&quot;: &quot;nest build&quot;,</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‰¾åˆ°å¯¹åº”çš„<code>command</code>ï¼Œå¯ä»¥æ‰¾åˆ°è¿™ä¹ˆä¸€ä¸ªæ–‡ä»¶<code>build.action.js</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">runBuild</span>(<span class="params">inputs, options, watchMode, watchAssetsMode, isDebugEnabled = <span class="literal">false</span>, onSuccess</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> __awaiter(<span class="built_in">this</span>, <span class="keyword">void</span> <span class="number">0</span>, <span class="keyword">void</span> <span class="number">0</span>, <span class="function"><span class="keyword">function</span>* (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> configFileName = options.find(<span class="function">(<span class="params">option</span>) =&gt;</span> option.name === <span class="string">&#x27;config&#x27;</span>)</span><br><span class="line">            .value;</span><br><span class="line">        <span class="keyword">const</span> configuration = <span class="keyword">yield</span> <span class="built_in">this</span>.loader.load(configFileName);</span><br><span class="line">        <span class="keyword">const</span> appName = inputs.find(<span class="function">(<span class="params">input</span>) =&gt;</span> input.name === <span class="string">&#x27;app&#x27;</span>)</span><br><span class="line">            .value;</span><br><span class="line">        <span class="keyword">const</span> pathToTsconfig = get_value_or_default_1.getValueOrDefault(configuration, <span class="string">&#x27;compilerOptions.tsConfigPath&#x27;</span>, appName, <span class="string">&#x27;path&#x27;</span>, options);</span><br><span class="line">        <span class="keyword">const</span> &#123; <span class="attr">options</span>: tsOptions &#125; = <span class="built_in">this</span>.tsConfigProvider.getByConfigFilename(pathToTsconfig);</span><br><span class="line">        <span class="keyword">const</span> outDir = tsOptions.outDir || defaults_1.defaultOutDir;</span><br><span class="line">        <span class="keyword">const</span> isWebpackEnabled = get_value_or_default_1.getValueOrDefault(configuration, <span class="string">&#x27;compilerOptions.webpack&#x27;</span>, appName, <span class="string">&#x27;webpack&#x27;</span>, options);</span><br><span class="line">        <span class="keyword">yield</span> <span class="built_in">this</span>.workspaceUtils.deleteOutDirIfEnabled(configuration, appName, outDir);</span><br><span class="line">        <span class="built_in">this</span>.assetsManager.copyAssets(configuration, appName, outDir, watchAssetsMode);</span><br><span class="line">        <span class="keyword">if</span> (isWebpackEnabled) &#123;</span><br><span class="line">            <span class="comment">// ä¸è¿™é‡Œçš„ä¸€è¡Œä»£ç </span></span><br><span class="line">            <span class="keyword">const</span> webpackPath = get_value_or_default_1.getValueOrDefault(configuration, <span class="string">&#x27;compilerOptions.webpackConfigPath&#x27;</span>, appName, <span class="string">&#x27;webpackPath&#x27;</span>, options);</span><br><span class="line">            <span class="keyword">const</span> webpackConfigFactoryOrConfig = <span class="built_in">this</span>.getWebpackConfigFactoryByPath(webpackPath, configuration.compilerOptions.webpackConfigPath);</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.webpackCompiler.run(configuration, webpackConfigFactoryOrConfig, pathToTsconfig, appName, isDebugEnabled, watchMode, <span class="built_in">this</span>.assetsManager, onSuccess);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (watchMode) &#123;</span><br><span class="line">            <span class="keyword">const</span> tsCompilerOptions = &#123;&#125;;</span><br><span class="line">            <span class="keyword">const</span> isPreserveWatchOutputEnabled = options.find(<span class="function">(<span class="params">option</span>) =&gt;</span> option.name === <span class="string">&#x27;preserveWatchOutput&#x27;</span> &amp;&amp; option.value === <span class="literal">true</span>);</span><br><span class="line">            <span class="keyword">if</span> (isPreserveWatchOutputEnabled) &#123;</span><br><span class="line">                tsCompilerOptions.preserveWatchOutput = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">this</span>.watchCompiler.run(configuration, pathToTsconfig, appName, tsCompilerOptions, onSuccess);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// è¿™é‡Œçš„ä¸€è¡Œä»£ç </span></span><br><span class="line">            <span class="built_in">this</span>.compiler.run(configuration, pathToTsconfig, appName, onSuccess);</span><br><span class="line">            <span class="built_in">this</span>.assetsManager.closeWatchers();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç»“è®ºï¼š</strong></p><ul><li>nestjså¯ä»¥å¼€å¯webpackæ‰“åŒ…</li><li>æˆ–è€…è‡ªå·±å®šä¹‰çš„æ‰“åŒ…ï¼Œè§ä¸‹å›¾</li></ul><img class="lazyload" src="https://static.www.toimc.com/blog/img/2021/nestjs-example-project-2/nestjs-7.jpg?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/2000"><h3 id="æ€ä¹ˆæ²¡æœ‰çœ‹åˆ°webpackçš„é…ç½®ï¼Ÿ"><a href="#æ€ä¹ˆæ²¡æœ‰çœ‹åˆ°webpackçš„é…ç½®ï¼Ÿ" class="headerlink" title="æ€ä¹ˆæ²¡æœ‰çœ‹åˆ°webpackçš„é…ç½®ï¼Ÿ"></a>æ€ä¹ˆæ²¡æœ‰çœ‹åˆ°<code>webpack</code>çš„é…ç½®ï¼Ÿ</h3><p><code>nestjs</code>æ”¯æŒ<code>webpack</code>æ‰“åŒ…ï¼Œæœ‰ä¸¤ç§æ–¹æ³•å¯ç”¨<code>webpack</code>ï¼Œç„¶åï¼Œå°±å¯ä»¥åœ¨æ ¹ç›®å½•ä¸­æ·»åŠ <code>webpack.config.js</code>æ–‡ä»¶äº†ã€‚</p><p>å®˜æ–¹çš„è¯´æ˜ï¼š</p><p><strong>æ–¹æ³•ä¸€ï¼š</strong></p><p>é’ˆå¯¹äºå‘½ä»¤ï¼š<a href="https://docs.nestjs.cn/6/cli?id=nest-build">nest build</a></p><p>å°†åº”ç”¨ç¨‹åºæˆ–å·¥ä½œåŒºç¼–è¯‘åˆ°è¾“å‡ºæ–‡ä»¶å¤¹ä¸­ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ nest build &lt;name&gt; [options]Copy to clipboardErrorCopied</span><br></pre></td></tr></table></figure><p>å‚æ•°</p><table><thead><tr><th align="left">å‚æ•°</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left"><code>&lt;name&gt;</code></td><td align="left">è¦æ„å»ºçš„é¡¹ç›®çš„åç§°ã€‚</td></tr></tbody></table><p>é€‰é¡¹ï¼š</p><table><thead><tr><th align="left">é€‰é¡¹</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left"><code>--path [path]</code></td><td align="left"><code>tsconfig</code>æ–‡ä»¶çš„è·¯å¾„ã€‚åˆ«å: <code>-p</code></td></tr><tr><td align="left"><code>--watch</code></td><td align="left">åœ¨ç›‘è§†æ¨¡å¼ä¸‹è¿è¡Œï¼ˆå®æ—¶é‡è½½ï¼‰åˆ«å-w</td></tr><tr><td align="left"><code>--webpack</code></td><td align="left">ä½¿ç”¨ <code>webpack</code> è¿›è¡Œç¼–è¯‘ã€‚</td></tr><tr><td align="left"><code>--webpackPath</code></td><td align="left">é…ç½® <code>webpack</code> çš„è·¯å¾„ã€‚</td></tr></tbody></table><p><strong>æ–¹æ³•äºŒï¼š</strong></p><p>åœ¨æ ¹ç›®å½•ä¸­çš„<code>nest-cli.json</code>æ–‡ä»¶ä¸­é…ç½®<code>compilerOptions</code>ï¼ŒæŠŠ<code>webpack</code>è®¾ç½®æˆ<code>true</code>ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;collection&quot;</span>: <span class="string">&quot;@nestjs/schematics&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;sourceRoot&quot;</span>: <span class="string">&quot;src&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;webpack&quot;</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…³äºnestçš„<code>nest-cli.json</code>é…ç½®æ–‡ä»¶åŠå…¶ä½¿ç”¨æ–¹å¼å¯ä»¥å‚è€ƒ <a href="https://docs.nestjs.cn/7/cli">è¿™é‡Œ</a>ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;ä»Šå¤©æ˜¯ã€Šnestjsæ­å»ºé€šç”¨ä¸šåŠ¡æ¡†æ¶ã€‹ç³»åˆ—çš„ç¬¬2ç¯‡ï¼Œä¸»è¦æ˜¯ä»‹ç»å¦‚ä½•ä½¿ç”¨nestjsçš„CLIå·¥å…·å¿«é€Ÿåˆå§‹åŒ–é¡¹ç›®ï¼Œäº†è§£é¡¹ç›®çš„å¯åŠ¨ä¸è°ƒè¯•ã€‚PS: è°ƒè¯•æŠ€å·§éå¸¸çš„é‡è¦ï¼Œæœ‰åˆ©äºåç»­å­¦ä¹ æ¡†æ¶çš„æ ¸å¿ƒçš„åŸç†ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="nestjsæ­å»ºé€šç”¨ä¸šåŠ¡æ¡†æ¶" scheme="https://www.toimc.com/categories/nestjs%E6%90%AD%E5%BB%BA%E9%80%9A%E7%94%A8%E4%B8%9A%E5%8A%A1%E6%A1%86%E6%9E%B6/"/>
    
    
    <category term="node.js" scheme="https://www.toimc.com/tags/node-js/"/>
    
    <category term="nestjs" scheme="https://www.toimc.com/tags/nestjs/"/>
    
    <category term="webæ¡†æ¶" scheme="https://www.toimc.com/tags/web%E6%A1%86%E6%9E%B6/"/>
    
  </entry>
  
  <entry>
    <title>nestjsæ­å»ºé€šç”¨ä¸šåŠ¡æ¡†æ¶ï¼ˆ1ï¼‰ï¼šåŸºç¡€ä»‹ç»</title>
    <link href="https://www.toimc.com/nestjs-example-project-1/"/>
    <id>https://www.toimc.com/nestjs-example-project-1/</id>
    <published>2021-03-08T13:05:05.000Z</published>
    <updated>2021-03-12T03:40:39.725Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ç½‘ä¸Šçœ‹äº†å¾ˆå¤šå…³äºnestjsçš„æ–‡ç« ï¼Œå‘ç°å¤§å¤šæ•°çš„æ–‡ç« ä¸æˆä½“ç³»ã€‚æ‰€ä»¥ï¼Œæ‰“ç®—ä»åº”ç”¨è§’åº¦ï¼Œå¸¦é¢†å¤§å®¶ä¸€ç‚¹ç‚¹çš„å­¦ä¹ nestjsï¼Œå¹¶æ¶æ„ä¸€å¥—å¯é€šç”¨çš„ä¸šåŠ¡æ¡†æ¶ï¼Œæ–¹ä¾¿å¤§å®¶å…¥é—¨ã€‚</p><span id="more"></span><p>æœ¬ç¯‡æ˜¯nestjsä¸Šæ‰‹çš„åŸºç¡€ç¯‡ï¼Œä¸»è¦ä»ä»¥ä¸‹çš„å‡ ä¸ªè§’åº¦æ¥è°ˆä¸€è°ˆï¼š</p><ul><li>Whatï¼šä»€ä¹ˆæ˜¯nestjs</li><li>Whereï¼šä»€ä¹ˆæ—¶å€™åº”ç”¨nestjsï¼Ÿæˆ–è€…è¯´ï¼Œä»€ä¹ˆåœºæ™¯ä¸‹ç”¨å®ƒ</li><li>Whyï¼šä¸ºä»€ä¹ˆè¦ç”¨nestjsï¼Ÿnestjså¯ä»¥ä¸å“ªäº›æŠ€æœ¯é›†æˆï¼Ÿå®˜æ–¹æä¾›äº†å“ªäº›ç°æˆçš„æ–¹æ¡ˆï¼Ÿ</li><li>Howï¼šæ€ä¹ˆå…¥æ‰‹ï¼ŸåŸºç¡€çš„æ­å»ºä¸å…¥é—¨</li></ul><h2 id="nestjsæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#nestjsæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="nestjsæ˜¯ä»€ä¹ˆï¼Ÿ"></a>nestjsæ˜¯ä»€ä¹ˆï¼Ÿ</h2><h3 id="å®˜æ–¹å®šä¹‰"><a href="#å®˜æ–¹å®šä¹‰" class="headerlink" title="å®˜æ–¹å®šä¹‰"></a>å®˜æ–¹å®šä¹‰</h3><p>ä¸‹é¢æˆ‘ä»¬ç”¨ä¸€å¼ å›¾ç‰‡æ¥å¼•å…¥ï¼Œè¿™æ˜¯<a href="https://nestjs.com/">nestjså®˜ç½‘</a>çš„æˆªå›¾ï¼š</p><img class="lazyload" src="https://static.www.toimc.com/blog/img/2021/nestjs-example-project-1/nestjså®˜ç½‘.jpg?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/300"><p>å…¶ä¸­æœ‰å¯¹nestjsçš„å®šä¹‰ï¼š</p><blockquote><p>Hello, nest!</p><p>A progressive Node.js framework for building efficient, reliable and scalable server-side applications.</p></blockquote><p>ç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼šç”¨äºæ„å»ºé«˜æ•ˆä¸”å¯ä¼¸ç¼©çš„æœåŠ¡ç«¯åº”ç”¨ç¨‹åºçš„æ¸è¿›å¼ Node.js æ¡†æ¶ã€‚</p><p>ä»ä¸Šé¢å®šä¹‰æˆ‘ä»¬å¯ä»¥æ‹†è§£å‡ºæ¥nestjsæ¡†æ¶çš„ä¸€äº›åŸºç¡€çš„ç‰¹æ€§ï¼š</p><ul><li> Node.jsï¼šé¦–å…ˆï¼Œå®ƒåŸºäºNode.jsçš„ç¯å¢ƒï¼Œæ˜¯å¯¹å‰ç«¯å‹å¥½çš„ã€‚å‰ç«¯å·¥ç¨‹å¸ˆæ— éœ€å†ç»§ç»­å­¦ä¹ å…¶ä»–çš„è¯­è¨€ï¼ˆPS: ä¸ä»£è¡¨ä¸éœ€è¦äº†è§£æ¡†æ¶ï¼‰ï¼Œå³å¯ä»¥ä¸Šæ‰‹ï¼›</li><li>æœåŠ¡ç«¯åº”ç”¨ç¨‹åºï¼šnestjsåŸºç¡€çš„åŠŸèƒ½æ˜¯ç”¨äºå¼€å‘æ¥å£ï¼›</li><li>é«˜æ•ˆä¸”å¯ä¼¸ç¼©ï¼šè¿™ä¸€ç‚¹ï¼Œå¯ä»¥çœ‹å‡ºï¼Œnestjsçš„å„ä¸ªåŠŸèƒ½æ¨¡å—ä¹‹é—´çš„æ¶æ„åº”è¯¥æ˜¯è§£è€¦çš„ï¼Œè€Œä¸”æ˜¯æ˜“äºè¿›è¡Œç»„åˆçš„ï¼›</li><li>æ¸è¿›å¼ï¼šå¯ç®€å•ï¼Œå¯å¤æ‚ï¼Œæ ¹æ®å¤§å®¶è‡ªå·±çš„é¡¹ç›®çš„å¤æ‚åº¦ã€‚</li></ul><h3 id="nestjsç‰¹ç‚¹"><a href="#nestjsç‰¹ç‚¹" class="headerlink" title="nestjsç‰¹ç‚¹"></a>nestjsç‰¹ç‚¹</h3><p>é™¤äº†ä»ä¸Šé¢çš„å®šä¹‰ä¸Šæˆ‘ä»¬è¿›è¡Œçš„<strong>ä¸»è§‚æ‹†è§£</strong>ï¼Œé‚£nestjsè¿˜å…·æœ‰å“ªäº›ç‰¹ç‚¹å‘¢ï¼Ÿ</p><p>nestjsæ¡†æ¶çš„ç‰¹ç‚¹ï¼š</p><ul><li>å®Œç¾æ”¯æŒ Typescript</li><li>é¢å‘ <a href="https://baike.baidu.com/item/AOP/1332219">AOP ç¼–ç¨‹</a></li><li>æ”¯æŒ <a href="https://typeorm.io/">Typeorm</a></li><li>é«˜å¹¶å‘ï¼Œå¼‚æ­¥éé˜»å¡ IO</li><li>Node.js ç‰ˆçš„ <a href="https://spring.io/">spring</a></li><li>æ„å»ºå¾®æœåŠ¡åº”ç”¨</li></ul><p>è¿™äº›å…¨æ¥è‡ªäº<a href="https://docs.nestjs.cn/">nestjsä¸­æ–‡ç½‘</a>é¦–é¡µçš„ä»‹ç»ã€‚</p><h3 id="è¿‘å¹´å‘å±•"><a href="#è¿‘å¹´å‘å±•" class="headerlink" title="è¿‘å¹´å‘å±•"></a>è¿‘å¹´å‘å±•</h3><p>è¿‘äº›å¹´æ¥ï¼Œnestjsä»2017å¹´åˆ›ç«‹çš„å‘å±•éå¸¸è¿…çŒ›ï¼Œä»¥ä¸‹æ˜¯starså¢é•¿è¶‹åŠ¿ï¼š</p><img class="lazyload" src="https://static.www.toimc.com/blog/img/2021/nestjs-example-project-1/stargazers.png?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/300"><p>ç›®å‰å·²ç»æ”¶è·äº†35,152ä¸ªç‚¹èµï¼Œæ¥æºï¼š<a href="https://seladb.github.io/StarTrack-js/#/">StarTrack</a></p><p>ç„¶åå†çœ‹çœ‹npmçš„è¶‹åŠ¿ä¸å…¶ä»–çš„å‡ ä¸ªåº“çš„æ¯”è¾ƒï¼š</p><ul><li>express 2010å¹´1æœˆå‘å¸ƒï¼ˆç‚¹èµ52.2kï¼‰</li><li>meteor 2012å¹´å‘å¸ƒï¼ˆè‡ªæˆä¸€å¥—ä¸‹è½½å®‰è£…ï¼Œénpmï¼Œç‚¹èµ42kï¼‰</li><li>koa 2013å¹´11æœˆå‘å¸ƒï¼ˆç‚¹èµ30.8kï¼‰</li><li>egg.js 2016å¹´7æœˆå‘å¸ƒï¼ˆç‚¹èµ16.8kï¼‰</li></ul><p><strong>ï¼ˆæˆªæ­¢åŒ—äº¬æ—¶é—´2021å¹´03æœˆ08æ—¥ 21:53:36ï¼‰</strong></p><h2 id="nestjsåº”ç”¨åœºæ™¯"><a href="#nestjsåº”ç”¨åœºæ™¯" class="headerlink" title="nestjsåº”ç”¨åœºæ™¯"></a>nestjsåº”ç”¨åœºæ™¯</h2><blockquote><p>è¿™ä¸ªéƒ¨åˆ†æˆ‘å¹´è¿‡å¾ˆå¤šäººå†™çš„å†…å®¹ï¼Œå…¶å®æŠ€æœ¯ä¸Šï¼Œå‰ç«¯äººå–œæ¬¢çœ‹æ–°çš„ç‰¹ç‚¹â€”â€”æŠ€æœ¯æ–°ã€æ›´æ–°å‹¤ã€‚</p></blockquote><p>è¿½æ–°ä¸èƒ½ç›²ç›®ï¼Œè€Œæ˜¯è¦ä»ç°å®çš„è§’åº¦å‡ºå‘ï¼Œè§£å†³é—®é¢˜æ‰æ˜¯æœ€ç»ˆç›®çš„ã€‚</p><p>åŸºæœ¬åº”ç”¨ï¼šæœåŠ¡ç«¯é¡¹ç›®å¼€å‘å®Œæˆæ¥å£åŠŸèƒ½ï¼›</p><p>æœåŠ¡ç«¯æ‰©å±•ï¼šå®‰å…¨ã€é‰´æƒã€é˜Ÿåˆ—ã€æ—¥å¿—ã€æ€§èƒ½ã€æµ‹è¯•ã€æ¶ˆæ¯ï¼›</p><p>æŠ€æœ¯æ¶æ„ï¼šå¾®æœåŠ¡ã€TypeORM+åºåˆ—åŒ–å¯¹æ¥å¤šç§æ•°æ®åº“ã€å¤šç¯å¢ƒé…ç½®ã€AOPç¼–ç¨‹ã€MVCåŸºæœ¬æ¨¡å‹ï¼›</p><p>ä¸€äº›æˆåŠŸçš„æ¡ˆä¾‹ï¼š</p><img class="lazyload" src="https://static.www.toimc.com/blog/img/2021/nestjs-example-project-1/logos.jpg?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/600"><p>å®˜æ–¹åœ°å€ï¼š<a href="https://docs.nestjs.com/discover/companies">Who is using Nest?</a></p><p>å¤§å®¶å¯ä»¥ä»å…¶æŠ€æœ¯ç‰¹ç‚¹çš„è§’åº¦å‡ºå‘ï¼Œä»è‡ªå·±çš„å›¢é˜Ÿçš„æŠ€æœ¯å®åŠ›ä¸é¡¹ç›®çš„å¤æ‚åº¦å‡ºå‘è¿›è¡Œç»¼åˆè€ƒè™‘ã€‚</p><blockquote><p>â€œ<strong>convention over configuration</strong>â€â€”â€”Jeremy Miller</p></blockquote><p>å¯¹äºnestjsæ¥è¯´ï¼Œå¤§å¤šæ•°å‰ç«¯åŒå­¦å¯èƒ½ä¸ä¹ æƒ¯çš„ç‚¹ï¼š</p><ul><li>MVCåˆ†å±‚ä¸æ¨¡å—åŒ–æ€æƒ³</li><li>tsé™æ€ç±»å‹æ£€æŸ¥ + æ³¨è§£ + AOPç¼–ç¨‹</li><li>ORMæ¡†æ¶çš„æ¦‚å¿µçš„ç†è§£ä¸ä½¿ç”¨</li><li>æœåŠ¡ç«¯æ¶æ„ ä¸éœ€è¦è€ƒè™‘åˆ°çš„ï¼šå®‰å…¨ã€æ—¥å¿—ã€æ€§èƒ½ã€ç›‘æ§ç­‰</li><li>è¿ç»´ç›¸å…³</li></ul><h2 id="nestjsæ¡†æ¶å…³è”æŠ€æœ¯"><a href="#nestjsæ¡†æ¶å…³è”æŠ€æœ¯" class="headerlink" title="nestjsæ¡†æ¶å…³è”æŠ€æœ¯"></a>nestjsæ¡†æ¶å…³è”æŠ€æœ¯</h2><p>æ‰“å¼€nestjsçš„å®˜æ–¹githubä»“åº“ï¼Œå¯ä»¥çœ‹åˆ°å¾ˆå¤š<a href="https://github.com/nestjs">å®˜æ–¹</a>æä¾›çš„æ–¹æ¡ˆï¼š</p><ul><li>CLI: å®˜æ–¹çš„CLIå·¥å…·</li><li>TypeORM: å¯¹æ¥å„å¼å„æ ·çš„æ•°æ®åº“</li><li>Serverlessï¼šå¾®æœåŠ¡</li><li>Swaggerï¼šç”¨äºäº§ç”ŸAPIæ¥å£æ–‡æ¡£</li><li>Sequelizeï¼šåºåˆ—åŒ–</li><li>Mongoose</li><li>GraphQL</li><li>Jwt/passportï¼šé‰´æƒæ¨¡å—</li><li>ElasticSearchï¼šæœç´¢æ¨¡å—</li><li>Configï¼šé…ç½®æ¨¡å—ï¼Œç”¨äºå¤šç¯å¢ƒé…ç½®</li><li>â€¦.</li></ul><p>ä»å®˜æ–¹çš„ä»“åº“çš„æ›´æ–°çš„é¢‘æ¬¡ï¼Œå¯ä»¥çœ‹åˆ°ç¤¾åŒºçš„æ´»è·ƒã€‚è€Œä¸”ï¼Œæ‹¥æœ‰çš„ä¼—å¤šæˆç†Ÿæ–¹æ¡ˆ + ä¸°å¯Œçš„æ–‡æ¡£ï¼Œè®©nestjsåœ¨å›½å¤–çš„å‘å±•éå¸¸çš„å¥½ã€‚</p><p>è€Œä¸”ï¼Œä»ç›¸å…³æ¦‚å¿µä¸Šæ¥è¯´ï¼Œå¯¹äºå‰ç«¯åŒå­¦èµ°å‘å…¨æ ˆï¼Œå¯ä»¥æ‰“å¼€å…³äºæœåŠ¡ç«¯æ¶æ„å±‚é¢çš„è§†é‡ã€‚å¤§å®¶å¯ä»¥å…³æ³¨ä¸€ä¸‹å¦‚ä¸‹çš„è¿™ä¸ªèµ„æºï¼š<a href="https://docs.nestjs.cn/7/awesome">ç›¸å…³èµ„æ–™</a></p><p>è¿™ä¸ªèµ„æºæ˜¯nestjsä¸­æ–‡ç½‘æ•´ç†çš„ï¼ŒåŒ…æ‹¬ç¤¾åŒºã€ç¤ºä¾‹é¡¹ç›®ã€å¸¸ç”¨åº“ã€éš¾ç‚¹æŠ€æœ¯é›†æˆç­‰ï¼Œæ¯”å¦‚ï¼šçŠ¶æ€ç®¡ç†ã€ä»£ç é£æ ¼ã€é‚®ä»¶ã€APIã€é”™è¯¯ç»Ÿä¸€å¤„ç†ã€Lintã€è·¯ç”±ã€æ—¥å¿— + ç›‘æ§ã€å›½é™…åŒ–ã€é‰´æƒç­‰ã€‚</p><h2 id="nestjsçš„å‰æ™¯æ€ä¹ˆæ ·"><a href="#nestjsçš„å‰æ™¯æ€ä¹ˆæ ·" class="headerlink" title="nestjsçš„å‰æ™¯æ€ä¹ˆæ ·"></a>nestjsçš„å‰æ™¯æ€ä¹ˆæ ·</h2><p>æˆ‘ä»¬å…ˆçœ‹çœ‹ä½¿ç”¨äº†çš„åŒå­¦ä»¬ï¼Œå¤§å®¶æ€ä¹ˆè¯„ä»·ï¼š</p><p>åŒå­¦Aï¼š</p><blockquote><p>æˆ‘è®¤ä¸ºæ¡†æ¶æœ‰ä¸¤ä¸ªä¼˜ç‚¹ ç¬¬ä¸€ è¹­äº†ä¸€æ³¢ typescript çš„çƒ­åº¦ã€‚ ç¬¬äºŒ å®ƒçš„æ ‡å‡†åŒ–ä½¿çš„å¼€å‘çš„æµç¨‹éå¸¸æ–¹ä¾¿ï¼Œç‰¹åˆ«æ˜¯é’ˆå¯¹æµåŠ¨æ€§æ¯”è¾ƒå¤§çš„å…¬å¸æ¥è¯´è¿™æ˜¯ä¸ªå¥½äº‹ï¼Œkoa å’Œ express ä½ éå¸¸è‡ªç”±è¿™å¯¼è‡´äº†å¤§å®¶å¼€å‘çš„æ—¶å€™æœ‰è‡ªå·±çš„ä¸€å¥—å¼€å‘æ–¹å¼ï¼ˆæ¯”å¦‚ï¼Œä¸åŒçš„åˆ†å±‚ï¼Œæ–‡ä»¶å‘½åï¼Œé¡¹ç›®æ•´ä½“ç»“æ„ï¼‰ï¼Œå¦‚æœåˆ¶å®šé¡¹ç›®çš„äººèµ°äº†ï¼Œç»è¿‡å‡ æ³¢æ¢äººä¼šä¸ä¼šæŠŠè¿™ä¸ªé¡¹ç›®æ”¹çš„é¢ç›®å…¨éï¼Ÿ</p></blockquote><p>åŒå­¦Bï¼š</p><blockquote><p>nestjsåœ¨å›½å†…çš„æœªæ¥ä¸è§å¾—ä¼šå¾ˆå¥½ï¼Œå› ä¸ºç¼ºå°‘å¸ƒé“è€…ï¼Œå¦ä¸€æ–¹é¢æ˜¯å›½å†…æœ‰é˜¿é‡Œegg.jsã€midwayçš„ç«äº‰ã€‚å¦‚æœä»ä¼ä¸šçº§å¼€å‘çš„è§’åº¦æ¥çœ‹ï¼Œnest.jsçš„ç†å¿µæ¯”å…¶ä»–node.js webæ¡†æ¶éƒ½å¥½å¤ªå¤šäº†</p></blockquote><p>åŒå­¦Cï¼š</p><blockquote><p>nest.jsçš„æ›´æ–°éå¸¸éå¸¸çš„é¢‘ç¹ï¼Œè¿™è¯´æ˜ç¤¾åŒºæ´»è·ƒåº¦å¾ˆé«˜ã€‚æˆ‘ä»¬å›¢é˜Ÿ18å¹´åˆšå¼€å§‹ç”¨çš„egg.jsï¼Œæˆ‘ä¸ºæ­¤å¼€å‘äº†ä¸Šå±‚çš„æ¡†æ¶ï¼Œåæ¥å‘ç°nest.jsæ—©å°±æŠŠè¿™äº›äº‹æƒ…éƒ½åšå¥½äº†ï¼Œæ¯”å¦‚è£…é¥°å™¨è·¯ç”±ã€Exception filtersã€Pipesã€Guardsã€Interceptorsï¼Œ</p></blockquote><p>åŒå­¦Dï¼š</p><blockquote><p>æŒºå¥½çš„ï¼Œä½†å¦‚æœä¸ç†Ÿæ‚‰ JavaSpring çš„è¯ï¼Œ ä¸Šæ‰‹éœ€è¦ä¸€å®šæˆæœ¬ã€‚ä¸è¿‡æˆ‘è§‰å¾—æŒºåƒ Midway.jsï¼Œæˆ‘ IOC æ˜¯çœ‹ Midway çš„ï¼Œæœ‰è¿™ä¸€ä¸“é¢˜çš„æ–‡æ¡£ï¼Œä½ å¯ä»¥æ‰¾æ‰¾çœ‹ã€‚nestjs çš„ç”Ÿæ€æ˜¯åŸºäº Expressï¼Œ Midway æ˜¯åŸºäº koa å’Œé˜¿é‡Œçš„ eggã€‚</p></blockquote><p>â€¦.</p><p>å¤§å®¶çš„è¤’è´¬ä¸ä¸€ï¼Œæ€»ç»“ä¸€ä¸‹ã€‚</p><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ul><li>å®˜æ–¹ç¤¾åŒºæ´»è·ƒ</li><li>æ¡†æ¶æ¶æ„è®¾è®¡åˆç†ï¼Œå¯¹äºå¤§å‹é¡¹ç›®éå¸¸åˆ©äºæ•´ä½“çš„ç»Ÿä¸€ï¼›</li><li>æˆç†Ÿçš„å®˜æ–¹è§£å†³æ–¹æ¡ˆ</li><li>tsåŠ æŒï¼›</li></ul><p><strong>ç¼ºç‚¹ï¼š</strong></p><ul><li>ä¸Šæ‰‹æœ‰ä¸€å®šçš„éš¾åº¦</li><li>åæœŸç›¸å…³çš„å¼€å‘äººå‘˜çš„ç¼ºä¹</li></ul><h2 id="nestjså­¦ä¹ èµ„æº"><a href="#nestjså­¦ä¹ èµ„æº" class="headerlink" title="nestjså­¦ä¹ èµ„æº"></a>nestjså­¦ä¹ èµ„æº</h2><ul><li>å®˜æ–¹èµ„æº<ul><li><a href="https://nestjs.com/">å®˜æ–¹ç½‘ç«™</a></li><li><a href="https://docs.nestjs.com/">å®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://docs.nestjs.com/">API å‚è€ƒ</a></li><li><a href="https://github.com/nestjs/nest">GitHub Repo</a></li></ul></li><li>æ–‡æ¡£<ul><li><a href="https://docs.nestjs.cn/">ä¸­æ–‡æ–‡æ¡£</a> ï¼ˆæ¨èï¼‰</li><li><a href="https://docs.nestjs.cn/7/awesome">ç›¸å…³èµ„æ–™</a></li></ul></li><li>ç¤¾åŒº<ul><li><a href="https://docs.nestjs.cn/7/discuss">ä¸­æ–‡äº¤æµç¾¤</a></li><li><a href="https://gitter.im/nestjs/">Gitter</a></li><li><a href="https://discord.gg/G7Qnnhy">Discord</a></li><li><a href="https://t.me/nestjs">Telegram (ç¤¾åŒºç»´æŠ¤)</a></li><li><a href="https://t.me/nest_ru">Telegram (ä¿„ç½—æ–¯ç¤¾åŒº)</a></li><li><a href="https://nestjs.slack.com/">Slack (éŸ©è¯­ç¤¾åŒº)</a></li><li><a href="https://jq.qq.com/?_wv=1027&k=5DnXWGR">QQ ç¾¤ (ä¸­æ–‡ç¤¾åŒº)</a></li><li><a href="https://www.reddit.com/r/Nestjs_framework">Reddit (ç¤¾åŒºç»´æŠ¤)</a></li></ul></li></ul><p>ä¸‹é¢ä¸€ç¯‡ï¼Œæˆ‘ä»¬æ¥ä»‹ç»ä½¿ç”¨@nestjs/cliä¸Šæ‰‹nestjså¼€å‘ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨ç½‘ä¸Šçœ‹äº†å¾ˆå¤šå…³äºnestjsçš„æ–‡ç« ï¼Œå‘ç°å¤§å¤šæ•°çš„æ–‡ç« ä¸æˆä½“ç³»ã€‚æ‰€ä»¥ï¼Œæ‰“ç®—ä»åº”ç”¨è§’åº¦ï¼Œå¸¦é¢†å¤§å®¶ä¸€ç‚¹ç‚¹çš„å­¦ä¹ nestjsï¼Œå¹¶æ¶æ„ä¸€å¥—å¯é€šç”¨çš„ä¸šåŠ¡æ¡†æ¶ï¼Œæ–¹ä¾¿å¤§å®¶å…¥é—¨ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="nestjsæ­å»ºé€šç”¨ä¸šåŠ¡æ¡†æ¶" scheme="https://www.toimc.com/categories/nestjs%E6%90%AD%E5%BB%BA%E9%80%9A%E7%94%A8%E4%B8%9A%E5%8A%A1%E6%A1%86%E6%9E%B6/"/>
    
    
    <category term="node.js" scheme="https://www.toimc.com/tags/node-js/"/>
    
    <category term="nestjs" scheme="https://www.toimc.com/tags/nestjs/"/>
    
    <category term="webæ¡†æ¶" scheme="https://www.toimc.com/tags/web%E6%A1%86%E6%9E%B6/"/>
    
  </entry>
  
  <entry>
    <title>Flutter 2.0æ­£å¼å‘å¸ƒï¼Œæ”¯æŒè·¨å…¨å¹³å°</title>
    <link href="https://www.toimc.com/flutter-2-is-comming/"/>
    <id>https://www.toimc.com/flutter-2-is-comming/</id>
    <published>2021-03-04T12:12:31.000Z</published>
    <updated>2021-03-12T03:36:06.832Z</updated>
    
    <content type="html"><![CDATA[<p>2021å¹´3æœˆ4æ—¥ï¼Œè°·æ­Œæ­£å¼å®£å¸ƒäº† Flutter 2 çš„æ¨å‡ºã€‚ä½œä¸ºä¸€æ¬¾ç”¨äºæ„å»ºè½»å·§å‹ç§»åŠ¨åº”ç”¨çš„å¼€æº UI å·¥å…·åŒ…ï¼ŒFlutter çš„ç¬¬äºŒä¸ªå¤§ç‰ˆæœ¬å¢åŠ äº†å¯¹æ¡Œé¢å’Œ Web åº”ç”¨ç¨‹åºçš„æ”¯æŒã€‚å¼€å‘è€…å¯å€ŸåŠ© Flutter 2 æ‰“é€ å¼€ç®±å³ç”¨çš„åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”èƒ½å¤Ÿä¸º iOSã€Androidã€Windowsã€macOSã€Linux å’Œ Web ç«¯å¥—ç”¨ç›¸åŒçš„ä»£ç ã€‚</p><span id="more"></span><h2 id="Flutterçš„æ„¿æ™¯"><a href="#Flutterçš„æ„¿æ™¯" class="headerlink" title="Flutterçš„æ„¿æ™¯"></a>Flutterçš„æ„¿æ™¯</h2><p>Flutter çš„ç›®æ ‡æ˜¯æ”¹å˜å¼€å‘äººå‘˜å¯¹æ„å»ºåº”ç”¨ç¨‹åºçš„æ€è·¯ï¼Œä¸æ˜¯ä»å¼€å‘è€…éœ€è¦é€‚é…çš„å¹³å°å¼€å§‹ï¼Œè€Œæ˜¯è®©å¼€å‘è€…ä»éœ€è¦å®Œæˆçš„ç”¨æˆ·éœ€æ±‚å¼€å§‹å®ç°ã€‚</p><p>Flutter å¯ä»¥è®©ä½ åœ¨æ‹¥æœ‰æ›´å¥½è®¾è®¡æ•ˆæœçš„æƒ…å†µä¸‹ï¼Œå¾—åˆ°æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œå› ä¸ºå®ƒçš„è¿è¡Œé€Ÿåº¦å¾ˆå¿«ï¼Œå®ƒä¼šå°†æºä»£ç ç¼–è¯‘ä¸ºæœºå™¨ä»£ç ï¼Œä½†æ˜¯ Flutter åœ¨å¼€å‘è¿‡ç¨‹ä¸­æ”¯æŒçš„ hotloadï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥åœ¨åº”ç”¨ç¨‹åºè°ƒè¯•è¿è¡Œæ—¶è¿›è¡Œæ›´æ”¹å¹¶ç«‹å³æŸ¥çœ‹ç»“æœã€‚</p><p>åœ¨è¿™æ¬¡å‘å¸ƒçš„<code>Flutter 2</code>ä¸­ï¼ŒFlutter æ­£å¼å°†ä»ç§»åŠ¨æ¡†æ¶æ‰©å±•åˆ°äº†<strong>å…¨å¹³å°æ¡†æ¶</strong>ï¼Œä½¿ç”¨ Flutter 2 å¼€å‘è€…å¯ä»¥è®©å®ƒçš„åº”ç”¨ç›´æ¥è¿ç”¨åˆ°å„ç§ä¸åŒçš„å¹³å°è€Œå‡ ä¹ä¸éœ€è¦åšå‡ºä»€ä¹ˆæ”¹å˜ã€‚ç°åœ¨ä»… Play å•†åº—å°±å·²ç»æœ‰è¶…è¿‡<code>15ä¸‡ä¸ªFlutter</code>åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”æ¯ä¸ªåº”ç”¨ç¨‹åºéƒ½å¯ä»¥é€šè¿‡ Flutter 2 è¿›è¡Œå…å‡çº§ï¼Œå› ä¸ºå®ƒä»¬ç°åœ¨å¯ä»¥åœ¨ä¸é‡å†™çš„æƒ…å†µä¸‹æ‰©å±•åˆ° Desktop å’ŒWeb ã€‚</p><p>åœ¨ Google å†…éƒ¨ä¹Ÿä¼šä½¿ç”¨ Flutter å¼€å‘ï¼ŒGoogle å†…æœ‰è¿‘ä¸€åƒå¤šåå·¥ç¨‹å¸ˆæ­£åœ¨ä½¿ç”¨ Dart å’ŒFlutter æ„å»ºåº”ç”¨ç¨‹åºï¼Œå…¶ä¸­è®¸å¤šäº§å“éƒ½å·²ç»å‘å¸ƒäº†ï¼ŒåŒ…æ‹¬ï¼šStadiaï¼ŒGoogle Oneå’ŒGoogle Nest Hub ç­‰ç­‰ã€‚</p><p>åœ¨å‡ ä¸ªæœˆå‰ï¼Œ Google Pay é‡Œçš„æ——èˆ°ç§»åŠ¨åº”ç”¨å°±æœ‰ä¸å°‘æ›´æ”¹ä¸ºä½¿ç”¨ Flutterï¼Œå®ƒä»¬å·²ç»åœ¨ç”Ÿäº§åŠ›å’Œè´¨é‡ä¸Šå–å¾—äº†é‡å¤§è¿›æ­¥ã€‚é€šè¿‡ç»Ÿä¸€çš„ä»£ç åº“ï¼Œå›¢é˜Ÿæ¶ˆé™¤äº†å¹³å°ä¹‹é—´çš„åŠŸèƒ½å·®å¼‚ï¼Œå¹¶æ¸…ç†è¶…è¿‡ä¸€ç™¾ä¸‡è¡Œä»£ç ï¼ŒGoogle Pay çš„æŠ¥å‘Šè¿˜æåˆ°å…¶å·¥ç¨‹å¸ˆçš„æ•ˆç‡è¦é«˜å¾—å¤šï¼ŒæŠ€æœ¯å€ºåŠ¡å¤§å¤§å‡å°‘ï¼Œç»Ÿä¸€çš„å‘å¸ƒæµç¨‹ï¼ˆå¦‚è·¨ iOS å’Œ Android çš„å®‰å…¨æ€§å®¡æŸ¥å’Œè¯•éªŒï¼‰å¾—ä»¥å®ç°ã€‚</p><img title="flutterç›®å‰å–å¾—çš„æˆç»©" alt="å›¾ç‰‡è£‚äº†ï¼Œè”ç³»ï¼šadmin@wayearn.com" class="lazyload" src="https://static.www.toimc.com/blog/img/2021/flutter-2-is-comming/flutter2-comming.png?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/300"><h2 id="Flutter-vs-RN-vs-Ionic"><a href="#Flutter-vs-RN-vs-Ionic" class="headerlink" title="Flutter vs RN vs Ionic"></a>Flutter vs RN vs Ionic</h2><p>ä¸‹é¢æœ‰ä¸€å¼ å›¾è¯´æ˜Flutterä¸ç°è¡Œçš„RNï¼ŒIonicè¿™äº›è·¨å¹³å°çš„åº”ç”¨æ¡†æ¶çš„å¯¹æ¯”ï¼š</p><img title="flutter-vs-react-native-performance" alt="å›¾ç‰‡è£‚äº†ï¼Œè”ç³»ï¼šadmin@wayearn.com" class="lazyload" src="https://static.www.toimc.com/blog/img/2021/flutter-2-is-comming/flutter-vs-react-native-performance.png?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/200"><ul><li><p>Ionicï¼šIonicæä¾›äº†æœ€å·®çš„æ€§èƒ½ï¼Œå› ä¸ºå®ƒåˆ°åº•æ˜¯ä¸€ä¸ªå°è£…çš„webåº”ç”¨ã€‚</p></li><li><p>Flutterã€NativeScriptå’ŒReact Nativeã€‚è¿™ä¸‰ä¸ªéƒ½ä¸ºä½ æä¾›äº†çœŸæ­£çš„åŸç”Ÿåº”ç”¨ï¼ˆä»ä½ çš„ä»£ç ä¸­ç¼–è¯‘ï¼‰ï¼Œå› æ­¤ï¼Œå®ƒä»¬æä¾›äº†æ¯”Ionicæ›´å¥½çš„æ€§èƒ½ã€‚å¯¹è¿™ä¸‰è€…ä¸­è°æ˜¯æœ€å¥½çš„åšç²¾ç¡®çš„æµ‹é‡æ˜¯ç›¸å½“å›°éš¾çš„ï¼Œå› ä¸ºå®ƒä¾èµ–äºä½ æ­£åœ¨æ„å»ºçš„åº”ç”¨ç¨‹åºã€ä½¿ç”¨çš„è®¾å¤‡ã€æ“ä½œç³»ç»Ÿå’Œä½¿ç”¨çš„Flutter/ NativeScript/ React Nativeçš„ç‰ˆæœ¬ã€‚Flutterå®ƒå…·æœ‰Dartçš„ä¼˜åŠ¿ï¼Œå¹¶ä¸”æ²¡æœ‰JavaScriptæ¡¥æ¥å¯åŠ¨ä¸è®¾å¤‡åŸç”Ÿç»„ä»¶çš„äº¤äº’ï¼Œå®ƒæä¾›çš„é€Ÿåº¦æ˜¯è¿™ä¸‰è€…ä¸­è¡¨ç°æ¯”è¾ƒå¥½çš„ã€‚</p></li><li><p>åŸç”Ÿï¼šå†™å¾—å¥½çš„åŸç”Ÿä»£ç åº”è¯¥æ€»æ˜¯æ¯”ç¼–è¯‘åçš„åŸç”Ÿä»£ç æ€§èƒ½æ›´é«˜ã€‚</p></li></ul><h2 id="Flutter2-0é‡å¤§çš„å˜åŒ–"><a href="#Flutter2-0é‡å¤§çš„å˜åŒ–" class="headerlink" title="Flutter2.0é‡å¤§çš„å˜åŒ–"></a>Flutter2.0é‡å¤§çš„å˜åŒ–</h2><img title="flutterç¤ºä¾‹" alt="å›¾ç‰‡è£‚äº†ï¼Œè”ç³»ï¼šadmin@wayearn.com" class="lazyload" src="https://static.www.toimc.com/blog/img/2021/flutter-2-is-comming/Flutter-demo.gif?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/200"><p>å¼€å‘å›¢é˜Ÿè¡¨ç¤ºï¼ŒFlutter 2.0 æœ‰æ„ä¸º Web å¹³å°æä¾›äº†éå¸¸æ ‡å‡†çš„ã€ä»¥ DOM ä¸ºä¸­å¿ƒçš„å¼€å‘æ–¹å¼ã€‚å°½ç®¡æ•ˆæœä¸é”™ï¼Œè¿™ä¹ˆåšä¹Ÿå¯èƒ½å¸¦æ¥æ€§èƒ½æ–¹é¢çš„é˜»ç¢ï¼ˆå°¤å…¶æ˜¯æ›´é«˜çº§çš„åŠŸèƒ½ï¼‰ã€‚</p><p>è¿‡å»å¤§çº¦ä¸€å¹´æ—¶é—´é‡Œï¼ŒFlutter å›¢é˜Ÿå¼€å§‹ç ”ç©¶åŸºäº<code>WebAssembly</code>çš„<code>Canvas Kit</code>é¡¹ç›®ï¼Œç‰¹ç‚¹æ˜¯é‡‡ç”¨äº†ä¸ä¸º<code>Android / Chrome</code>æä¾›æ”¯æ’‘çš„ç›¸åŒçš„ <code>Skia</code>å›¾å½¢å¼•æ“ã€‚Tim Sneath è¡¨ç¤ºï¼šâ€œè¿™æ„å‘³ç€æˆ‘ä»¬ç°åœ¨åŸºæœ¬ä¸Šå¯ä»¥ç»•è¿‡æ ¸å¿ƒ HTMLï¼Œå¹¶çœŸæ­£ä½¿ç”¨ Web å¹³å°ä¸Šä»¥åº”ç”¨ç¨‹åºä¸ºä¸­å¿ƒçš„éƒ¨åˆ†ï¼Œè€Œä¸ä¼šç•™ä¸‹ï¼ˆè‡ªåŠ¨å®Œæˆçš„ï¼‰æ–‡å­—æˆ–å¯†ç ã€ä»¥åŠè®©ç½‘ç»œä¿æŒç‹¬ç‰¹çŠ¶æ€çš„å„é¡¹ç‰¹æ€§â€ã€‚æ¡Œé¢å¹³å°æ–¹é¢ï¼Œè°·æ­Œå®£å¸ƒ<code>Canonical</code>å°†åœ¨ Flutter ä¸Šå…¨åŠ›ä»¥èµ´ï¼Œå¹¶ä½¿ä¹‹æˆä¸ºæ‰€æœ‰æœªæ¥æ¡Œé¢ / ç§»åŠ¨åº”ç”¨ç¨‹åºçš„é»˜è®¤é€‰é¡¹ã€‚</p><img title="flutteré«˜æ€§èƒ½" alt="å›¾ç‰‡è£‚äº†ï¼Œè”ç³»ï¼šadmin@wayearn.com" class="lazyload" src="https://static.www.toimc.com/blog/img/2021/flutter-2-is-comming/example.gif?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/200"><p>ä¸Šé¢æ¼”ç¤ºFlutteråº”ç”¨ï¼Œä¸åŸç”Ÿåº”ç”¨ã€‚ä»ä¸Šé¢çš„æ¼”ç¤ºå¯ä»¥çœ‹å‡ºï¼Œflutterçš„æ€§èƒ½æ˜¯éå¸¸ä¼˜ç§€çš„ã€‚</p><h2 id="Flutterå…¥é—¨èµ„æ–™"><a href="#Flutterå…¥é—¨èµ„æ–™" class="headerlink" title="Flutterå…¥é—¨èµ„æ–™"></a>Flutterå…¥é—¨èµ„æ–™</h2><p>ã€1ã€‘<a href="https://flutter.dev/docs">å®˜æ–¹æ–‡æ¡£</a><br>ã€2ã€‘<a href="https://flutter.cn/docs">ä¸­æ–‡æ–‡æ¡£</a><br>ã€3ã€‘<a href="https://flutter.cn/docs/get-started/install">Flutterç¯å¢ƒé…ç½®</a><br>ã€4ã€‘<a href="https://flutter.cn/docs/get-started/flutter-for/web-devs">Flutterä¸å‰ç«¯</a></p><p>æˆ‘ä»¬åç»­çš„å†…å®¹ä¸­ï¼Œä¹Ÿä¼šå»æ›´æ–°ç›¸å…³çš„Flutterå­¦ä¹ çš„è·¯å¾„ï¼Œè¯·å¤§å®¶å…³æ³¨ï¼~</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;2021å¹´3æœˆ4æ—¥ï¼Œè°·æ­Œæ­£å¼å®£å¸ƒäº† Flutter 2 çš„æ¨å‡ºã€‚ä½œä¸ºä¸€æ¬¾ç”¨äºæ„å»ºè½»å·§å‹ç§»åŠ¨åº”ç”¨çš„å¼€æº UI å·¥å…·åŒ…ï¼ŒFlutter çš„ç¬¬äºŒä¸ªå¤§ç‰ˆæœ¬å¢åŠ äº†å¯¹æ¡Œé¢å’Œ Web åº”ç”¨ç¨‹åºçš„æ”¯æŒã€‚å¼€å‘è€…å¯å€ŸåŠ© Flutter 2 æ‰“é€ å¼€ç®±å³ç”¨çš„åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”èƒ½å¤Ÿä¸º iOSã€Androidã€Windowsã€macOSã€Linux å’Œ Web ç«¯å¥—ç”¨ç›¸åŒçš„ä»£ç ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="flutter" scheme="https://www.toimc.com/categories/flutter/"/>
    
    
    <category term="flutter" scheme="https://www.toimc.com/tags/flutter/"/>
    
  </entry>
  
  <entry>
    <title>æµè§ˆå™¨httpè‡ªåŠ¨è·³è½¬httpsï¼Œå¯¼è‡´å›¾ç‰‡è®¿é—®å¤±è´¥</title>
    <link href="https://www.toimc.com/image-google-ssl-limit/"/>
    <id>https://www.toimc.com/image-google-ssl-limit/</id>
    <published>2021-03-03T01:57:03.000Z</published>
    <updated>2021-03-03T03:53:15.522Z</updated>
    
    <content type="html"><![CDATA[<p>ç›®å‰ï¼Œchromeæµè§ˆå™¨httpsåè®®çš„åŸŸä¸­è®¿é—®httpè‡ªåŠ¨è·³è½¬httpsï¼Œè¯¥å¦‚ä½•è§£å†³å‘¢ï¼Ÿæ€è·¯ï¼šç»™å›¾åºŠæ·»åŠ sslè¯ä¹¦ï¼Œä¸€èˆ¬çš„å¯¹è±¡äº‘å­˜å‚¨éƒ½å¯ä»¥æœ‰å…è´¹çš„SSLè¯ä¹¦ç”³è¯·ï¼›æˆ–è€…ï¼Œç›´æ¥åœ¨æµè§ˆå™¨ä¸­å…³é—­é˜»æ­¢ä¸å®‰å…¨çš„å†…å®¹æ¥æºã€‚</p><span id="more"></span><p>æ–¹æ¡ˆä¸€ï¼š</p><p>ç½‘ä¸ŠæŸ¥äº†å¥½å¤šè§£å†³æ–¹æ¡ˆï¼Œè¯´æ˜¯ç¼“å­˜æˆ–è€…åˆ é™¤é…ç½®ä¹‹ç±»çš„ï¼Œä½†æ˜¯éƒ½æ²¡èƒ½è§£å†³ã€‚</p><p>é—®é¢˜åŸå› ï¼šhttpsåœ¨éƒ¨åˆ†chromeæµè§ˆå™¨ç‰ˆæœ¬ä¸­å®‰å…¨è®¾ç½®é¡¹ä¸ºé»˜è®¤å±è”½ä¸å®‰å…¨å†…å®¹ï¼ˆé’ˆå¯¹åŸŸåï¼‰å¯¼è‡´ã€‚</p><p>è§£å†³æ–¹æ³•ï¼šæŒ‰ä¸‹å›¾æ­¥éª¤æ“ä½œå³å¯</p><img title="ss1" alt="å›¾ç‰‡è£‚äº†ï¼Œè”ç³»ï¼šadmin@wayearn.com" class="lazyload" width="600" src="https://static.www.toimc.com/blog/img/2021/image-google-ssl-limit/ssl1.jpg?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/1000"><img title="ss2" alt="å›¾ç‰‡è£‚äº†ï¼Œè”ç³»ï¼šadmin@wayearn.com" class="lazyload" width="600" src="https://static.www.toimc.com/blog/img/2021/image-google-ssl-limit/ssl2.jpg?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/1000"><p>æ–¹æ¡ˆäºŒï¼š</p><p>æœ¬åšå®¢é‡‡ç”¨äº†ä¸ƒç‰›äº‘å­˜å‚¨ï¼Œhexoä¸ä¸ƒç‰›äº‘çš„æ’ä»¶è¿˜æ¯”è¾ƒå¥½ç”¨ï¼š</p><ul><li>æ–¹ä¾¿è®¾ç½®å›¾ç‰‡çš„å¤§å°</li><li>æ–¹ä¾¿è¿›è¡Œå›¾ç‰‡çš„ä¸Šä¼ </li><li>æ–¹ä¾¿ç®¡ç†å›¾ç‰‡èµ„æº</li><li>æµé‡ä¹Ÿä¸è´µ</li></ul><p>æ‰€ä»¥ï¼Œæˆ‘å°è¯•ç€ä½¿ç”¨äº†ä¸€ä¸‹ä¸ƒç‰›äº‘çš„DVè¯ä¹¦ï¼ˆå…è´¹ï¼å…è´¹ï¼å…è´¹ï¼ï¼‰ï¼Œåªä¼šæ”¶å–å°éƒ¨åˆ†CDN + HTTPSæµé‡çš„è´¹ç”¨ã€‚</p><p>ä¸‹é¢ä»‹ç»ä¸‹æ­¥éª¤ï¼š</p><ul><li><p>æ‰“å¼€<a href="https://portal.qiniu.com/certificate/ssl#cert">ä¸ƒç‰›äº‘è¯ä¹¦ç®¡ç†</a>ï¼Œç”³è¯·DVè¯ä¹¦</p><img title="ss3" alt="å›¾ç‰‡è£‚äº†ï¼Œè”ç³»ï¼šadmin@wayearn.com" class="lazyload" src="https://static.www.toimc.com/blog/img/2021/image-google-ssl-limit/ssl3.jpg?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/1000"><p>è´­ä¹°è¯ä¹¦ã€‚</p><img title="ss4" alt="å›¾ç‰‡è£‚äº†ï¼Œè”ç³»ï¼šadmin@wayearn.com" class="lazyload" src="https://static.www.toimc.com/blog/img/2021/image-google-ssl-limit/ssl4.jpg?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/1000"><p>ç›´æ¥ç‚¹å‡»ç¡®è®¤æ”¯ä»˜ï¼Œç„¶åè¡¥å…¨ä¸ªäººä¿¡æ¯ï¼Œå¯ä»¥é€‰æ‹©éƒ¨ç½²CDN</p><img title="ss5" alt="å›¾ç‰‡è£‚äº†ï¼Œè”ç³»ï¼šadmin@wayearn.com" class="lazyload" src="https://static.www.toimc.com/blog/img/2021/image-google-ssl-limit/ssl5.jpg?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/1000"><p><strong>è¿™é‡Œä¸€å®šè¦æ³¨æ„ï¼Œè¿™ä¸ªåŸŸåæœ€å¥½æ˜¯å­åŸŸåï¼Œå› ä¸ºDVåŸŸååªèƒ½ç”³è¯·é™æ€çš„ï¼Œè€Œéæ³›åŸŸå; å¹¶ä¸”ï¼ŒåŸŸåéœ€è¦å¤‡æ¡ˆ</strong></p><img title="ss6" alt="å›¾ç‰‡è£‚äº†ï¼Œè”ç³»ï¼šadmin@wayearn.com" class="lazyload" src="https://static.www.toimc.com/blog/img/2021/image-google-ssl-limit/ssl6.jpg?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/1000"><p>è¯ä¹¦çš„ç­¾å‘éœ€è¦10åˆ†é’Ÿå·¦å³çš„æ—¶é—´ã€‚</p></li><li><p>æ‰“å¼€<a href="https://portal.qiniu.com/cdn">ä¸ƒç‰›äº‘CDN</a>ï¼Œé…ç½®åŸŸåï¼Œåœ¨åŸŸåç®¡ç†å¤„æ·»åŠ å­åŸŸåï¼ˆæ¯”å¦‚ï¼šstatic.<a href="http://www.yourdomain.com)/">www.yourdomain.comï¼‰</a></p><p>è·¯å¾„ï¼šç‚¹å‡»CDN -&gt; åŸŸåç®¡ç† -&gt; HTTPSé…ç½®</p><img title="ss11" alt="å›¾ç‰‡è£‚äº†ï¼Œè”ç³»ï¼šadmin@wayearn.com" class="lazyload" src="https://static.www.toimc.com/blog/img/2021/image-google-ssl-limit/ssl11.jpg?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/1000"><p><strong>å¦‚æœåŸŸåæ²¡æœ‰å¤‡æ¡ˆï¼Œåˆ™ä¼šå‡ºç°ICPå¤‡æ¡ˆæç¤ºï¼ï¼ï¼</strong></p><img title="ss10" alt="å›¾ç‰‡è£‚äº†ï¼Œè”ç³»ï¼šadmin@wayearn.com" class="lazyload" src="https://static.www.toimc.com/blog/img/2021/image-google-ssl-limit/ssl10.jpg?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/1000"></li><li><p>ä¿å­˜ä¹‹åï¼Œé…ç½®CNAME</p><p>CNAMEéœ€è¦åœ¨å„è‡ªçš„åŸŸåæœåŠ¡å•†é…ç½®åŸŸåè§£æï¼š</p><img title="ss7" alt="å›¾ç‰‡è£‚äº†ï¼Œè”ç³»ï¼šadmin@wayearn.com" class="lazyload" src="https://static.www.toimc.com/blog/img/2021/image-google-ssl-limit/ssl7.jpg?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/1000"><p>å¯ä»¥ç‚¹å‡»åé¢çš„<a href="https://developer.qiniu.com/fusion/kb/1322/how-to-configure-cname-domain-name">å¸®åŠ©</a></p><p>æœ€åï¼Œå¯ä»¥æµ‹è¯•ä¸€ä¸‹ï¼Œä¸Šä¼ åˆ°ä¸ƒç‰›äº‘å¯¹è±¡äº‘å­˜å‚¨çš„å›¾ç‰‡ï¼Œæœ‰æ²¡æœ‰è½¬æˆhttpsçš„é“¾æ¥ï¼š</p><img title="ss12" alt="å›¾ç‰‡è£‚äº†ï¼Œè”ç³»ï¼šadmin@wayearn.com" class="lazyload" src="https://static.www.toimc.com/blog/img/2021/image-google-ssl-limit/ssl12.jpg?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/1000"></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;ç›®å‰ï¼Œchromeæµè§ˆå™¨httpsåè®®çš„åŸŸä¸­è®¿é—®httpè‡ªåŠ¨è·³è½¬httpsï¼Œè¯¥å¦‚ä½•è§£å†³å‘¢ï¼Ÿæ€è·¯ï¼šç»™å›¾åºŠæ·»åŠ sslè¯ä¹¦ï¼Œä¸€èˆ¬çš„å¯¹è±¡äº‘å­˜å‚¨éƒ½å¯ä»¥æœ‰å…è´¹çš„SSLè¯ä¹¦ç”³è¯·ï¼›æˆ–è€…ï¼Œç›´æ¥åœ¨æµè§ˆå™¨ä¸­å…³é—­é˜»æ­¢ä¸å®‰å…¨çš„å†…å®¹æ¥æºã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="https" scheme="https://www.toimc.com/tags/https/"/>
    
    <category term="ssl" scheme="https://www.toimc.com/tags/ssl/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•è®©ç½‘ç«™è¾¾åˆ°sslè¯„çº§A+â€”â€”æœ¬ç«™å¼€å¯tls1.3</title>
    <link href="https://www.toimc.com/%E5%A6%82%E4%BD%95%E8%AE%A9%E7%BD%91%E7%AB%99%E8%BE%BE%E5%88%B0ssl%E8%AF%84%E7%BA%A7A/"/>
    <id>https://www.toimc.com/%E5%A6%82%E4%BD%95%E8%AE%A9%E7%BD%91%E7%AB%99%E8%BE%BE%E5%88%B0ssl%E8%AF%84%E7%BA%A7A/</id>
    <published>2021-03-02T13:47:25.000Z</published>
    <updated>2021-03-12T03:36:33.808Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä»‹ç»äº†ä½¿ç”¨dockerå¿«é€Ÿåˆ›å»ºnginxæœåŠ¡ï¼Œå¹¶ä»‹ç»äº†å¦‚ä½•é…ç½®tls1.3çš„æ–¹æ³•ï¼Œè®©ç½‘ç«™çš„ssl </p><span id="more"></span><p>å…ˆä¸Šå›¾ç‰‡ï¼š</p><img title="æå‡ç½‘ç«™sslç­‰çº§" alt="å›¾ç‰‡è£‚äº†ï¼Œè”ç³»ï¼šadmin@wayearn.com" class="lazyload" width="600" src="https://static.www.toimc.com/blog/img/2021/å¦‚ä½•è®©ç½‘ç«™è¾¾åˆ°sslè¯„çº§A/1.jpg?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/1000"><p>å¯¹å¦‚ä½•è¯„åˆ°<code>A</code>ä»¥åŠ<code>A+</code>ä¸æ˜¯å¾ˆç†è§£ï¼Œè¿™é‡Œç®€å•çš„è¯´æ˜ä¸€ä¸‹ã€‚</p><p>é¦–é¡µè¯´æ˜ä¸€ä¸‹è¿™ä¸ªè¯„åˆ†ï¼Œå¹¶ä¸ä»…ä»…æ˜¯é’ˆå¯¹äºè¯ä¹¦çš„éƒ¨ç½²æƒ…å†µè€Œè¨€çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªå¤šæ–¹é¢ç»¼åˆçš„è¯„çº§ï¼Œå…¶ä¸­åŒ…æ‹¬äº†<code>è¯ä¹¦</code>ã€<code>SSLåè®®</code>ã€<code>åŠ å¯†å¥—ä»¶</code>ã€<code>æ¼æ´</code>ã€<code>ä¸å®‰å…¨çš„å¤–é“¾</code>ç­‰ç­‰ã€‚</p><h2 id="å…·ä½“æ­¥éª¤ï¼š"><a href="#å…·ä½“æ­¥éª¤ï¼š" class="headerlink" title="å…·ä½“æ­¥éª¤ï¼š"></a>å…·ä½“æ­¥éª¤ï¼š</h2><ul><li>dockeræ–¹å¼å®‰è£…Nginx</li><li>é…ç½®nginx</li><li>éªŒè¯TLS</li></ul><h2 id="å®‰è£…nginx"><a href="#å®‰è£…nginx" class="headerlink" title="å®‰è£…nginx"></a>å®‰è£…nginx</h2><p>æ¨èä½¿ç”¨è¿™ä¸ªé•œåƒï¼š<code>docker pull khs1994/nginx:1.19.7-alpine</code></p><p>ä»“åº“åœ°å€ï¼š<a href="https://github.com/khs1994-docker/nginx">https://github.com/khs1994-docker/nginx</a></p><p>docker-composeé…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">nginx:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">&quot;khs1994/nginx:1.19.7-alpine&quot;</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;80:80&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;443:443&quot;</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">TZ=Asia/Shanghai</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./conf.d:/etc/nginx/conf.d:ro</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­ <code>./conf.d</code> æ˜¯ç›¸å¯¹äºnginxçš„é…ç½®ç›®å½•ã€‚</p><h2 id="é…ç½®nginx"><a href="#é…ç½®nginx" class="headerlink" title="é…ç½®nginx"></a>é…ç½®nginx</h2><p>åœ¨ Nginx çš„ç«™ç‚¹é…ç½®ä¸­ï¼Œä¸‹é¢æ˜¯æˆ‘ä»¬æ¨èçš„é…ç½®å†…å®¹ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ssl_protocols</span> TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span> TLSv1.<span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="attribute">ssl_ciphers</span> <span class="string">&#x27;TLS13-AES-256-GCM-SHA384:TLS13-CHACHA20-POLY1305-SHA256:TLS13-AES-128-GCM-SHA256:TLS13-AES-128-CCM-8-SHA256:TLS13-AES-128-CCM-SHA256:EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+ECDSA+AES128:EECDH+aRSA+AES128:RSA+AES128:EECDH+ECDSA+AES256:EECDH+aRSA+AES256:RSA+AES256:EECDH+ECDSA+3DES:EECDH+aRSA+3DES:RSA+3DES:!MD5&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="attribute">add_header</span> Strict-Transport-Security <span class="string">&quot;max-age=31536000&quot;</span>;</span><br></pre></td></tr></table></figure><p>åŒ…å« <code>TLS13</code> æ˜¯ TLS 1.3 æ–°å¢çš„ <code>Cipher Suite</code>ï¼ŒåŠ åœ¨æœ€å‰é¢å³å¯ï¼›å¦‚æœä½ ä¸æ‰“ç®—ç»§ç»­æ”¯æŒ IE8ï¼Œå¯ä»¥å»æ‰åŒ…å« <code>3DES</code> çš„ Cipher Suiteã€‚</p><p>æœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š</p><ul><li>åˆ é™¤<code>TLSv1</code>çš„æ”¯æŒ</li><li>æ·»åŠ å¤´éƒ¨ï¼š<code>Strict-Transport-Security</code></li><li>é…ç½®<code>ssl_ciphers</code></li></ul><h2 id="éªŒè¯æ˜¯å¦æ”¯æŒ-TLS-1-3"><a href="#éªŒè¯æ˜¯å¦æ”¯æŒ-TLS-1-3" class="headerlink" title="éªŒè¯æ˜¯å¦æ”¯æŒ TLS 1.3"></a>éªŒè¯æ˜¯å¦æ”¯æŒ TLS 1.3</h2><p>ç›®å‰æœ€æ–°ç‰ˆ Chrome å’Œ Firefox éƒ½æ”¯æŒ TLS 1.3ï¼Œä½†éœ€è¦æ‰‹åŠ¨å¼€å¯ï¼š</p><ul><li>Chromeï¼Œå°† <code>chrome://flags/</code> ä¸­çš„ <code>Maximum TLS version enabled</code> æ”¹ä¸º <code>TLS 1.3</code>ï¼ˆChrome 62 ä¸­éœ€è¦å°† <code>TLS 1.3</code> æ”¹ä¸º <code>Enabled (Draft)</code>ï¼Œæ„Ÿè°¢ @TsuranSonoda æŒ‡å‡ºï¼‰ï¼›</li><li>Firefoxï¼Œå°† <code>about:config</code> ä¸­çš„ <code>security.tls.version.max</code> æ”¹ä¸º <code>4</code>ï¼›</li></ul><p>æ¨èï¼š</p><ol><li>è‹±æ–‡ï¼š <a href="https://www.ssllabs.com/ssltest/index.html">Qualys SSL Labsâ€™s SSL Server Test</a> </li><li>ä¸­æ–‡ï¼š <a href="https://myssl.com/">MySSL</a> ä¹Ÿæ”¯æŒéªŒè¯æœåŠ¡ç«¯æ˜¯å¦æ”¯æŒ TLS 1.3ï¼Œéå¸¸æ–¹ä¾¿ï¼Œæ¨èã€‚</li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ¬æ–‡ä»‹ç»äº†ä½¿ç”¨dockerå¿«é€Ÿåˆ›å»ºnginxæœåŠ¡ï¼Œå¹¶ä»‹ç»äº†å¦‚ä½•é…ç½®tls1.3çš„æ–¹æ³•ï¼Œè®©ç½‘ç«™çš„ssl &lt;/p&gt;</summary>
    
    
    
    
    <category term="nginx" scheme="https://www.toimc.com/tags/nginx/"/>
    
    <category term="https" scheme="https://www.toimc.com/tags/https/"/>
    
    <category term="docker" scheme="https://www.toimc.com/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>å¤§å‹é¡¹ç›®å‰ç«¯æ¶æ„è®¾è®¡</title>
    <link href="https://www.toimc.com/%E5%A4%A7%E5%9E%8B%E9%A1%B9%E7%9B%AE%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/"/>
    <id>https://www.toimc.com/%E5%A4%A7%E5%9E%8B%E9%A1%B9%E7%9B%AE%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/</id>
    <published>2021-03-01T15:59:24.000Z</published>
    <updated>2021-03-13T04:39:32.530Z</updated>
    
    <content type="html"><![CDATA[<p>å…¥é—¨å¾ˆå¤šå¹´çš„å‰ç«¯å°ä¼™ä¼´ï¼Œä¹Ÿä¼šé‡åˆ°å·¥ä½œä¸­éœ€è¦è®¾è®¡å¤§å‹é¡¹ç›®çš„æ—¶å€™ã€‚å¦‚ä½•åšå¥½å‰æœŸçš„æ¶æ„è®¾è®¡ï¼Œå¯¹äºåæœŸé¡¹ç›®çš„æ‰©å±•ä¸å‡çº§éƒ½æ˜¯éå¸¸é‡è¦çš„ã€‚</p><p>æœ¬æ–‡ä¸ä¼šä¾§é‡äºå…·ä½“æŠ€æœ¯å®ç°ï¼Œè€Œæ˜¯å°è¯•ä»æ•´ä½“è§’åº¦å‡ºå‘ï¼Œåˆ†æä¸ºä»€ä¹ˆä¸æ€ä¹ˆåšï¼Œä»¥åŠæˆæœ¬å’Œäº§å‡ºå¦‚ä½•ã€‚</p><span id="more"></span><h2 id="å‰æƒ…æè¦"><a href="#å‰æƒ…æè¦" class="headerlink" title="å‰æƒ…æè¦"></a>å‰æƒ…æè¦</h2><h3 id="é€‚ç”¨åœºæ™¯ï¼š"><a href="#é€‚ç”¨åœºæ™¯ï¼š" class="headerlink" title="é€‚ç”¨åœºæ™¯ï¼š"></a>é€‚ç”¨åœºæ™¯ï¼š</h3><p>å¤§å®¶å‰ç«¯é¡¹ç›®çš„è§„æ¨¡ä¸åŒï¼ŒæŒ‰ç…§æœ¬æ–‡å®è·µæˆæœ¬æ”¶ç›Šæ¯”ä¹Ÿä¼šæœ‰æ‰€å·®åˆ«ã€‚</p><p>é€šå¸¸æ¥è¯´ï¼Œäººå‘˜è¶Šå¤šã€é¡¹ç›®å¤æ‚åº¦è¶Šé«˜ï¼Œå¯å‚è€ƒçš„ä»·å€¼è¶Šå¤§ï¼Œ<strong>æ‰€æœ‰æŠ€æœ¯ç‚¹ç»è¿‡å¤§å‹é¡¹ç›®çš„è®ºè¯</strong>ã€‚</p><p>åŒæ—¶å¯¹äºæŠ€æœ¯å˜çš„å‘å±•å˜è¿ï¼Œå¯èƒ½æœ‰éƒ¨åˆ†æªæ–½ä¸é€‚ç”¨ï¼Œå› æ­¤åº”è¯¥æ ¹æ®å…·ä½“æƒ…å†µæ¥é€‰ç”¨ã€‚</p><p>è¿˜æ˜¯é‚£å¥è¯â€œ<strong>åˆé€‚çš„æ‰æ˜¯æœ€å¥½çš„</strong>â€ã€‚</p><h3 id="ä¸­å¿ƒæ€æƒ³ï¼š"><a href="#ä¸­å¿ƒæ€æƒ³ï¼š" class="headerlink" title="ä¸­å¿ƒæ€æƒ³ï¼š"></a>ä¸­å¿ƒæ€æƒ³ï¼š</h3><ul><li>è§£å†³é—®é¢˜ï¼šå‰ç«¯æ¶æ„çš„è®¾è®¡ï¼Œç›®çš„<u>å¢åŠ é¡¹ç›®çš„å¯ç®¡ç†æ€§ã€ç¨³å®šæ€§ã€å¯æ‰©å±•æ€§</u>ã€‚</li><li>è´¨é‡ä¸æˆæœ¬ï¼šå¯¹äºéœ€è¦é¢å¤–å¼€å‘å·¥ä½œé‡çš„äº‹åŠ¡ï¼Œæˆ‘ä»¬åœ¨å†³å®šæ˜¯å¦å»åšçš„æ—¶å€™ï¼Œåº”è¯¥è€ƒè™‘åˆ°ä¸¤ä¸ªè¦ç´ ï¼šç¬¬ä¸€ä¸ªæ˜¯èŠ±è´¹çš„äººåŠ›æˆæœ¬ï¼Œç¬¬äºŒä¸ªæ˜¯æœªæ¥å¯èƒ½èŠ‚çº¦çš„æ—¶é—´å’Œé‡‘é’±ã€é¿å…çš„é¡¹ç›®é£é™©ä¸èµ„æŸã€æé«˜å¯¹ä¸šåŠ¡çš„æ”¯æ’‘èƒ½åŠ›ä»¥å¸¦æ¥åœ¨ä¸šåŠ¡ä¸Šå¯è¡¡é‡çš„æ›´é«˜çš„ä»·å€¼ã€ä»¥åŠå…¶ä»–ä»·å€¼ã€‚</li><li>å®šæ€§å’Œå®šé‡ï¼šæ¶æ„é‡Œè®¾è®¡ä¸€å®šè¦æœ‰æ˜¯å¯è¡¡é‡çš„æ„ä¹‰çš„å†…å®¹ï¼Œæœ€å¥½æ˜¯å¯ä»¥å®šé‡çš„ï¼ˆå¯ä»¥è¡¡é‡å¸¦æ¥çš„æ”¶ç›Šæˆ–å‡å°‘çš„æˆæœ¬ï¼‰ï¼Œè‡³å°‘æ˜¯å¯ä»¥å®šæ€§çš„ï¼ˆæ— æ³•ç”¨æ•°å­—é˜è¿°æ”¶ç›Šï¼Œä½†æˆ‘ä»¬å¯ä»¥æ˜ç¡®è¿™ä¹ˆåšæ˜¯æœ‰æ„ä¹‰çš„ï¼‰ï¼Œä¾‹å¦‚ï¼šå¢åŠ å®‰å…¨æ€§é™ä½é£é™©ã€‚</li><li>æ•°æ®æ•æ„Ÿï¼šä¸“é—¨å†™è¿™ä¸€æ¡å¼ºè°ƒæ•°æ®ä½œä¸ºä¾æ®çš„é‡è¦æ€§ã€‚å½“æˆ‘ä»¬éœ€è¦è¯´æœå…¶ä»–éƒ¨é—¨/ä¸Šçº§ç®¡ç†è€…ï¼Œä»¥æ¨åŠ¨æˆ‘ä»¬è®¾è®¡çš„å†…å®¹æ—¶ï¼Œåªæœ‰æ•°æ®â€”â€”ç‰¹åˆ«æ˜¯è·Ÿé’±æœ‰å…³çš„æ•°æ®ï¼Œæ‰æ˜¯æœ€æœ‰è¯´æœåŠ›çš„è¯æ˜ã€‚å¦‚æœå‰æœŸæ— æ³•æœ‰æ•°æ®æ”¯æ’‘ï¼Œå¯ä»¥å®‰æ’åŸ‹ç‚¹åœ¨ç³»ç»Ÿä¹‹ä¸­ï¼Œé€šè¿‡è·å–ç”¨æˆ·æ•°æ®ï¼Œå¯¹é¡¹ç›®æ•ˆæœè¿›è¡Œå®£åˆ†æï¼Œå¹¶ä»¥æ­¤æ¨åŠ¨é¡¹ç›®çš„æ¼”è¿›ã€‚</li></ul><h3 id="è®¾è®¡åˆ†å±‚ï¼š"><a href="#è®¾è®¡åˆ†å±‚ï¼š" class="headerlink" title="è®¾è®¡åˆ†å±‚ï¼š"></a>è®¾è®¡åˆ†å±‚ï¼š</h3><p>æ•´ä¸ªæ¶æ„è®¾è®¡åˆ†ä¸ºï¼š<strong>åŸºç¡€å±‚</strong>å’Œ<strong>åº”ç”¨å±‚</strong></p><p>åŸºç¡€å±‚ååŸºç¡€è®¾æ–½å»ºè®¾ï¼Œä¸ä¸šåŠ¡ç›¸å…³æ€§è¾ƒä½ã€‚</p><p>åº”ç”¨å±‚æ›´è´´è¿‘ç”¨æˆ·ï¼Œç”¨äºè§£å†³æŸä¸€ä¸ªé—®é¢˜ã€‚</p><p>éƒ¨åˆ†ä¸¤ä¸ªéƒ½æ²¾è¾¹çš„ï¼Œæ ¹æ®ç»éªŒåˆ’åˆ†åˆ°å…¶ä¸­ä¸€ä¸ªã€‚</p><h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><p>ç”±äºå·²ç»è°ˆåˆ°æ¶æ„å±‚çº§ï¼Œå› æ­¤å¾ˆå¤šå†…å®¹ï¼Œå¹¶ä¸ä»…ä»…åªå±äºå‰ç«¯é¢†åŸŸï¼Œæœ‰å¾ˆå¤šå†…å®¹æ˜¯å¤åˆé¢†åŸŸï¼ˆå‰ç«¯ã€åç«¯ã€è¿ç»´ã€æµ‹è¯•ï¼‰ï¼Œå› æ­¤éœ€è¦è´Ÿè´£æ¶æ„çš„äººï¼ŒæŠ€æœ¯æ ˆè¶³å¤Ÿå…¨é¢ï¼Œå¯¹æœªæ¥å‘å±•æœ‰è¶³å¤Ÿçš„å‰ç»æ€§ã€‚</p><p>æ–‡ç« çš„å†…å®¹ç»“æ„ä¸ºï¼šã€é¡¹ç›®ã€‘â€”&gt;ã€è§£å†³çš„é—®é¢˜å’Œå¸¦æ¥çš„å¥½å¤„ã€‘â€”&gt;ã€é¡¹ç›®çš„å®é™…æ„ä¹‰ã€‘</p><h2 id="åŸºç¡€å±‚è®¾è®¡"><a href="#åŸºç¡€å±‚è®¾è®¡" class="headerlink" title="åŸºç¡€å±‚è®¾è®¡"></a>åŸºç¡€å±‚è®¾è®¡</h2><h3 id="è‡ªå»ºGitå¹³å°"><a href="#è‡ªå»ºGitå¹³å°" class="headerlink" title="è‡ªå»ºGitå¹³å°"></a>è‡ªå»ºGitå¹³å°</h3><p>è¿™ä¸ªæ˜¯åŸºç¡€ï¼Œä½¿ç”¨Gitå¹³å°çš„éš¾åº¦éå¸¸ä½ã€‚å¼ºçƒˆå»ºè®®ä½¿ç”¨Gitlabè¿›è¡Œç‰ˆæœ¬ç®¡ç†ï¼Œè‡ªå»ºGitlabéš¾åº¦å¹¶ä¸å¤§ï¼Œæ–¹ä¾¿ç®¡ç†ï¼ŒåŒ…æ‹¬ä»£ç ç®¡ç†ã€æƒé™ç®¡ç†ã€æäº¤æ—¥å¿—æŸ¥è¯¢ï¼Œä»¥åŠè”åŠ¨ä¸€äº›ç¬¬ä¸‰æ–¹æ’ä»¶ã€‚åœ¨<a href="https://class.imooc.com/sale/webfullstack">ã€Šå¤§å‰ç«¯ã€‹</a>çš„è¯¾ç¨‹ä¸­ï¼Œæœ‰ä¸“é—¨çš„ä»‹ç»ï¼Œè¿™é‡Œä¸å†ç´¯è¿°ã€‚</p><blockquote><p>å…¬å¸ä»£ç æ˜¯å…¬å¸çš„é‡è¦èµ„äº§ï¼Œä½¿ç”¨è‡ªå»ºGitlabå¯ä»¥æœ‰æ•ˆä¿æŠ¤å…¬å¸èµ„äº§ã€‚</p></blockquote><p>ç‰ˆæœ¬ç®¡ç†çš„å‡ ä¸ªå…³é”®ç‚¹ï¼š</p><ol><li><p>å‘å¸ƒåä¸å¯å†æ›´æ”¹ï¼šæŒ‡å½“ä¾‹å¦‚1.0.0ç‰ˆæœ¬æˆåŠŸå‘å¸ƒåï¼Œä¸å¯å†æ›´æ”¹1.0.0 tagä¸Šçš„ä»£ç ï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´ç‰ˆæœ¬ç®¡ç†æ··ä¹±ã€‚</p></li><li><p>å…¨è‡ªåŠ¨æµç¨‹å‘å¸ƒï¼›æŒ‡åº”é¿å…å¼€å‘è€…æäº¤åï¼Œæ‰‹åŠ¨ç¼–è¯‘æ‰“åŒ…ç­‰æ“ä½œã€‚æ¢å¥è¯è¯´ï¼Œå¼€å‘äººå‘˜å‘å¸ƒåï¼Œå°†è‡ªåŠ¨å‘å¸ƒåˆ°é¢„å‘å¸ƒ/ç”Ÿäº§ç¯å¢ƒã€‚å¼€å‘äººå‘˜ä¸å’Œç›¸å…³ç¯å¢ƒç›´æ¥æ¥è§¦ã€‚å®ç°è¿™ä¸ªéœ€è¦å‚è€ƒä¸‹é¢çš„CI/CDå¹³å°è‡ªåŠ¨å‘å¸ƒã€‚</p></li><li><p>å¤šç‰ˆæœ¬å¹¶å­˜ï¼›æŒ‡å½“ä¾‹å¦‚å‘å¸ƒ2.0.0ç‰ˆæœ¬åï¼Œ1.0.0ç‰ˆæœ¬çš„ä»£ç åº”ä»ä¿å­˜åœ¨çº¿ä¸Šï¼ˆä¾‹å¦‚CDNï¼‰ï¼Œè¿™æ ·å½“å‡ºç°çº¿ä¸Šbugæ—¶ï¼Œæ–¹ä¾¿å¿«é€Ÿå›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ã€‚<br>æ„ä¹‰ï¼šæé«˜é¡¹ç›®çš„å¯æ§æ€§ã€‚</p></li></ol><h3 id="è‡ªåŠ¨ç¼–è¯‘å‘å¸ƒCI-CDå¹³å°"><a href="#è‡ªåŠ¨ç¼–è¯‘å‘å¸ƒCI-CDå¹³å°" class="headerlink" title="è‡ªåŠ¨ç¼–è¯‘å‘å¸ƒCI/CDå¹³å°"></a>è‡ªåŠ¨ç¼–è¯‘å‘å¸ƒCI/CDå¹³å°</h3><p>è¿™ä¸ªå·¥å…·ç”¨äºåœ¨ä»£ç å‘å¸ƒåï¼Œæ‰§è¡Œä¸€ç³»åˆ—æµç¨‹ï¼Œä¾‹å¦‚è‡ªåŠ¨ç¼–è¯‘æ‰“åŒ…åˆå¹¶ï¼Œç„¶åå†ä»Gitlabå‘å¸ƒåˆ°CDNæˆ–è€…é™æ€èµ„æºæœåŠ¡å™¨ã€‚</p><p>ä½¿ç”¨è¿™ä¸ªå·¥å…·ï¼Œå¯ä»¥è®©ä¸€èˆ¬ç ”å‘äººå‘˜ä¸å…³å¿ƒä»£ç ä¼ åˆ°Gitlabåä¼šå‘ç”Ÿä»€ä¹ˆäº‹æƒ…ï¼Œåªéœ€è¦ä¸“å¿ƒäºå¼€å‘å°±å¯ä»¥äº†ã€‚</p><p>æ„ä¹‰ï¼šè®©ç ”å‘äººå‘˜ä¸“å¿ƒäºç ”å‘ï¼Œå’Œç¯å¢ƒã€è¿ç»´ç­‰äº‹æƒ…è„±é’©ã€‚</p><h3 id="çº¯å‰ç«¯ç‰ˆæœ¬å‘å¸ƒ"><a href="#çº¯å‰ç«¯ç‰ˆæœ¬å‘å¸ƒ" class="headerlink" title="çº¯å‰ç«¯ç‰ˆæœ¬å‘å¸ƒ"></a>çº¯å‰ç«¯ç‰ˆæœ¬å‘å¸ƒ</h3><p>çº¯å‰ç«¯ç‰ˆæœ¬å‘å¸ƒåˆ†ä¸ºä¸¤æ­¥ï¼š</p><p>å‰ç«¯å‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒâ€”â€”æ­¤æ—¶å¯ä»¥é€šè¿‡å¤–ç½‘é“¾æ¥åŠ æ­£ç¡®çš„ç‰ˆæœ¬å·è®¿é—®åˆ°æ–°ç‰ˆæœ¬çš„ä»£ç ï¼Œä½†é¡µé¢ä¸Šçš„èµ„æºè¿˜æ˜¯æ—§ç‰ˆæœ¬ï¼›</p><p>å‰ç«¯é€šè¿‡é…ç½®å·¥å…·ï¼ˆæˆ–è€…æ˜¯ç›´æ¥æ›´æ–°htmlæ–‡ä»¶ï¼‰ï¼Œå°†htmlä¸­å¼•å…¥çš„èµ„æºï¼Œæ”¹ä¸ºæ–°ç‰ˆæœ¬ã€‚</p><p>è§£å†³çš„é—®é¢˜æ˜¯ï¼šå½“å‰ç«¯éœ€è¦å‘å¸ƒæ–°ç‰ˆæœ¬æ—¶ï¼Œå¯ä»¥ä¸ä¾èµ–äºåç«¯ï¼ˆæ ¹æ®å®é™…æƒ…å†µï¼Œä¹Ÿå¯ä»¥ä¸ä¾èµ–äºè¿ç»´ï¼‰ã€‚æ¯•ç«Ÿæœ‰å¾ˆå¤šéœ€æ±‚å¹¶ä¸éœ€è¦åç«¯ä»‹å…¥ï¼Œå•çº¯æ”¹ä¸ªå‰ç«¯ç‰ˆæœ¬åå°±è¦åç«¯å‘å¸ƒä¸€æ¬¡ï¼Œæ˜¾ç„¶æ˜¯ä¸€ä»¶éå¸¸éº»çƒ¦çš„äº‹æƒ…ã€‚</p><p>è¿™ä¸ªéœ€è¦ä¸“é—¨çš„å·¥å…·ï¼Œç”¨äºé…ç½®ç‰ˆæœ¬å‘å¸ƒï¼Œæˆ‘æœ€è¿‘å°±åœ¨å†™è¿™ä¸ªã€‚</p><p>æ„ä¹‰ï¼šæé«˜å‘å¸ƒæ•ˆç‡ï¼Œé™ä½å‘å¸ƒå¸¦æ¥çš„äººå‘˜æ—¶é—´æŸè€—ï¼ˆè¿™äº›éƒ½æ˜¯é’±ï¼‰ï¼Œä¹Ÿå¯ä»¥åœ¨å‰ç«¯ç‰ˆæœ¬å›æ»šçš„æ—¶å€™ï¼Œé€Ÿåº¦æ›´å¿«ã€‚</p><h3 id="ç»Ÿä¸€è„šæ‰‹æ¶"><a href="#ç»Ÿä¸€è„šæ‰‹æ¶" class="headerlink" title="ç»Ÿä¸€è„šæ‰‹æ¶"></a>ç»Ÿä¸€è„šæ‰‹æ¶</h3><p>é€‚ç”¨åœºæ™¯ï¼šæœ‰æ¯”è¾ƒå¤šç‹¬ç«‹ä¸­å°é¡¹ç›®ã€‚</p><p>å¥½å¤„ï¼šå¯ä»¥å‡å°‘å¼€å‘äººå‘˜é…ç½®è„šæ‰‹æ¶å¸¦æ¥çš„æ—¶é—´æŸè€—ï¼ˆç‰¹æ®ŠåŠŸèƒ½å¯ä»¥forkè„šæ‰‹æ¶åå†è‡ªè¡Œå®šåˆ¶ï¼‰ï¼›</p><p>ç»Ÿä¸€é¡¹ç›®ç»“æ„ï¼Œæ–¹ä¾¿ç®¡ç†ï¼Œä¹Ÿé™ä½é¡¹ç›®äº¤æ¥æ—¶å¸¦æ¥çš„éœ€è¦ç†Ÿæ‚‰é¡¹ç›®çš„æ—¶é—´ï¼›</p><p>æ–¹ä¾¿ç»Ÿä¸€æŠ€æœ¯æ ˆï¼Œå¯ä»¥é¢„å…ˆå¼•å…¥å›ºå®šçš„ç»„ä»¶åº“ï¼›</p><p>æ„ä¹‰ï¼šæé«˜å¼€å‘äººå‘˜åœ¨å¤šä¸ªé¡¹ç›®ä¹‹é—´çš„å¿«é€Ÿåˆ‡æ¢èƒ½åŠ›ï¼Œæé«˜é¡¹ç›®å¯ç»´æŠ¤æ€§ï¼Œç»Ÿä¸€å…¬å¸æŠ€æœ¯æ ˆï¼Œé¿å…å› ä¸ºç¯å¢ƒä¸åŒå¯¼è‡´å¥‡æ€ªçš„é—®é¢˜ã€‚</p><h3 id="Nodeä¸­é—´å±‚"><a href="#Nodeä¸­é—´å±‚" class="headerlink" title="Nodeä¸­é—´å±‚"></a>Nodeä¸­é—´å±‚</h3><p>é€‚ç”¨åœºæ™¯ï¼šéœ€è¦SEOä¸”å‰ç«¯ä½¿ç”¨Reactã€vueï¼Œæˆ–å‰ç«¯ä»‹å…¥åç«¯é€»è¾‘ï¼Œç›´æ¥è¯»å–åç«¯æœåŠ¡æˆ–è€…æ•°æ®åº“çš„æƒ…å†µã€‚</p><p>SEOï¼šä»è€…è§ä»æ™ºè€…è§æ™ºï¼Œè™½ç„¶å¾ˆå¤šå…¬å¸å·²ç»ä¸åšäº†ï¼Œä½†é€šå¸¸è®¤ä¸ºï¼Œè¿˜æ˜¯æœ‰ä¸€å®šæ„ä¹‰çš„ï¼ˆç‰¹åˆ«æ˜¯éœ€è¦æœç´¢å¼•æ“å¼•æµçš„æ—¶å€™ï¼‰ï¼Œå› æ­¤Reactæˆ–è€…Vueçš„åŒæ„æ˜¯å¿…é¡»çš„ã€‚å¹¶ä¸”åŒæ„è¿˜å¯ä»¥é™ä½é¦–é¡µç™½å±æ—¶é—´ï¼›</p><p>å‰ç«¯è¯»å–åç«¯æœåŠ¡/æ•°æ®åº“ï¼šå¥½å¤„æ˜¯æé«˜å‰ç«¯çš„å¼€å‘æ•ˆç‡å’Œå¯¹ä¸šåŠ¡çš„æ”¯æŒèƒ½åŠ›ï¼Œç¼ºç‚¹æ˜¯å¯èƒ½å¯¼è‡´P0çº§æ•…éšœã€‚</p><p>æ„ä¹‰ï¼šè®©å‰ç«¯å¯ä»¥ä¾µå…¥åç«¯é¢†åŸŸï¼Œè´¨çš„æå‡å¯¹ä¸šåŠ¡çš„æ”¯æŒèƒ½åŠ›ã€‚</p><h3 id="åŸ‹ç‚¹ç³»ç»Ÿ"><a href="#åŸ‹ç‚¹ç³»ç»Ÿ" class="headerlink" title="åŸ‹ç‚¹ç³»ç»Ÿ"></a>åŸ‹ç‚¹ç³»ç»Ÿ</h3><p>å¼ºçƒˆæ¨èå‰ç«¯åšè‡ªå·±çš„åŸ‹ç‚¹ç³»ç»Ÿã€‚è¿™ä¸ªä¸åŒäºåç«¯çš„æ—¥å¿—ç³»ç»Ÿã€‚</p><p>å‰ç«¯åŸ‹ç‚¹ç³»ç»Ÿçš„å¥½å¤„ï¼š</p><ul><li>è®°å½•æ¯ä¸ªé¡µé¢çš„è®¿é—®é‡ï¼ˆæ—¥å‘¨æœˆå¹´çš„UVã€PVï¼‰ï¼›</li><li>è®°å½•æ¯ä¸ªåŠŸèƒ½çš„ä½¿ç”¨é‡ï¼›</li><li>æ•æ‰æŠ¥é”™æƒ…å†µï¼›</li><li>å›¾è¡¨åŒ–æ˜¾ç¤ºï¼Œæ–¹ä¾¿ç»™å…¶ä»–éƒ¨é—¨å±•ç¤ºï¼›</li></ul><p>åŸ‹ç‚¹ç³»ç»Ÿæ˜¯å‰ç«¯é«˜åº¦ä»‹å…¥ä¸šåŠ¡ï¼ŒæŠŠæ¡ä¸šåŠ¡å‘å±•æƒ…å†µçš„ä¸€æŠŠåˆ©å‰‘ï¼Œé€šè¿‡è¿™ä¸ªç³»ç»Ÿï¼Œæˆ‘ä»¬å¯ä»¥æ¯”åç«¯æ›´æ·±åˆ»çš„æŠŠæ¡ç”¨æˆ·çš„ä¹ æƒ¯ï¼Œä»¥åŠç»™äº§å“ç»ç†ã€è¿è¥ç­‰äººå‘˜æä¾›å‡†ç¡®çš„æ•°æ®ä¾æ®ã€‚å½“æœ‰äº†æ•°æ®åï¼Œå‰ç«¯äººå‘˜å°±å¯ä»¥é’ˆå¯¹æ€§çš„ä¼˜åŒ–åŠŸèƒ½ã€å¸ƒå±€ã€é¡µé¢äº¤äº’é€»è¾‘ã€ç”¨æˆ·ä½¿ç”¨æµç¨‹ã€‚</p><p>åŸ‹ç‚¹ç³»ç»Ÿåº”å’Œä¸šåŠ¡è§£è€¦ï¼Œå¼€å‘äººå‘˜ä½¿ç”¨æ—¶æ³¨å†Œï¼Œç„¶ååœ¨é¡¹ç›®ä¸­å¼•å…¥ã€‚ç„¶ååœ¨åŸ‹ç‚¹ç³»ç»Ÿé‡ŒæŸ¥çœ‹ç›¸å…³æ•°æ®ï¼ˆä¾‹å¦‚ä»¥å°æ—¶ã€æ—¥ã€å‘¨ã€æœˆã€å¹´ä¸ºå‘¨æœŸæŸ¥çœ‹ï¼‰ã€‚</p><p>æ„ä¹‰ï¼šæ•°æ®æ˜¯moneyï¼Œæ•°æ®æ˜¯å…¬å¸çš„ç”Ÿå‘½çº¿ï¼Œæ•°æ®æ˜¯æœ€å¥½çš„æ­¦å™¨ã€‚</p><h3 id="ç›‘æ§å’ŒæŠ¥è­¦ç³»ç»Ÿ"><a href="#ç›‘æ§å’ŒæŠ¥è­¦ç³»ç»Ÿ" class="headerlink" title="ç›‘æ§å’ŒæŠ¥è­¦ç³»ç»Ÿ"></a>ç›‘æ§å’ŒæŠ¥è­¦ç³»ç»Ÿ</h3><p>ç›‘æ§å’ŒæŠ¥è­¦ç³»ç»Ÿåº”åŸºäºåŸ‹ç‚¹ç³»ç»Ÿè€Œå»ºç«‹ï¼Œåœ¨å¦‚ä»¥ä¸‹åœºæ™¯æ—¶è§¦å‘ï¼š</p><ul><li>å½“è®¿é—®é‡æœ‰æ¯”è¾ƒå¤§çš„å˜åŒ–ï¼ˆæ¯”å¦‚æ—¥PV/UVåªæœ‰ä¹‹å‰20%ä»¥ä¸‹ï¼‰æ—¶ï¼Œè‡ªåŠ¨è§¦å‘æŠ¥è­¦ï¼Œå‘é€é‚®ä»¶åˆ°ç›¸å…³äººå‘˜é‚®ç®±ï¼›</li><li>æ¯”å¦‚æŠ¥é”™é‡å¤§å¹…åº¦ä¸Šå‡ï¼ˆæ¯”å¦‚200%æˆ–æ›´é«˜ï¼‰ï¼Œåˆ™è§¦å‘æŠ¥è­¦ï¼›</li><li>å½“ä¸€æ®µæ—¶é—´å†…æ²¡æœ‰ä»»ä½•è®¿é—®é‡ï¼ˆä¸ç¬¦åˆä¹‹å‰çš„æƒ…å†µï¼‰ï¼Œåˆ™è§¦å‘æŠ¥è­¦ï¼›</li><li>æ¯è¿‡ä¸€æ®µæ—¶é—´ï¼Œè‡ªåŠ¨æ±‡æ€»è®¿é—®è€…/æŠ¥é”™è§¦å‘è€…çš„ç›¸å…³ä¿¡æ¯ï¼ˆä¾‹å¦‚ç³»ç»Ÿã€æµè§ˆå™¨ç‰ˆæœ¬ç­‰ï¼‰ï¼›</li></ul><p>å»ºè®¾è¿™ä¸ªç³»ç»Ÿçš„å¥½å¤„åœ¨äºï¼Œæå‰å‘ç°ä¸€äº›ä¸å®¹æ˜“å‘ç°çš„bugï¼ˆéœ€è¦åŸ‹ç‚¹åšçš„æ¯”è¾ƒæ‰å®ï¼‰ã€‚æœ‰ä¸€äº›çº¿ä¸Šbugï¼Œå› ä¸ºç”¨æˆ·ç¯å¢ƒç‰¹æ®Šï¼Œå¯¼è‡´æ— æ³•è¢«å¼€å‘äººå‘˜å’Œæµ‹è¯•äººå‘˜å‘ç°ã€‚ä½†å…¶ä¸­ä¸€éƒ¨åˆ†bugåˆå› ä¸ºä¸æ¶‰åŠèµ„é‡‘ï¼Œå¹¶ä¸ä¼šå¯¼è‡´èµ„æŸï¼ˆå› æ­¤ä¹Ÿä¸ä¼šè¢«åç«¯çš„ç›‘æ§ç³»ç»Ÿæ‰€å‘ç°ï¼‰ï¼Œè¿™æ ·çš„bugéå¸¸å®¹æ˜“å½±å“é¡¹ç›®é‡ŒæŸä¸ªé“¾è·¯çš„æ­£å¸¸ä½¿ç”¨ã€‚</p><p>æ„ä¹‰ï¼šæé«˜é¡¹ç›®çš„ç¨³å®šæ€§ï¼Œæé«˜å¯¹ä¸šåŠ¡çš„æŠŠæ§èƒ½åŠ›ã€‚é™ä½bugæ•°ï¼Œé™ä½èµ„æŸçš„å¯èƒ½æ€§ï¼Œæå‰å‘ç°æŸäº›åŠŸèƒ½çš„bugï¼ˆåœ¨å·¥å•åˆ°æ¥ä¹‹å‰ï¼‰</p><h3 id="å®‰å…¨ç®¡ç†"><a href="#å®‰å…¨ç®¡ç†" class="headerlink" title="å®‰å…¨ç®¡ç†"></a>å®‰å…¨ç®¡ç†</h3><p>å‰ç«¯çš„å®‰å…¨ç®¡ç†ï¼Œé€šå¸¸è¦ä¾èµ–äºåç«¯ï¼Œè‡³äºåªè·Ÿå•çº¯æœ‰å…³ç³»çš„ä¾‹å¦‚dom.innerHTML= â€˜xxx â€˜è¿™ç§å¤ªåŸºç¡€ã€‚</p><p>å®‰å…¨ç®¡ç†çš„å¾ˆéš¾ä»æ¶æ„è®¾è®¡ä¸Šå®Œå…¨é¿å…ï¼Œä½†è¿˜æ˜¯æœ‰ä¸€å®šè§£å†³æ–¹æ¡ˆçš„ï¼Œå¸¸è§å®‰å…¨é—®é¢˜å¦‚ä¸‹ï¼š</p><ul><li>XSSæ³¨å…¥ï¼šå¯¹ç”¨æˆ·è¾“å…¥çš„å†…å®¹ï¼Œéœ€è¦è½¬ç ï¼ˆå¤§éƒ¨åˆ†æ—¶å€™è¦serverç«¯æ¥å¤„ç†ï¼Œå¶å°”ä¹Ÿéœ€è¦å‰ç«¯å¤„ç†ï¼‰ï¼Œç¦æ­¢ä½¿ç”¨evalå‡½æ•°ï¼›</li><li>httpsï¼šè¿™ä¸ªæ˜¾ç„¶æ˜¯å¿…é¡»çš„ï¼Œå¥½å¤„éå¸¸å¤šï¼›</li><li>CSRFï¼šè¦æ±‚serverç«¯åŠ å…¥CSRFçš„å¤„ç†æ–¹æ³•ï¼ˆè‡³å°‘åœ¨å…³é”®é¡µé¢åŠ å…¥ï¼‰ï¼›</li><li>æ„ä¹‰ï¼šå‡å°‘å®‰å…¨æ¼æ´ï¼Œé¿å…ç”¨æˆ·å—åˆ°æŸå¤±ï¼Œé¿å…é­é‡æ¶æ„æ”»å‡»ï¼Œå¢åŠ ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå®‰å…¨æ€§ã€‚</li></ul><h3 id="ESLint"><a href="#ESLint" class="headerlink" title="ESLint"></a>ESLint</h3><p>ESLintçš„å¥½å¤„å¾ˆå¤šï¼š</p><ul><li>é™ä½ä½çº§bugï¼ˆä¾‹å¦‚æ‹¼å†™é—®é¢˜ï¼‰å‡ºç°çš„æ¦‚ç‡ï¼›</li><li>å¢åŠ ä»£ç çš„å¯ç»´æŠ¤æ€§ï¼Œå¯é˜…è¯»æ€§ï¼›</li><li>ç¡¬æ€§ç»Ÿä¸€ä»£ç é£æ ¼ï¼Œå›¢é˜Ÿåä½œèµ·æ¥æ—¶æ›´è½»æ¾ï¼›</li></ul><p>æ€»çš„æ¥è¯´ï¼ŒESLintæ¨èç›´æ¥é…ç½®åˆ°è„šæ‰‹æ¶ä¹‹ä¸­ï¼Œå¯¹æˆ‘ä»¬æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§çš„å¸®åŠ©ä¼šå¾ˆå¤§ã€‚å¯ä»¥è€ƒè™‘åœ¨ä¸Šä¼ åˆ°gitlabæ—¶ï¼Œç¡¬æ€§è¦æ±‚ESLintæ ¡éªŒï¼Œé€šè¿‡çš„æ‰å…è®¸ä¸Šä¼ ã€‚</p><p>æ„ä¹‰ï¼šæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ï¼Œé™ä½å›¢é˜Ÿåä½œçš„æˆæœ¬ã€‚</p><h3 id="ç°åº¦å‘å¸ƒ"><a href="#ç°åº¦å‘å¸ƒ" class="headerlink" title="ç°åº¦å‘å¸ƒ"></a>ç°åº¦å‘å¸ƒ</h3><p>ç°åº¦å‘å¸ƒæ˜¯å¤§å‹é¡¹ç›®åœ¨å‘å¸ƒæ—¶çš„å¸¸è§æ–¹æ³•ï¼ŒæŒ‡åœ¨å‘å¸ƒç‰ˆæœ¬æ—¶ï¼Œåˆå§‹æƒ…å†µä¸‹ï¼Œåªå…è®¸å°æ¯”ä¾‹ï¼ˆæ¯”å¦‚1~5%æ¯”ä¾‹çš„ç”¨æˆ·ä½¿ç”¨ï¼‰ï¼Œè‹¥å‡ºç°é—®é¢˜æ—¶ï¼Œå¯ä»¥å¿«é€Ÿå›æ»šä½¿ç”¨è€ç‰ˆæœ¬ï¼Œé€‚ç”¨äºä¸»é“¾è·¯å’Œè®¿é—®é‡æå¤§çš„é¡µé¢ã€‚</p><p>å¥½å¤„æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li>ç”Ÿäº§ç¯å¢ƒæ¯”å¼€å‘ç¯å¢ƒå¤æ‚ï¼Œç°åº¦å‘å¸ƒæ—¶å¯ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒå°èŒƒå›´å°è¯•è§‚å¯Ÿæ–°ç‰ˆæœ¬æ˜¯å¦å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œå³ä½¿å‡ºé—®é¢˜ï¼Œä¹Ÿå¯ä»¥æ§åˆ¶æŸå¤±ã€‚</li><li>å¯¹äºå¤§ç‰ˆæœ¬æ›´æ–°ï¼Œå¯ä»¥å…ˆç°åº¦ä¸€éƒ¨åˆ†ï¼Œè§‚å¯ŸåŸ‹ç‚¹æ•ˆæœå’Œç”¨æˆ·åé¦ˆï¼ˆå³æ‰€è°“çš„æŠ¢å…ˆè¯•ç”¨ç‰ˆï¼‰ã€‚å‡å¦‚æ•ˆæœå¹¶ä¸å¥½ï¼Œé‚£ä¹ˆå›æ»šåˆ°è€ç‰ˆæœ¬ä¹Ÿå¯ä»¥åŠæ—¶æ­¢æŸï¼›</li><li>å½“æˆ‘ä»¬éœ€è¦éªŒè¯æŸäº›æƒ³æ³•æˆ–é—®é¢˜çš„æ—¶å€™ï¼Œå¯ä»¥å…ˆç°åº¦ä¸€éƒ¨åˆ†ï¼Œå¿«é€ŸéªŒè¯æ•ˆæœå¦‚ä½•ï¼Œç„¶åæŸ¥æ¼è¡¥ç¼ºæˆ–è€…é’ˆå¯¹æ€§ä¼˜åŒ–ï¼›</li></ul><p>ç°åº¦å‘å¸ƒé€šå¸¸åˆ†ä¸ºå¤šä¸ªé˜¶æ®µï¼Œç°åº¦å‘å¸ƒä¸€å®šè¦å…è®¸é…ç½®æŸäº›IP/è´¦å·è®¿é—®æ—¶ï¼Œå¯ä»¥ç›´æ¥è®¿é—®åˆ°ç°åº¦ç‰ˆæœ¬ã€‚</p><p>æ„ä¹‰ï¼šé™ä½é£é™©ï¼Œæé«˜å‘å¸ƒçµæ´»åº¦ã€‚</p><h3 id="å‰åç«¯åˆ†ç¦»"><a href="#å‰åç«¯åˆ†ç¦»" class="headerlink" title="å‰åç«¯åˆ†ç¦»"></a>å‰åç«¯åˆ†ç¦»</h3><p>è¿™ä¸ªå¹¶ä¸æ˜¯æŒ‡å¸¸è§çš„å‰åç«¯åˆ†ç¦»ï¼Œè€Œæ˜¯æŒ‡åœ¨åˆ†é…å‰åç«¯ç®¡æ§çš„é¢†åŸŸã€‚</p><p>ä¸­å°é¡¹ç›®å¸¸è§çš„æƒ…å†µæ˜¯åç«¯åªæä¾›æ¥å£å’Œè®©æŸä¸ªurlæŒ‡å‘æŸä¸ªhtmlï¼Œå‰ç«¯è´Ÿè´£htmlã€cssã€jsç­‰é™æ€èµ„æºã€‚</p><p>ä½†å¤§å‹é¡¹ç›®å¹¶ä¸å»ºè®®è¿™ä¹ˆåšï¼Œå»ºè®®å‰ç«¯è´Ÿè´£é™¤htmlä»¥å¤–çš„é™æ€èµ„æºï¼Œè€Œhtmläº¤ç»™åç«¯å¤„ç†ï¼Œç†ç”±æœ‰å¾ˆå¤šï¼š</p><p>åç«¯è¿›è¡Œæ¸²æŸ“ï¼Œæ–¹ä¾¿ç»Ÿä¸€æ’å…¥ä¸€äº›ä»£ç å’Œèµ„æºï¼Œä¾‹å¦‚åŸ‹ç‚¹jsï¼Œç›‘æ§jsï¼Œå›½é™…åŒ–æ–‡æœ¬èµ„æºï¼Œé¡µé¢æ ‡è¯†ç¬¦ç­‰ã€‚è¿™äº›é€šå¸¸æ˜¯åç«¯é€šè¿‡è°ƒç”¨æŸäº›æœåŠ¡ç›´æ¥å†™å…¥çš„ï¼›<br>å½“é¡µé¢éœ€è¦ç»Ÿä¸€çš„å¤´å°¾æ—¶ï¼ˆå‚è€ƒæ·˜å®é‡Œæˆ‘çš„æ·˜å®é¡µé¢ï¼‰ï¼Œå‰ç«¯ä¸åº”è¯¥å…³æ³¨è¿™äº›è·Ÿå½“å‰é¡µé¢æ— å…³çš„ä¸œè¥¿ï¼›</p><p>æŸäº›ä¸œè¥¿ï¼Œå¦‚æœé€šè¿‡htmlæ¥ç®¡ç†ï¼Œé‚£ä¹ˆè€¦åˆåº¦å¤ªé«˜äº†ï¼Œè¿èƒŒäº†è§£è€¦å’Œåˆ†ç¦»çš„åŸåˆ™ï¼›</p><p>å‰ç«¯ç‰ˆæœ¬å‘å¸ƒåœ¨åç«¯å¼•å…¥æŸç§åŠŸèƒ½æ¨¡å—åï¼Œå¯ä»¥ä»å•ç‹¬çš„é¡µé¢æ§åˆ¶å‰ç«¯å‘å¸ƒå†…å®¹ï¼Œæ¯”æ›´æ–°htmlæ›´æ–¹ä¾¿ï¼Œä¹Ÿåˆ©äºç°åº¦å‘å¸ƒï¼›</p><p>æ„ä¹‰ï¼šæ›´è§„èŒƒçš„è¿›è¡Œé¡µé¢ç®¡ç†ï¼Œé™ä½é¡µé¢å’ŒåŠŸèƒ½çš„è€¦åˆåº¦ï¼Œå‡å°‘å¤æ‚é¡µé¢çš„ç¯å¢ƒé…ç½®æ—¶é—´ã€‚</p><h3 id="Mock"><a href="#Mock" class="headerlink" title="Mock"></a>Mock</h3><p>Mockä¹Ÿæ˜¯å¸¸è§å‰ç«¯ç³»ç»Ÿä¹‹ä¸€ï¼Œç”¨äºè§£å†³åœ¨åç«¯æ¥å£æœªå¥½æ—¶ï¼Œç”Ÿæˆè¿”å›çš„æ•°æ®ã€‚</p><p>æˆ‘ä¸ªäººå»ºè®®DOCleverç­‰å¹³å°å·¥å…·æ¥Mockï¼Œæ€è·¯å¦‚ä¸‹ï¼š</p><p>å½“åœ¨å¼€å‘ç¯å¢ƒä¸‹ï¼Œè®¿é—®é“¾æ¥é€šå¸¸æ˜¯localhost:8000/index.htmlï¼Œæ­¤æ—¶è®¾ç½®æˆä¸º<code>å¼€å‘ä¸­</code>ã€‚</p><p>å½“çº¿ä¸Šæ¥å£å¯ä»¥è·å–åˆ°æ•°æ®åï¼Œä¿®æ”¹mockç³»ç»Ÿæ¥å£çš„çŠ¶æ€<code>å¼€å‘å·²å®Œæˆ</code>ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°ç”Ÿäº§æ¥å£ã€‚</p><p>æ„ä¹‰ï¼šåœ¨å‰åç«¯å¹¶è¡Œå¼€å‘æ—¶ï¼Œé™ä½æ²Ÿé€šäº¤æµæˆæœ¬ï¼Œæ–¹ä¾¿å¼€å‘å®Œæ¯•åç›´æ¥å¯¹æ¥ã€‚</p><h3 id="å®šæœŸå¤‡ä»½"><a href="#å®šæœŸå¤‡ä»½" class="headerlink" title="å®šæœŸå¤‡ä»½"></a>å®šæœŸå¤‡ä»½</h3><p>å¤‡ä»½æ˜¯å¸¸è¢«å¿½ç•¥çš„ä¸€ä»¶äº‹æƒ…ï¼Œä½†å½“æˆ‘ä»¬é‡è§æ¯ç­æ€§åœºæ™¯æ—¶ï¼Œç¼ºå°‘å¤‡ä»½å¸¦æ¥çš„æŸå¤±æ˜¯éå¸¸å¤§çš„ï¼Œå¸¸è§åœºæ™¯ï¼š</p><ul><li>æœåŠ¡å™¨æŸåï¼Œå¯¼è‡´å­˜åœ¨è¯¥æœåŠ¡å™¨ä¸Šçš„å†…å®¹å…¨éƒ¨å®Œè›‹ï¼›</li><li>è§¦å‘æŸè‡´å‘½bugæˆ–è€…é”™è¯¯æ“ä½œï¼ˆä¾‹å¦‚rm -fï¼‰ï¼Œå¯¼è‡´æ–‡ä»¶å’Œæ•°æ®å…¨éƒ¨æ¶ˆå¤±ï¼›</li><li>æ•°æ®åº“å‡ºç°é”™è¯¯æ“ä½œæˆ–å‡ºç°é—®é¢˜ï¼Œå¯¼è‡´ç”¨æˆ·æ•°æ®ã€å…¬å¸èµ„äº§é­å—ä¸¥é‡æŸå¤±ï¼›</li></ul><p>æ€»çš„æ¥è¯´ï¼Œæ²¡äººæƒ³é‡è§è¿™æ ·çš„åœºæ™¯ï¼Œä½†æˆ‘ä»¬å¿…é¡»è€ƒè™‘è¿™ç§æç«¯æƒ…å†µçš„å‘ç”Ÿï¼Œå› æ­¤éœ€è¦ä»æ¶æ„å±‚é¢è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å¸¸è§æ–¹æ³•æ˜¯å®šæœŸå¤‡ä»½ã€å¤šæœºå¤‡ä»½ã€å®¹ç¾ç³»ç»Ÿå»ºè®¾ç­‰ã€‚</p><p>æ„ä¹‰ï¼šé¿å…åœ¨é­é‡æç«¯åœºæ™¯æ—¶ï¼Œç»™å…¬å¸å¸¦æ¥ä¸å¯ä¼°é‡çš„æŸå¤±ã€‚</p><h2 id="åº”ç”¨å±‚è®¾è®¡"><a href="#åº”ç”¨å±‚è®¾è®¡" class="headerlink" title="åº”ç”¨å±‚è®¾è®¡"></a>åº”ç”¨å±‚è®¾è®¡</h2><h3 id="å¤šé¡µå’Œå•é¡µ"><a href="#å¤šé¡µå’Œå•é¡µ" class="headerlink" title="å¤šé¡µå’Œå•é¡µ"></a>å¤šé¡µå’Œå•é¡µ</h3><p>é™¤äº†ç‰¹æ®Šåœºæ™¯ï¼Œé€šå¸¸æ¨èä½¿ç”¨ä¸»æµå‰ç«¯æ¡†æ¶Vue &amp; React + SSRé¦–å±ä¼˜åŒ–ã€‚ç†ç”±å¦‚ä¸‹ï¼š</p><ul><li>ä¸»æµé¡¹ç›®çš„æŠ€æœ¯å·²ç»éå¸¸çš„æˆç†Ÿï¼Œå—ä¼—å¹¿ï¼Œè€Œä¸”æ–‡æ¡£å…¨</li><li>SSRæŠ€æœ¯æœ‰åˆ©äºæå‡æ•´ä½“ç”¨æˆ·æ„ŸçŸ¥ä¸ä½“éªŒï¼Œå¯¹äºçº¯åå°çš„é¡¹ç›®ä¸åšå¼ºåˆ¶çš„è¦æ±‚</li><li>æ— è®ºæ˜¯Vue è¿˜æ˜¯ Reactï¼Œåœ¨è·¨ç«¯è·¨ç•Œéƒ¨åˆ†çš„ç”Ÿæ€éƒ½å»ºè®¾çš„éå¸¸ä¸é”™ï¼Œå¯ä»¥æ¨ªå‘è¿›è¡Œæ‰©å±•</li></ul><p>æ„ä¹‰ï¼šé™ä½é•¿æœŸé¡¹ç›®è¿­ä»£ç»´æŠ¤çš„éš¾åº¦ï¼Œ</p><h3 id="ä»¥åº”ç”¨ä¸ºå•ä½åˆ’åˆ†å‰ç«¯é¡¹ç›®"><a href="#ä»¥åº”ç”¨ä¸ºå•ä½åˆ’åˆ†å‰ç«¯é¡¹ç›®" class="headerlink" title="ä»¥åº”ç”¨ä¸ºå•ä½åˆ’åˆ†å‰ç«¯é¡¹ç›®"></a>ä»¥åº”ç”¨ä¸ºå•ä½åˆ’åˆ†å‰ç«¯é¡¹ç›®</h3><p>åœ¨é¡¹ç›®æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œå°†æ‰€æœ‰é¡µé¢çš„å‰ç«¯æ–‡ä»¶æ”¾å…¥åˆ°åŒä¸€ä¸ªä»£ç ä»“åº“é‡Œï¼Œæˆ‘ä¹‹å‰å‚ä¸è¿‡ä¸€å®¶ä¼ä¸šçš„å‰ç«¯é¡¹ç›®å¼€å‘ï¼Œå‘ç°å…¶å°±æ˜¯è¿™ä¹ˆåšçš„ã€‚æ ¹æ®ä½¿ç”¨ç»éªŒæ¥çœ‹ï¼Œå­˜åœ¨å¾ˆå¤šé—®é¢˜ï¼š</p><p>ä¼šæå¤§çš„å¢åŠ ä»£ç çš„ç»´æŠ¤éš¾åº¦ï¼›</p><ul><li>é¡¹ç›®ä¼šå˜å¾—å¾ˆä¸‘é™‹ï¼›</li><li>ä¸æ–¹ä¾¿æƒé™ç®¡ç†ï¼Œå®¹æ˜“é€ æˆé¡µé¢è¯¯æ›´æ”¹æˆ–ä»£ç æ³„å¯†ï¼›</li><li>ä»»ä½•äººéƒ½æœ‰æƒåˆ©æ”¹ä»»ä½•ä»–èƒ½çœ‹åˆ°çš„é¡µé¢ï¼ˆåœ¨åˆå¹¶ä»£ç çš„æ—¶å€™ï¼Œç®¡ç†äººå‘˜å¹¶ä¸èƒ½ç¡®å®šä»–æœ¬æ¬¡ä¿®æ”¹çš„é¡µé¢æ˜¯å¦æ˜¯éœ€æ±‚é‡Œä»–åº”è¯¥æ”¹çš„é¡µé¢ï¼‰ï¼›</li><li>å‘å¸ƒæˆæœ¬é«˜ï¼Œå³ä½¿æ”¹ä¸€ä¸ªé¡µé¢ï¼Œä¹Ÿéœ€è¦å‘å¸ƒæ‰€æœ‰èµ„æºï¼›</li></ul><p>å› æ­¤ï¼Œæˆ‘ä»¬åº”è¯¥é¿å…è¿™ç§ç°è±¡çš„å‘ç”Ÿï¼Œä¸ªäººæ¨èä»¥åº”ç”¨ä¸ºå•ä½è¿›è¡Œå¼€å‘ã€å‘å¸ƒã€‚æ‰€è°“åº”ç”¨å³æŒ‡ä¸€ä¸ªä¸šåŠ¡æ¶‰åŠåˆ°çš„å‰åç«¯ä»£ç ï¼Œå¥½å¤„å¾ˆå¤šï¼š</p><ul><li>æ–¹ä¾¿è¿›è¡Œç®¡ç†ï¼Œå½“æŸä¸ªä¸šåŠ¡æœ‰éœ€æ±‚å˜æ›´æ—¶ï¼Œå¯ä»¥åªç»™ç ”å‘äººå‘˜è¯¥ä¸šåŠ¡å‰ç«¯åº”ç”¨çš„developeræƒé™ï¼›</li><li>åœ¨éœ€è¦å‘å¸ƒæŸä¸šåŠ¡æ—¶ï¼Œåªéœ€è¦å‘å¸ƒè¯¥ä¸šåŠ¡çš„æ‰€å±åº”ç”¨å³å¯ï¼›</li></ul><p>æ„ä¹‰ï¼šè§„èŒƒé¡¹ç›®ï¼Œå¢åŠ ä»£ç çš„å®‰å…¨æ€§ï¼Œé™ä½é¡¹ç›®ç»´æŠ¤æˆæœ¬ã€‚</p><h3 id="åŸºç¡€ç»„ä»¶åº“çš„å»ºè®¾"><a href="#åŸºç¡€ç»„ä»¶åº“çš„å»ºè®¾" class="headerlink" title="åŸºç¡€ç»„ä»¶åº“çš„å»ºè®¾"></a>åŸºç¡€ç»„ä»¶åº“çš„å»ºè®¾</h3><p>è¿™ä¸ªè›®åŸºç¡€çš„ï¼Œå¯¹äºç»„ä»¶åº“çš„å»ºè®¾ï¼Œä¸å»ºè®®ç ”å‘äººå‘˜è¾ƒå°‘æ—¶å»åšè¿™ä»¶äº‹æƒ…ï¼Œä¸“èŒå‰ç«¯å¼€å‘äººæ•°å°‘äº10äººæ—¶ï¼Œå»ºè®®ä½¿ç”¨æ¯”è¾ƒé è°±çš„ç¬¬ä¸‰æ–¹UIåº“ï¼Œä¾‹å¦‚Antdï¼Œè¿™æ ·æ€§ä»·æ¯”æ›´é«˜ã€‚</p><p>è®¾è®¡åŸºç¡€ç»„ä»¶åº“çš„å‰æï¼Œæ˜¯è¦æ±‚ç»Ÿä¸€æŠ€æœ¯æ ˆï¼Œè¿™æ ·æ‰èƒ½æœ€å¤§åŒ–åŸºç¡€ç»„ä»¶åº“çš„æ•ˆç›Šã€‚ç»„ä»¶åº“å»ºè®®ä»¥ä½¿ç”¨ä»¥ä¸‹å‚è€ƒæ ‡å‡†ï¼š</p><ul><li>ä½¿ç”¨tsï¼›</li><li>å¯æ‰©å±•æ€§å¼ºï¼›</li><li>é€‚ç”¨ç¨‹åº¦é«˜ï¼›</li><li>æ–‡æ¡£æ¸…æ¥šè¯¦ç»†ï¼›</li><li>ç‰ˆæœ¬éš”ç¦»ï¼Œå°ç‰ˆæœ¬ä¼˜åŒ–åŠ åŠŸèƒ½ï¼Œå¤§æ”¹éœ€è¦å¤§ç‰ˆæœ¬æ›´æ–°ï¼›</li><li>å’ŒUIåè°ƒç»Ÿä¸€ï¼Œè¦æ±‚UIäº¤äº’å‚ä¸è¿›æ¥ï¼›</li></ul><p>æ€»çš„æ¥è¯´ï¼Œå»ºè®¾èµ·æ¥åï¼Œåˆ©å¤§äºå¼Šï¼Œä½†æ˜¯éœ€è¦ä¸“äººç»´æŠ¤ï¼Œå› æ­¤è¿˜æ˜¯æœ‰ä¸€å®šæˆæœ¬çš„ã€‚</p><p>æ„ä¹‰ï¼šç»Ÿä¸€ä¸åŒ/ç›¸åŒäº§å“çº¿ä¹‹é—´çš„é£æ ¼ï¼Œç»™ç”¨æˆ·æ›´å¥½çš„ä½“éªŒï¼Œå‡å°‘å•æ¬¡å¼€å‘ä¸­å†™UIç»„ä»¶æ—¶æµªè´¹çš„æ—¶é—´å’ŒäººåŠ›ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚</p><h3 id="æŠ€æœ¯æ ˆç»Ÿä¸€"><a href="#æŠ€æœ¯æ ˆç»Ÿä¸€" class="headerlink" title="æŠ€æœ¯æ ˆç»Ÿä¸€"></a>æŠ€æœ¯æ ˆç»Ÿä¸€</h3><p>å‰ç«¯æœ‰ä¸‰å¤§ä¸»æµæ¡†æ¶ï¼Œè¿˜æœ‰å…¼å®¹æ€§æœ€å¼ºjQueryï¼Œä»¥åŠå„ç§ç¬¬ä¸‰æ–¹åº“ï¼ŒUIæ¡†æ¶ã€‚å› æ­¤é¡¹ç›®éœ€æ±‚å¦‚æœå¤æ‚ä¸€äº›ï¼Œå¾ˆå®¹æ˜“å½¢æˆä¸€ä¸ªå¤§æ‚çƒ©ã€‚å› æ­¤å‰ç«¯çš„æŠ€æœ¯æ ˆå¿…é¡»ç»Ÿä¸€ï¼Œå…·ä½“æ¥è¯´ï¼Œå»ºè®®å®ç°ä»¥ä¸‹ä¸¾æªï¼š</p><ul><li>ä¸‰å¤§æ¡†æ¶é€‰å‹å…¶ä¸€ï¼Œå›¢é˜Ÿæ°´å¹³ä¸€èˆ¬æ¨èVueã€æ°´å¹³è¾ƒå¥½æ¨èReactï¼Œå¯¹å¤–é¡¹ç›®é€‰Reactæˆ–è€…ngï¼›</li><li>éœ€è¦å…¼å®¹IE8æˆ–æ›´è€ç‰ˆæœ¬æ—¶ï¼Œå»ºè®®ä½¿ç”¨jQueryï¼›</li><li>ç»„ä»¶åº“è‡ªå»ºæˆ–è€…ç»Ÿä¸€é€‰æ‹©ä¸€ä¸ªå›ºå®šçš„ç¬¬ä¸‰æ–¹ï¼›</li><li>ä¸€äº›ç‰¹æ®Šç¬¬ä¸‰æ–¹åº“ç»Ÿä¸€ä½¿ç”¨ä¸€ä¸ªç‰ˆæœ¬ï¼Œä¾‹å¦‚éœ€è¦ä½¿ç”¨åœ°å›¾æ—¶ï¼Œå›ºå®šä½¿ç”¨é«˜å¾·æˆ–ç™¾åº¦æˆ–è…¾è®¯åœ°å›¾ï¼›</li><li>åŸºç¡€è®¾æ–½å»ºè®¾åº”é¿å…é‡å¤é€ è½®å­ï¼Œæ‰€æœ‰å›¢é˜Ÿå°½é‡å…±ç”¨ï¼Œå¹¶æœ‰ä¸“é—¨çš„å‰ç«¯å¹³_å°è´Ÿè´£ç»Ÿä¸€è¿™äº›ä¸œè¥¿ï¼Œå¯¹äºç‰¹æ®Šéœ€æ±‚ï¼Œå¯ä»¥æ–°å»ºï¼Œä½†åº”å½“æœ‰è¯´æœåŠ›ï¼›</li></ul><p>æ€»çš„æ¥è¯´ï¼ŒæŠ€æœ¯æ ˆç»Ÿä¸€çš„å¥½å¤„å¾ˆå¤šï¼Œå¯ä»¥æœ‰æ•ˆæé«˜å¼€å‘æ•ˆç‡ï¼Œé™ä½é‡å¤é€ è½®å­äº§ç”Ÿçš„æˆæœ¬ã€‚</p><p>æ„ä¹‰ï¼šæ–¹ä¾¿æ‹›äººï¼Œç®€åŒ–å›¢é˜Ÿæˆå‘˜åŸ¹å…»æˆæœ¬ï¼Œä»¥åŠæé«˜é¡¹ç›®çš„å¯æŒç»­æ€§ã€‚</p><h3 id="æµè§ˆå™¨å…¼å®¹"><a href="#æµè§ˆå™¨å…¼å®¹" class="headerlink" title="æµè§ˆå™¨å…¼å®¹"></a>æµè§ˆå™¨å…¼å®¹</h3><p>å¸¸è§çš„é—®é¢˜æ˜¯IE6ã€7ã€8ï¼Œä»¥åŠéƒ¨åˆ†å°ä¼—æµè§ˆå™¨ï¼ˆPCå’Œæ‰‹æœºï¼‰äº§ç”Ÿçš„å¥‡æ€ªé—®é¢˜ã€‚å› æ­¤åº”è¯¥è€ƒè™‘ç»Ÿä¸€è§£å†³æ–¹æ¡ˆï¼Œé¿å…bugçš„é‡å¤äº§ç”Ÿã€‚å¸¸è§è§£å†³æ–¹æ¡ˆæœ‰ï¼š<br>é…ç½®postcssï¼Œè®©æŸäº›csså¢åŠ å…¼å®¹æ€§å‰ç¼€ï¼›</p><ul><li>å†™ä¸€ä¸ªwepbackçš„loaderï¼Œå¤„ç†æŸäº›ç‰¹æ®Šåœºæ™¯ï¼›</li><li>è§„èŒƒå›¢é˜Ÿä»£ç ï¼Œä½¿ç”¨æ›´ç¨³å®šçš„å†™æ³•ï¼ˆä¾‹å¦‚ç§»åŠ¨ç«¯é¿å…ä½¿ç”¨fixedè¿›è¡Œå¸ƒå±€ï¼‰ï¼›</li><li>å¯¹å¸¸è§é—®é¢˜ã€ç–‘éš¾é—®é¢˜ï¼Œæ€»ç»“è§£å†³æ–¹æ¡ˆå¹¶å›¢é˜Ÿå…±äº«ï¼›</li><li>å»ºè®®æˆ–å¼•å¯¼ç”¨æˆ·ä½¿ç”¨é«˜ç‰ˆæœ¬æµè§ˆå™¨ï¼ˆæ¯”å¦‚chromeï¼‰ï¼›</li></ul><p>æ„ä¹‰ï¼šé¿å…æµè§ˆå™¨ç¯å¢ƒäº§ç”Ÿçš„bugï¼Œä»¥åŠæ’æŸ¥æ­¤ç±»bugæ‰€æµªè´¹çš„å¤§é‡æ—¶é—´ã€‚</p><h3 id="å†…å®¹å¹³å°å»ºè®¾"><a href="#å†…å®¹å¹³å°å»ºè®¾" class="headerlink" title="å†…å®¹å¹³å°å»ºè®¾"></a>å†…å®¹å¹³å°å»ºè®¾</h3><p>ä¸ºäº†æé«˜å…¬å¸å†…éƒ¨çš„æ²Ÿé€šæ•ˆç‡ï¼Œæ€»ç»“ç»éªŒï¼Œä»¥åŠä¿å¯†åŸå› ã€‚åº”å»ºè®¾ä¸€ä¸ªå†…éƒ¨è®ºå›+åšå®¢ç«™ç‚¹ã€‚å…¶å…·å¤‡çš„å¥½å¤„å¦‚ä¸‹ï¼š</p><ul><li>å¯ä»¥è®°å½•å…¬å¸çš„å†å²ï¼›</li><li>ç ”å‘åŒå­¦ä¹‹é—´åˆ†äº«ç»éªŒï¼›</li><li>æ€»ç»“è½¬è½½ä¸€äº›å¤–ç•Œæ¯”è¾ƒç²¾å“çš„æ–‡ç« ï¼Œæé«˜å¤§å®¶çš„çœ¼ç•Œï¼›</li><li>å¢åŠ å…¬å¸å†…éƒ¨åŒå­¦çš„äº¤æµï¼Œæœ‰åˆ©äºå…¬å¸çš„å›¢é˜Ÿå’Œæ–‡åŒ–å»ºè®¾ï¼›</li><li>å¯¹æŸäº›æŠ€æœ¯é—®é¢˜å¯ä»¥è¿›è¡Œè®¨è®ºï¼Œå‡å°‘å› æ²¡æœ‰è¾¾æˆå…±è¯†å¸¦æ¥çš„æ²Ÿé€šæŸè€—ï¼›</li></ul><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œå¤§å‹äº’è”ç½‘å…¬å¸é€šå¸¸éƒ½æœ‰è¿™æ ·ä¸€ä¸ªå†…éƒ¨è®ºå›å’Œåšå®¢ç«™ç‚¹ã€‚å…¶é™ä½äº†å…¬å¸çš„æ²Ÿé€šå’Œäº¤æµæˆæœ¬ï¼Œä¹Ÿå¢åŠ äº†å…¬å¸çš„æŠ€æœ¯ç§¯ç´¯ã€‚</p><p>æ„ä¹‰ï¼šåšå®¢å¢å¼ºæŠ€æœ¯ç§¯ç´¯ï¼Œè®ºå›å¢å¼ºå…¬å¸å†…éƒ¨æ²Ÿé€šèƒ½åŠ›ã€‚</p><h3 id="æƒé™ç®¡ç†å¹³å°"><a href="#æƒé™ç®¡ç†å¹³å°" class="headerlink" title="æƒé™ç®¡ç†å¹³å°"></a>æƒé™ç®¡ç†å¹³å°</h3><p>å½“å…¬å¸å†…éƒ¨äººå‘˜è¾ƒå¤šæ—¶ï¼Œåº”æœ‰ä¸€ä¸ªä¸“é—¨çš„å¹³å°ï¼Œæ¥ç®¡ç†ã€è§„èŒƒç”¨æˆ·çš„æƒé™ä»¥åŠå¯è®¿é—®å†…å®¹ã€‚æƒé™ç®¡ç†å¹³å°æœ‰å‡ ä¸ªç‰¹ç‚¹ï¼š</p><ul><li>å¿…ç„¶å’ŒServerç«¯å¤©ç„¶é«˜è€¦åˆåº¦ï¼Œå› æ­¤éœ€è¦æœ‰ä¸“é—¨çš„æ§åˆ¶æ¨¡å—è´Ÿè´£å¤„ç†æƒé™é—®é¢˜ï¼ˆè´Ÿè´£Serverç«¯å¼€å‘å¤„ç†ï¼Œæˆ–è€…å‰ç«¯é€šè¿‡ä¸­é—´å±‚ä¾‹å¦‚Nodeå±‚ä»‹å…¥å¤„ç†ï¼‰ï¼›</li><li>è‡ªåŠ¨åŒ–æµç¨‹æ§åˆ¶ï¼Œå³ç”¨æˆ·åˆ›å»ºã€ç”³è¯·ã€å®¡æ‰¹ã€ç¦»èŒè‡ªåŠ¨åˆ é™¤ï¼Œéƒ½åº”è¯¥æ˜¯ç”±ç³»ç»Ÿæ¨è¿›å¹¶æé†’ç›¸å…³äººå£«ï¼Œå¿…è¦æ—¶åº”èƒ½è§¦å‘æŠ¥è­¦ï¼›</li><li>æƒé™åº”æœ‰æ—¶æ•ˆæ€§ï¼Œå‡å°‘æ°¸ä¹…æ€§æƒé™çš„äº§ç”Ÿï¼›</li><li>å®¡æ‰¹æµç¨‹åº”æ¸…æ™°å¯è§ï¼Œæ¯ä¸€é˜¶æ®µæµç¨‹åº”å…·ä½“æ˜ç¡®ï¼›</li><li>åº”ä¸å…¬å¸æµç¨‹ç´§å¯†ç»“åˆï¼Œå¹¶ä¸”æé«˜å¯ä¿®æ”¹æ€§ï¼Œæ–¹ä¾¿å…¬å¸åæœŸè¿›è¡Œæµç¨‹ä¼˜åŒ–ï¼›</li></ul><p>æ„ä¹‰ï¼šä½¿å¾—å…¬å¸å†…éƒ¨æµç¨‹æ­£è§„åŒ–ã€ä¿¡æ¯åŒ–ã€‚</p><h3 id="ç™»å½•ç³»ç»Ÿè®¾è®¡ï¼ˆå•ç‚¹ç™»å½•ï¼‰"><a href="#ç™»å½•ç³»ç»Ÿè®¾è®¡ï¼ˆå•ç‚¹ç™»å½•ï¼‰" class="headerlink" title="ç™»å½•ç³»ç»Ÿè®¾è®¡ï¼ˆå•ç‚¹ç™»å½•ï¼‰"></a>ç™»å½•ç³»ç»Ÿè®¾è®¡ï¼ˆå•ç‚¹ç™»å½•ï¼‰</h3><p>å½“å…¬å¸å†…éƒ¨ä¸šåŠ¡çº¿æ¯”è¾ƒå¤æ‚ä½†ç›¸äº’ä¹‹é—´çš„è€¦åˆåº¦æ¯”è¾ƒé«˜æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥è€ƒè™‘è®¾è®¡æ·»åŠ å•ç‚¹ç™»å½•ç³»ç»Ÿã€‚å…·ä½“æ¥è¯´ï¼Œç”¨æˆ·åœ¨ä¸€å¤„ç™»å½•ï¼Œå³å¯ä»¥åœ¨ä»»ä½•é¡µé¢è®¿é—®ï¼Œç™»å‡ºæ—¶ï¼Œä¹ŸåŒæ ·åœ¨ä»»ä½•é¡µé¢éƒ½å¤±å»ç™»å½•çŠ¶æ€ã€‚SSOçš„å¥½å¤„å¾ˆå¤šï¼š</p><ul><li>å¢å¼ºç”¨æˆ·ä½“éªŒï¼›</li><li>æ‰“é€šäº†ä¸åŒä¸šåŠ¡ç³»ç»Ÿä¹‹é—´çš„ç”¨æˆ·æ•°æ®ï¼›</li><li>æ–¹ä¾¿ç»Ÿä¸€ç®¡ç†ç”¨æˆ·ï¼›</li><li>æœ‰åˆ©äºå¼•æµï¼›</li><li>é™ä½å¼€å‘ç³»ç»Ÿçš„æˆæœ¬ï¼ˆä¸éœ€è¦æ¯ä¸ªä¸šåŠ¡éƒ½å¼€å‘ä¸€æ¬¡ç™»å½•ç³»ç»Ÿå’Œç”¨æˆ·çŠ¶æ€æ§åˆ¶ï¼‰ï¼›</li><li>æ€»çš„æ¥è¯´ï¼Œå¤§ä¸­å‹webåº”ç”¨ï¼ŒSSOå¯ä»¥å¸¦æ¥å¾ˆå¤šå¥½å¤„ï¼Œç¼ºç‚¹å´å¾ˆå°‘ã€‚</li></ul><p>æ„ä¹‰ï¼šç”¨æˆ·ä½“éªŒå¢å¼ºï¼Œæ‰“é€šä¸åŒä¸šåŠ¡ä¹‹é—´çš„é—´éš”ï¼Œé™ä½å¼€å‘æˆæœ¬å’Œç”¨æˆ·ç®¡ç†æˆæœ¬ã€‚</p><h3 id="CDN"><a href="#CDN" class="headerlink" title="CDN"></a>CDN</h3><p>å‰ç«¯èµ„æºçš„åŠ è½½é€Ÿåº¦æ˜¯è¡¡é‡ç”¨æˆ·ä½“éªŒçš„é‡è¦æŒ‡æ ‡ä¹‹ä¸€ã€‚</p><p>è€Œç°å®ä¸­ï¼Œå› ä¸ºç§ç§å› ç´ ï¼Œç”¨æˆ·åœ¨åŠ è½½é¡µé¢èµ„æºæ—¶ï¼Œä¼šå—åˆ°å¾ˆå¤šé™åˆ¶ã€‚å› æ­¤ä¸ŠCDNæ˜¯éå¸¸æœ‰æ„ä¹‰çš„ï¼Œå¥½å¤„å¦‚ä¸‹ï¼š</p><ul><li>ç”¨æˆ·æ¥è‡ªä¸åŒåœ°åŒºï¼ŒåŠ å…¥CDNå¯ä»¥ä½¿ç”¨æˆ·è®¿é—®èµ„æºæ—¶ï¼Œè®¿é—®ç¦»è‡ªå·±æ¯”è¾ƒè¿‘çš„CDNæœåŠ¡å™¨ï¼Œé™ä½è®¿é—®å»¶è¿Ÿï¼›</li><li>é™ä½æœåŠ¡å™¨å¸¦å®½ä½¿ç”¨æˆæœ¬ï¼›</li><li>æ”¯æŒè§†é¢‘ã€é™æ€èµ„æºã€å¤§æ–‡ä»¶ã€å°æ–‡ä»¶ã€ç›´æ’­ç­‰å¤šç§ä¸šåŠ¡åœºæ™¯ï¼›</li><li>æ¶ˆé™¤è·¨è¿è¥å•†é€ æˆçš„ç½‘ç»œé€Ÿåº¦è¾ƒæ…¢çš„é—®é¢˜ï¼›</li><li>é™ä½DDOSæ”»å‡»é€ æˆçš„å¯¹ç½‘ç«™çš„å½±å“ï¼›</li><li>CDNæ˜¯ä¸€ç§æ¯”è¾ƒæˆç†Ÿçš„æŠ€æœ¯ï¼Œå„å¤§äº‘å¹³_å°éƒ½æœ‰æä¾›CDNæœåŠ¡ï¼Œä»·æ ¼ä¹Ÿä¸è´µï¼Œå› æ­¤CDNçš„æ€§ä»·æ¯”å¾ˆé«˜ã€‚</li></ul><p>æ„ä¹‰ï¼šå¢åŠ ç”¨æˆ·è®¿é—®é€Ÿåº¦ï¼Œé™ä½ç½‘ç»œå»¶è¿Ÿï¼Œå¸¦å®½ä¼˜åŒ–ï¼Œå‡å°‘æœåŠ¡å™¨è´Ÿè½½ï¼Œå¢å¼ºå¯¹æ”»å‡»çš„æŠµæŠ—èƒ½åŠ›ã€‚</p><h3 id="è´Ÿè½½å‡è¡¡"><a href="#è´Ÿè½½å‡è¡¡" class="headerlink" title="è´Ÿè½½å‡è¡¡"></a>è´Ÿè½½å‡è¡¡</h3><p>ç›®å‰æ¥çœ‹ï¼Œè´Ÿè½½å‡è¡¡é€šå¸¸ä½¿ç”¨Nginxæ¯”è¾ƒå¤šï¼Œä»¥å‰ä¹Ÿæœ‰ä½¿ç”¨Apacheã€‚å½“é‡è§å¤§å‹é¡¹ç›®çš„æ—¶å€™ï¼Œè´Ÿè½½å‡è¡¡å’Œåˆ†å¸ƒå¼å‡ ä¹æ˜¯å¿…é¡»çš„ã€‚</p><p>è´Ÿè½½å‡è¡¡æœ‰ä»¥ä¸‹å¥½å¤„ï¼š</p><ul><li>é™ä½å•å°serverçš„å‹åŠ›ï¼Œæé«˜ä¸šåŠ¡æ‰¿è½½èƒ½åŠ›ï¼›</li><li>æ–¹ä¾¿åº”å¯¹å³°å€¼æµé‡ï¼Œæ‰©å®¹æ–¹ä¾¿ï¼ˆå¦‚ä¸¾åŠæŸäº›æ´»åŠ¨æ—¶ï¼‰ï¼›</li><li>å¢å¼ºä¸šåŠ¡çš„å¯ç”¨æ€§ã€æ‰©å±•æ€§ã€ç¨³å®šæ€§ï¼›</li><li>è´Ÿè½½å‡è¡¡å·²ç»æ˜¯è›®å¸¸è§çš„æŠ€æœ¯äº†ï¼Œå¥½å¤„ä¸ç”¨å¤šè¯´ï¼Œå¾ˆå®¹æ˜“ç†è§£ã€‚</li></ul><p>æ„ä¹‰ï¼šå¢å¼ºä¸šåŠ¡çš„å¯ç”¨æ€§ã€æ‰©å±•æ€§ã€ç¨³å®šæ€§ï¼Œå¯ä»¥æ”¯æŒæ›´å¤šç”¨æˆ·çš„è®¿é—®ã€‚</p><h3 id="å¤šç«¯å…±ç”¨ä¸€å¥—æ¥å£"><a href="#å¤šç«¯å…±ç”¨ä¸€å¥—æ¥å£" class="headerlink" title="å¤šç«¯å…±ç”¨ä¸€å¥—æ¥å£"></a>å¤šç«¯å…±ç”¨ä¸€å¥—æ¥å£</h3><p>ç›®å‰å¸¸è§åœºæ™¯æ˜¯ä¸€ä¸ªä¸šåŠ¡ï¼ŒåŒæ—¶æœ‰PCé¡µé¢å’ŒH5é¡µé¢ï¼Œç”±äºä¸šåŠ¡æ˜¯ä¸€æ ·çš„ï¼Œå› æ­¤åº”é¿å…åŒä¸€ä¸ªä¸šåŠ¡æœ‰å¤šå¥—æ¥å£åˆ†åˆ«é€‚ç”¨äºPCå’ŒH5ç«¯ã€‚</p><p>å› æ­¤è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼š</p><ul><li>åç«¯æä¾›çš„æ¥å£ï¼Œåº”è¯¥åŒæ—¶åŒ…å«PCå’ŒH5çš„æ•°æ®ï¼ˆå³å•ç‹¬å¯¹ä¸€ä¸ªå­˜åœ¨äº¢ä½™æ•°æ®ï¼‰ï¼›</li><li>æ¥å£åº”å½“ç¨³å®šï¼Œå³å½“ä¸šåŠ¡å˜æ›´æ—¶ï¼Œåº”å°½é‡é‡‡å–è¿½åŠ æ•°æ®çš„å½¢å¼ï¼›</li><li>åªæœ‰åœ¨å•ç‹¬ä¸€ç«¯éœ€è¦ç‰¹æ®Šä¸šåŠ¡æµç¨‹æ—¶ï¼Œè®¾è®¡å•ç«¯ç‹¬æœ‰æ¥å£ï¼›</li><li>å¤šç«¯å…±ç”¨æ¥å£ï¼Œæ˜¯å‡å°‘å¼€å‘å·¥ä½œé‡ï¼Œå¹¶ä¸”æé«˜ä¸šåŠ¡å¯ç»´æŠ¤æ€§çš„é‡è¦è§£å†³æ–¹æ¡ˆã€‚</li></ul><p>æ„ä¹‰ï¼šé™ä½å¼€å‘å·¥ä½œé‡ï¼Œå¢å¼ºå¯ç»´æŠ¤æ€§ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ç”±äºå„ä¸ªå…¬å¸å…·ä½“æƒ…å†µä¸åŒï¼Œé¡¹ç›®ä¹Ÿå…·æœ‰ç‰¹æ®Šæ€§ï¼Œå› æ­¤ä»¥ä¸Šè®¾è®¡ä¸å¯å¼ºè¡Œå¥—å…¥ï¼Œåº”æ ¹æ®è‡ªå·±å…¬å¸è§„æ¨¡ã€é¡¹ç›®è¿›å±•ã€äººå‘˜æ•°é‡ç­‰ï¼Œå…ˆæ·»åŠ æ¯”è¾ƒé‡è¦çš„åŠŸèƒ½å’Œè®¾è®¡ã€‚å¹¶éœ€è¦è€ƒè™‘åˆ°é•¿æœŸé¡¹ç›®çš„å¯ç»´æŠ¤æ€§å’Œå‘å±•éœ€è¦ï¼Œå¯¹éƒ¨åˆ†åŸºç¡€è®¾æ–½è¿›è¡Œæå‰ç ”å‘è®¾è®¡ã€‚</p><p>ç¯‡å¹…æ‰€é™ï¼Œå› æ­¤æ— æ³•é¢é¢ä¿±åˆ°ï¼Œåªæäº†ä¸€äº›æˆ‘è®¤ä¸ºæ¯”è¾ƒé‡è¦çš„æ¶æ„å±‚é¢éœ€è¦è€ƒè™‘çš„å†…å®¹ï¼Œæ¬¢è¿å¤§å®¶è¡¥å……ã€‚å¤§å®¶å¦‚æœæœ‰è‡ªå·±çš„çœ‹æ³•ï¼Œæ¬¢è¿å›å¤ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;å…¥é—¨å¾ˆå¤šå¹´çš„å‰ç«¯å°ä¼™ä¼´ï¼Œä¹Ÿä¼šé‡åˆ°å·¥ä½œä¸­éœ€è¦è®¾è®¡å¤§å‹é¡¹ç›®çš„æ—¶å€™ã€‚å¦‚ä½•åšå¥½å‰æœŸçš„æ¶æ„è®¾è®¡ï¼Œå¯¹äºåæœŸé¡¹ç›®çš„æ‰©å±•ä¸å‡çº§éƒ½æ˜¯éå¸¸é‡è¦çš„ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä¸ä¼šä¾§é‡äºå…·ä½“æŠ€æœ¯å®ç°ï¼Œè€Œæ˜¯å°è¯•ä»æ•´ä½“è§’åº¦å‡ºå‘ï¼Œåˆ†æä¸ºä»€ä¹ˆä¸æ€ä¹ˆåšï¼Œä»¥åŠæˆæœ¬å’Œäº§å‡ºå¦‚ä½•ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="æ¶æ„" scheme="https://www.toimc.com/categories/%E6%9E%B6%E6%9E%84/"/>
    
    
  </entry>
  
  <entry>
    <title>Redis-cliçš„å¸¸è§æ“ä½œ</title>
    <link href="https://www.toimc.com/Redis%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%B8%B8%E8%A7%81%E6%93%8D%E4%BD%9C/"/>
    <id>https://www.toimc.com/Redis%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%B8%B8%E8%A7%81%E6%93%8D%E4%BD%9C/</id>
    <published>2021-02-22T08:44:00.000Z</published>
    <updated>2021-03-02T14:48:20.153Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦ä»‹ç»RedisåŠredis-cliçš„ä½¿ç”¨æ–¹å¼ï¼Œä»‹ç»redisæ“ä½œä¸­çš„ä¸€äº›å¸¸è§çš„å‘½ä»¤ã€‚</p><p>åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ä»‹ç»ï¼š</p><ul><li>dockerä¸­çš„rediså¦‚ä½•è¿›å…¥å‘½ä»¤æ¨¡å¼</li><li>redisçš„å¸¸è§å‘½ä»¤åŠç”¨æ³•</li><li>æœ‰å“ªäº›æ¯”è¾ƒå¥½çš„redisè¿æ¥å·¥å…·</li></ul><span id="more"></span><h2 id="è¿›å…¥redisçš„å‘½ä»¤æ¨¡å¼"><a href="#è¿›å…¥redisçš„å‘½ä»¤æ¨¡å¼" class="headerlink" title="è¿›å…¥redisçš„å‘½ä»¤æ¨¡å¼"></a>è¿›å…¥redisçš„å‘½ä»¤æ¨¡å¼</h2><p>ä»¥ä¸‹å®ä¾‹è®²è§£äº†å¦‚ä½•å¯åŠ¨ redis å®¢æˆ·ç«¯ï¼š</p><p>å¯åŠ¨ redis æœåŠ¡å™¨ï¼Œæ‰“å¼€ç»ˆç«¯å¹¶è¾“å…¥å‘½ä»¤<code>redis-cli</code>ï¼Œè¯¥å‘½ä»¤ä¼šè¿æ¥æœ¬åœ°çš„redis æœåŠ¡ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ redis-cli</span><br><span class="line">redis 127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬æ˜¯ä½¿ç”¨çš„dockerå¯åŠ¨çš„redisï¼Œé‚£è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿæ¯”å¦‚ä¸‹å›¾ä¸­çš„<code>imooc-redis</code><br><img src="https://uploader.shimo.im/f/E6nuYmCeddh2c6lf.png!thumbnail?fileGuid=1lq7MKaPDaf7zxAe" alt="å›¾ç‰‡"></p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„å‘½ä»¤è¿›å…¥redisçš„å‘½ä»¤æ¨¡å¼ï¼š</p><p><img src="https://uploader.shimo.im/f/U1OG7JtZ0LFNPxDh.png!thumbnail?fileGuid=1lq7MKaPDaf7zxAe" alt="å›¾ç‰‡"></p><p>æ–¹ä¾¿å¤åˆ¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it imooc-redis redis-cli</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„<code>imooc-redis</code>å¯ä»¥æ¢æˆè‡ªå·±çš„å®¹å™¨çš„åç§°<br>å¦‚æœè‡ªå·±çš„redisè®¾ç½®çš„å¯†ç ï¼Œåˆ™è¾“å…¥å‘½ä»¤åä¼šå‡ºç°å¦‚ä¸‹æç¤ºï¼š</p><p><img src="https://uploader.shimo.im/f/qA1AQr9JynLKoqur.png!thumbnail?fileGuid=1lq7MKaPDaf7zxAe" alt="å›¾ç‰‡"></p><p>é‚£ä¹ˆå¯ä»¥ä½¿ç”¨<code>auth</code>å‘½ä»¤è¿›è¡Œç™»å½•é‰´æƒï¼š</p><p><img src="https://uploader.shimo.im/f/HYM9wG1cbtgEp4YI.png!thumbnail?fileGuid=1lq7MKaPDaf7zxAe" alt="å›¾ç‰‡"></p><h2 id="redisçš„å¸¸è§å‘½ä»¤åŠç”¨æ³•"><a href="#redisçš„å¸¸è§å‘½ä»¤åŠç”¨æ³•" class="headerlink" title="redisçš„å¸¸è§å‘½ä»¤åŠç”¨æ³•"></a>redisçš„å¸¸è§å‘½ä»¤åŠç”¨æ³•</h2><h3 id="keyæ“ä½œå‘½ä»¤"><a href="#keyæ“ä½œå‘½ä»¤" class="headerlink" title="keyæ“ä½œå‘½ä»¤"></a>keyæ“ä½œå‘½ä»¤</h3><h4 id="è·å–æ‰€æœ‰é”®"><a href="#è·å–æ‰€æœ‰é”®" class="headerlink" title="è·å–æ‰€æœ‰é”®"></a>è·å–æ‰€æœ‰é”®</h4><blockquote><p>è¯­æ³•ï¼škeys pattern</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; keys *</span><br><span class="line">1) &quot;toimc&quot;</span><br></pre></td></tr></table></figure><p><code>*</code>è¡¨ç¤ºé€šé…ç¬¦ï¼Œè¡¨ç¤ºä»»æ„å­—ç¬¦ï¼Œä¼šéå†æ‰€æœ‰é”®æ˜¾ç¤ºæ‰€æœ‰çš„é”®åˆ—è¡¨ï¼Œæ—¶é—´å¤æ‚åº¦O(n)ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸å»ºè®®ä½¿ç”¨ã€‚</p><h4 id="è·å–é”®æ€»æ•°"><a href="#è·å–é”®æ€»æ•°" class="headerlink" title="è·å–é”®æ€»æ•°"></a>è·å–é”®æ€»æ•°</h4><blockquote><p>è¯­æ³•ï¼šdbsize</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; dbsize</span><br><span class="line">(integer) 6</span><br></pre></td></tr></table></figure><p>è·å–é”®æ€»æ•°æ—¶ä¸ä¼šéå†æ‰€æœ‰çš„é”®ï¼Œç›´æ¥è·å–å†…éƒ¨å˜é‡ï¼Œæ—¶é—´å¤æ‚åº¦O(1)ã€‚</p><h4 id="æŸ¥è¯¢é”®æ˜¯å¦å­˜åœ¨"><a href="#æŸ¥è¯¢é”®æ˜¯å¦å­˜åœ¨" class="headerlink" title="æŸ¥è¯¢é”®æ˜¯å¦å­˜åœ¨"></a>æŸ¥è¯¢é”®æ˜¯å¦å­˜åœ¨</h4><blockquote><p>è¯­æ³•ï¼šexists key [key â€¦]</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; exists toimc java</span><br><span class="line">(integer) 2</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢æŸ¥è¯¢å¤šä¸ªï¼Œè¿”å›å­˜åœ¨çš„ä¸ªæ•°ã€‚</p><h4 id="åˆ é™¤é”®"><a href="#åˆ é™¤é”®" class="headerlink" title="åˆ é™¤é”®"></a>åˆ é™¤é”®</h4><blockquote><p>è¯­æ³•ï¼šdel key [key â€¦]</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; del java toimc</span><br><span class="line">(integer) 1</span><br></pre></td></tr></table></figure><p>å¯ä»¥åˆ é™¤å¤šä¸ªï¼Œè¿”å›åˆ é™¤æˆåŠŸçš„ä¸ªæ•°ã€‚</p><h4 id="æŸ¥è¯¢é”®ç±»å‹"><a href="#æŸ¥è¯¢é”®ç±»å‹" class="headerlink" title="æŸ¥è¯¢é”®ç±»å‹"></a>æŸ¥è¯¢é”®ç±»å‹</h4><blockquote><p>è¯­æ³•ï¼š type key</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; type toimc</span><br><span class="line">string</span><br></pre></td></tr></table></figure><h4 id="ç§»åŠ¨é”®"><a href="#ç§»åŠ¨é”®" class="headerlink" title="ç§»åŠ¨é”®"></a>ç§»åŠ¨é”®</h4><blockquote><p>è¯­æ³•ï¼šmove key db</p></blockquote><p>å¦‚æŠŠtoimcç§»åˆ°2å·æ•°æ®åº“ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; move toimc 2</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; select 2</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379[2]&gt; keys *</span><br><span class="line">1) &quot;toimc&quot;</span><br></pre></td></tr></table></figure><h4 id="æŸ¥è¯¢keyçš„ç”Ÿå‘½å‘¨æœŸï¼ˆç§’ï¼‰"><a href="#æŸ¥è¯¢keyçš„ç”Ÿå‘½å‘¨æœŸï¼ˆç§’ï¼‰" class="headerlink" title="æŸ¥è¯¢keyçš„ç”Ÿå‘½å‘¨æœŸï¼ˆç§’ï¼‰"></a>æŸ¥è¯¢keyçš„ç”Ÿå‘½å‘¨æœŸï¼ˆç§’ï¼‰</h4><blockquote><p>ç§’è¯­æ³•ï¼šttl key<br>æ¯«ç§’è¯­æ³•ï¼špttl key</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379[2]&gt; ttl toimc</span><br><span class="line">(integer) -1</span><br></pre></td></tr></table></figure><p>-1ï¼šæ°¸è¿œä¸è¿‡æœŸã€‚</p><h4 id="è®¾ç½®è¿‡æœŸæ—¶é—´"><a href="#è®¾ç½®è¿‡æœŸæ—¶é—´" class="headerlink" title="è®¾ç½®è¿‡æœŸæ—¶é—´"></a>è®¾ç½®è¿‡æœŸæ—¶é—´</h4><blockquote><p>ç§’è¯­æ³•ï¼šexpire key seconds<br>æ¯«ç§’è¯­æ³•ï¼špexpire key milliseconds</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379[2]&gt; expire toimc 60</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379[2]&gt; ttl toimc</span><br><span class="line">(integer) 55</span><br></pre></td></tr></table></figure><h4 id="è®¾ç½®æ°¸ä¸è¿‡æœŸ"><a href="#è®¾ç½®æ°¸ä¸è¿‡æœŸ" class="headerlink" title="è®¾ç½®æ°¸ä¸è¿‡æœŸ"></a>è®¾ç½®æ°¸ä¸è¿‡æœŸ</h4><blockquote><p>è¯­æ³•ï¼špersist key</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379[2]&gt; persist toimc</span><br><span class="line">(integer) 1</span><br></pre></td></tr></table></figure><h4 id="æ›´æ”¹é”®åç§°"><a href="#æ›´æ”¹é”®åç§°" class="headerlink" title="æ›´æ”¹é”®åç§°"></a>æ›´æ”¹é”®åç§°</h4><blockquote><p>è¯­æ³•ï¼šrename key newkey</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379[2]&gt; rename toimc toimc123</span><br><span class="line">OK</span><br></pre></td></tr></table></figure><h3 id="å­—ç¬¦ä¸²æ“ä½œå‘½ä»¤"><a href="#å­—ç¬¦ä¸²æ“ä½œå‘½ä»¤" class="headerlink" title="å­—ç¬¦ä¸²æ“ä½œå‘½ä»¤"></a>å­—ç¬¦ä¸²æ“ä½œå‘½ä»¤</h3><p>å­—ç¬¦ä¸²æ˜¯Redisä¸­æœ€åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œå•ä¸ªæ•°æ®èƒ½å­˜å‚¨çš„æœ€å¤§ç©ºé—´æ˜¯512Mã€‚</p><h4 id="å­˜æ”¾é”®å€¼"><a href="#å­˜æ”¾é”®å€¼" class="headerlink" title="å­˜æ”¾é”®å€¼"></a>å­˜æ”¾é”®å€¼</h4><blockquote><p>è¯­æ³•ï¼šset key value [EX seconds] [PX milliseconds] [NX|XX]</p></blockquote><p>nxï¼šå¦‚æœkeyä¸å­˜åœ¨åˆ™å»ºç«‹ï¼Œxxï¼šå¦‚æœkeyå­˜åœ¨åˆ™ä¿®æ”¹å…¶å€¼ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨setnx/setexå‘½ä»¤ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; set toimc 666</span><br><span class="line">OK</span><br></pre></td></tr></table></figure><h4 id="è·å–é”®å€¼"><a href="#è·å–é”®å€¼" class="headerlink" title="è·å–é”®å€¼"></a>è·å–é”®å€¼</h4><blockquote><p>è¯­æ³•ï¼šget key</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379[2]&gt; get toimc</span><br><span class="line">&quot;666&quot;</span><br></pre></td></tr></table></figure><h4 id="å€¼é€’å¢-é€’å‡"><a href="#å€¼é€’å¢-é€’å‡" class="headerlink" title="å€¼é€’å¢/é€’å‡"></a>å€¼é€’å¢/é€’å‡</h4><p>å¦‚æœå­—ç¬¦ä¸²ä¸­çš„å€¼æ˜¯æ•°å­—ç±»å‹çš„ï¼Œå¯ä»¥ä½¿ç”¨incrå‘½ä»¤æ¯æ¬¡é€’å¢ï¼Œä¸æ˜¯æ•°å­—ç±»å‹åˆ™æŠ¥é”™ã€‚</p><blockquote><p>è¯­æ³•ï¼šincr key</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379[2]&gt; incr toimc</span><br><span class="line">(integer) 667</span><br></pre></td></tr></table></figure><p>ä¸€æ¬¡æƒ³é€’å¢Nç”¨incrbyå‘½ä»¤ï¼Œå¦‚æœæ˜¯æµ®ç‚¹å‹æ•°æ®å¯ä»¥ç”¨incrbyfloatå‘½ä»¤é€’å¢ã€‚<br>åŒæ ·ï¼Œé€’å‡ä½¿ç”¨decrã€decrbyå‘½ä»¤ã€‚</p><h4 id="æ‰¹é‡å­˜æ”¾é”®å€¼"><a href="#æ‰¹é‡å­˜æ”¾é”®å€¼" class="headerlink" title="æ‰¹é‡å­˜æ”¾é”®å€¼"></a>æ‰¹é‡å­˜æ”¾é”®å€¼</h4><blockquote><p>è¯­æ³•ï¼šmset key value [key value â€¦]</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379[2]&gt; mset java1 1 java2 2 java3 3</span><br><span class="line">OK</span><br></pre></td></tr></table></figure><h4 id="è·å–è·å–é”®å€¼"><a href="#è·å–è·å–é”®å€¼" class="headerlink" title="è·å–è·å–é”®å€¼"></a>è·å–è·å–é”®å€¼</h4><blockquote><p>è¯­æ³•ï¼šmget key [key â€¦]</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379[2]&gt; mget java1 java2</span><br><span class="line">1) &quot;1&quot;</span><br><span class="line">2) &quot;2&quot;</span><br></pre></td></tr></table></figure><p>Redisæ¥æ”¶çš„æ˜¯UTF-8çš„ç¼–ç ï¼Œå¦‚æœæ˜¯ä¸­æ–‡ä¸€ä¸ªæ±‰å­—å°†å 3ä½è¿”å›ã€‚</p><h4 id="è·å–å€¼é•¿åº¦"><a href="#è·å–å€¼é•¿åº¦" class="headerlink" title="è·å–å€¼é•¿åº¦"></a>è·å–å€¼é•¿åº¦</h4><blockquote><p>è¯­æ³•ï¼šstrlen key<br>127.0.0.1:6379[2]&gt; strlen toimc<br>(integer) 3</p></blockquote><h4 id="è¿½åŠ å†…å®¹"><a href="#è¿½åŠ å†…å®¹" class="headerlink" title="è¿½åŠ å†…å®¹"></a>è¿½åŠ å†…å®¹</h4><blockquote><p>è¯­æ³•ï¼šappend key value</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379[2]&gt; append toimc hi</span><br><span class="line">(integer) 5</span><br></pre></td></tr></table></figure><p>å‘é”®å€¼å°¾éƒ¨æ·»åŠ ï¼Œå¦‚ä¸Šå‘½ä»¤æ‰§è¡Œåç”±666å˜æˆ666hi</p><h4 id="è·å–éƒ¨åˆ†å­—ç¬¦"><a href="#è·å–éƒ¨åˆ†å­—ç¬¦" class="headerlink" title="è·å–éƒ¨åˆ†å­—ç¬¦"></a>è·å–éƒ¨åˆ†å­—ç¬¦</h4><blockquote><p>è¯­æ³•ï¼šgetrange key start end</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; 127.0.0.1:6379[2]&gt; getrange toimc 0 4</span><br><span class="line">&quot;javas&quot;</span><br></pre></td></tr></table></figure><h3 id="æ•£åˆ—æ“ä½œå‘½ä»¤"><a href="#æ•£åˆ—æ“ä½œå‘½ä»¤" class="headerlink" title="æ•£åˆ—æ“ä½œå‘½ä»¤"></a>æ•£åˆ—æ“ä½œå‘½ä»¤</h3><p>rediså­—ç¬¦ä¸²ç±»å‹é”®å’Œå€¼æ˜¯å­—å…¸ç»“æ„å½¢å¼ï¼Œè¿™é‡Œçš„æ•£åˆ—ç±»å‹å…¶å€¼ä¹Ÿå¯ä»¥æ˜¯å­—å…¸ç»“æ„ã€‚</p><h4 id="å­˜æ”¾é”®å€¼-1"><a href="#å­˜æ”¾é”®å€¼-1" class="headerlink" title="å­˜æ”¾é”®å€¼"></a>å­˜æ”¾é”®å€¼</h4><blockquote><p>å•ä¸ªè¯­æ³•ï¼šhset key field value</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; hset user name toimc</span><br><span class="line">(integer) 1</span><br></pre></td></tr></table></figure><blockquote><p>å¤šä¸ªè¯­æ³•ï¼šhmset key field value [field value â€¦]</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; hmset user name toimc age 20 address china</span><br><span class="line">OK</span><br></pre></td></tr></table></figure><blockquote><p>ä¸å­˜åœ¨æ—¶è¯­æ³•ï¼šhsetnx key field value</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; hsetnx user tall 180</span><br><span class="line">(integer) 0</span><br></pre></td></tr></table></figure><h4 id="è·å–å­—æ®µå€¼"><a href="#è·å–å­—æ®µå€¼" class="headerlink" title="è·å–å­—æ®µå€¼"></a>è·å–å­—æ®µå€¼</h4><blockquote><p>å•ä¸ªè¯­æ³•ï¼šhget keyfield</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; hget user age</span><br><span class="line">&quot;20&quot;</span><br></pre></td></tr></table></figure><blockquote><p>å¤šä¸ªè¯­æ³•ï¼šhmget key field [field â€¦]</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; hmget user name age address</span><br><span class="line">1) &quot;toimc&quot;</span><br><span class="line">2) &quot;20&quot;</span><br><span class="line">3) &quot;china&quot;</span><br></pre></td></tr></table></figure><blockquote><p>è·å–æ‰€æœ‰é”®ä¸å€¼è¯­æ³•ï¼šhgetall key</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; hgetall user</span><br><span class="line">1) &quot;name&quot;</span><br><span class="line">2) &quot;toimc&quot;</span><br><span class="line">3) &quot;age&quot;</span><br><span class="line">4) &quot;20&quot;</span><br><span class="line">5) &quot;address&quot;</span><br><span class="line">6) &quot;china&quot;</span><br></pre></td></tr></table></figure><blockquote><p>è·å–æ‰€æœ‰å­—æ®µè¯­æ³•ï¼šhkeys key</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; hkeys user</span><br><span class="line">1) &quot;name&quot;</span><br><span class="line">2) &quot;address&quot;</span><br><span class="line">3) &quot;tall&quot;</span><br><span class="line">4) &quot;age&quot;</span><br></pre></td></tr></table></figure><blockquote><p>è·å–æ‰€æœ‰å€¼è¯­æ³•ï¼šhvals key</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; hvals user</span><br><span class="line">1) &quot;toimc&quot;</span><br><span class="line">2) &quot;china&quot;</span><br><span class="line">3) &quot;170&quot;</span><br><span class="line">4) &quot;20&quot;</span><br></pre></td></tr></table></figure><h4 id="åˆ¤æ–­å­—æ®µæ˜¯å¦å­˜åœ¨"><a href="#åˆ¤æ–­å­—æ®µæ˜¯å¦å­˜åœ¨" class="headerlink" title="åˆ¤æ–­å­—æ®µæ˜¯å¦å­˜åœ¨"></a>åˆ¤æ–­å­—æ®µæ˜¯å¦å­˜åœ¨</h4><blockquote><p>è¯­æ³•ï¼šhexists key field</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; hexists user address</span><br><span class="line">(integer) 1</span><br></pre></td></tr></table></figure><h4 id="è·å–å­—æ®µæ•°é‡"><a href="#è·å–å­—æ®µæ•°é‡" class="headerlink" title="è·å–å­—æ®µæ•°é‡"></a>è·å–å­—æ®µæ•°é‡</h4><blockquote><p>è¯­æ³•ï¼šhlen key</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; hlen user</span><br><span class="line">(integer) 4</span><br></pre></td></tr></table></figure><h4 id="é€’å¢-å‡"><a href="#é€’å¢-å‡" class="headerlink" title="é€’å¢/å‡"></a>é€’å¢/å‡</h4><blockquote><p>è¯­æ³•ï¼šhincrby key fieldincrement</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; hincrby user tall -10</span><br><span class="line">(integer) 170</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤å­—æ®µ"><a href="#åˆ é™¤å­—æ®µ" class="headerlink" title="åˆ é™¤å­—æ®µ"></a>åˆ é™¤å­—æ®µ</h4><blockquote><p>è¯­æ³•ï¼šhdel key field [field â€¦]</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; hdel user age</span><br><span class="line">(integer) 1</span><br></pre></td></tr></table></figure><h3 id="æ•°æ®åº“ç›¸å…³"><a href="#æ•°æ®åº“ç›¸å…³" class="headerlink" title="æ•°æ®åº“ç›¸å…³"></a>æ•°æ®åº“ç›¸å…³</h3><p>Redisæ•°æ®åº“çš„æ•°é‡æ˜¯å›ºå®šçš„ï¼Œå¹¶åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä½ æœ‰16ä¸ªæ•°æ®åº“ã€‚æ¯ä¸ªæ•°æ®åº“éƒ½ç”±ä¸€ä¸ªæ•°å­—ï¼ˆè€Œä¸æ˜¯åç§°ï¼‰æ¥æ ‡è¯†ã€‚</p><p>ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤<code>CONFIG````GET````data``b``as``e``s</code>æ¥äº†è§£æ•°æ®åº“çš„æ•°é‡ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CONFIG GET databases</span><br><span class="line">1) &quot;databases&quot;</span><br><span class="line">2) &quot;16&quot;</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤<code>INFO</code>æˆ–è€…<code>INFO keyspace</code>åˆ—å‡ºå®šä¹‰äº†æŸäº›é”®çš„æ•°æ®åº“ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line">INFO</span><br><span class="line"># Server</span><br><span class="line">redis_version:5.0.8</span><br><span class="line">redis_git_sha1:00000000</span><br><span class="line">redis_git_dirty:0</span><br><span class="line">redis_build_id:ce75a617c591114f</span><br><span class="line">redis_mode:standalone</span><br><span class="line">os:Linux 3.10.0-1062.4.1.el7.x86_64 x86_64</span><br><span class="line">arch_bits:64</span><br><span class="line">multiplexing_api:epoll</span><br><span class="line">atomicvar_api:atomic-builtin</span><br><span class="line">gcc_version:8.3.0</span><br><span class="line">process_id:1</span><br><span class="line">run_id:75ea4375ee7a6f41697f721e268d148dc8af24e8</span><br><span class="line">tcp_port:6379</span><br><span class="line">uptime_in_seconds:7316762</span><br><span class="line">uptime_in_days:84</span><br><span class="line">hz:10</span><br><span class="line">configured_hz:10</span><br><span class="line">lru_clock:2935552</span><br><span class="line">executable:&#x2F;data&#x2F;redis-server</span><br><span class="line">config_file:</span><br><span class="line">â€‹</span><br><span class="line"># Clients</span><br><span class="line">connected_clients:4</span><br><span class="line">client_recent_max_input_buffer:2</span><br><span class="line">client_recent_max_output_buffer:0</span><br><span class="line">blocked_clients:0</span><br><span class="line">â€‹</span><br><span class="line"># Memory</span><br><span class="line">used_memory:925608</span><br><span class="line">used_memory_human:903.91K</span><br><span class="line">used_memory_rss:12644352</span><br><span class="line">used_memory_rss_human:12.06M</span><br><span class="line">used_memory_peak:3896552</span><br><span class="line">used_memory_peak_human:3.72M</span><br><span class="line">used_memory_peak_perc:23.75%</span><br><span class="line">used_memory_overhead:892348</span><br><span class="line">used_memory_startup:791296</span><br><span class="line">used_memory_dataset:33260</span><br><span class="line">used_memory_dataset_perc:24.76%</span><br><span class="line">allocator_allocated:917808</span><br><span class="line">allocator_active:1163264</span><br><span class="line">allocator_resident:3743744</span><br><span class="line">total_system_memory:16637751296</span><br><span class="line">total_system_memory_human:15.50G</span><br><span class="line">used_memory_lua:37888</span><br><span class="line">used_memory_lua_human:37.00K</span><br><span class="line">used_memory_scripts:0</span><br><span class="line">used_memory_scripts_human:0B</span><br><span class="line">number_of_cached_scripts:0</span><br><span class="line">maxmemory:0</span><br><span class="line">maxmemory_human:0B</span><br><span class="line">maxmemory_policy:noeviction</span><br><span class="line">allocator_frag_ratio:1.27</span><br><span class="line">allocator_frag_bytes:245456</span><br><span class="line">allocator_rss_ratio:3.22</span><br><span class="line">allocator_rss_bytes:2580480</span><br><span class="line">rss_overhead_ratio:3.38</span><br><span class="line">rss_overhead_bytes:8900608</span><br><span class="line">mem_fragmentation_ratio:14.31</span><br><span class="line">mem_fragmentation_bytes:11760736</span><br><span class="line">mem_not_counted_for_evict:0</span><br><span class="line">mem_replication_backlog:0</span><br><span class="line">mem_clients_slaves:0</span><br><span class="line">mem_clients_normal:100460</span><br><span class="line">mem_aof_buffer:0</span><br><span class="line">mem_allocator:jemalloc-5.1.0</span><br><span class="line">active_defrag_running:0</span><br><span class="line">lazyfree_pending_objects:0</span><br><span class="line">â€‹</span><br><span class="line"># Persistence</span><br><span class="line">loading:0</span><br><span class="line">rdb_changes_since_last_save:7989</span><br><span class="line">rdb_bgsave_in_progress:0</span><br><span class="line">rdb_last_save_time:1606231526</span><br><span class="line">rdb_last_bgsave_status:ok</span><br><span class="line">rdb_last_bgsave_time_sec:-1</span><br><span class="line">rdb_current_bgsave_time_sec:-1</span><br><span class="line">rdb_last_cow_size:0</span><br><span class="line">aof_enabled:0</span><br><span class="line">aof_rewrite_in_progress:0</span><br><span class="line">aof_rewrite_scheduled:0</span><br><span class="line">aof_last_rewrite_time_sec:-1</span><br><span class="line">aof_current_rewrite_time_sec:-1</span><br><span class="line">aof_last_bgrewrite_status:ok</span><br><span class="line">aof_last_write_status:ok</span><br><span class="line">aof_last_cow_size:0</span><br><span class="line">â€‹</span><br><span class="line"># Stats</span><br><span class="line">total_connections_received:4006</span><br><span class="line">total_commands_processed:81735</span><br><span class="line">instantaneous_ops_per_sec:0</span><br><span class="line">total_net_input_bytes:3084119</span><br><span class="line">total_net_output_bytes:22777832</span><br><span class="line">instantaneous_input_kbps:0.00</span><br><span class="line">instantaneous_output_kbps:0.00</span><br><span class="line">rejected_connections:0</span><br><span class="line">sync_full:0</span><br><span class="line">sync_partial_ok:0</span><br><span class="line">sync_partial_err:0</span><br><span class="line">expired_keys:759</span><br><span class="line">expired_stale_perc:0.00</span><br><span class="line">expired_time_cap_reached_count:0</span><br><span class="line">evicted_keys:0</span><br><span class="line">keyspace_hits:63631</span><br><span class="line">keyspace_misses:2192</span><br><span class="line">pubsub_channels:0</span><br><span class="line">pubsub_patterns:0</span><br><span class="line">latest_fork_usec:0</span><br><span class="line">migrate_cached_sockets:0</span><br><span class="line">slave_expires_tracked_keys:0</span><br><span class="line">active_defrag_hits:0</span><br><span class="line">active_defrag_misses:0</span><br><span class="line">active_defrag_key_hits:0</span><br><span class="line">active_defrag_key_misses:0</span><br><span class="line">â€‹</span><br><span class="line"># Replication</span><br><span class="line">role:master</span><br><span class="line">connected_slaves:0</span><br><span class="line">master_replid:7e9137e98814fa2b756aff0e339de997cc1309a1</span><br><span class="line">master_replid2:0000000000000000000000000000000000000000</span><br><span class="line">master_repl_offset:0</span><br><span class="line">second_repl_offset:-1</span><br><span class="line">repl_backlog_active:0</span><br><span class="line">repl_backlog_size:1048576</span><br><span class="line">repl_backlog_first_byte_offset:0</span><br><span class="line">repl_backlog_histlen:0</span><br><span class="line">â€‹</span><br><span class="line"># CPU</span><br><span class="line">used_cpu_sys:8093.459923</span><br><span class="line">used_cpu_user:4547.190025</span><br><span class="line">used_cpu_sys_children:0.011915</span><br><span class="line">used_cpu_user_children:0.003634</span><br><span class="line">â€‹</span><br><span class="line"># Cluster</span><br><span class="line">cluster_enabled:0</span><br><span class="line">â€‹</span><br><span class="line"># Keyspace</span><br><span class="line">db0:keys&#x3D;7,expires&#x3D;1,avg_ttl&#x3D;177400</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å•ä¸ªç‰‡åŒºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">INFO keyspace</span><br><span class="line"># Keyspace</span><br><span class="line">db0:keys&#x3D;10,expires&#x3D;0</span><br><span class="line">db1:keys&#x3D;1,expires&#x3D;0</span><br><span class="line">db3:keys&#x3D;1,expires&#x3D;0</span><br></pre></td></tr></table></figure><p>æˆ–è€…ä½¿ç”¨redisçš„GUIå·¥å…·æ¥æŸ¥çœ‹ï¼š</p><p><img src="https://uploader.shimo.im/f/ChbKyfk9ucthe8oV.png!thumbnail?fileGuid=1lq7MKaPDaf7zxAe" alt="å›¾ç‰‡"></p><h2 id="æ¨èrediså­¦ä¹ æ–‡æ¡£"><a href="#æ¨èrediså­¦ä¹ æ–‡æ¡£" class="headerlink" title="æ¨èrediså­¦ä¹ æ–‡æ¡£"></a>æ¨èrediså­¦ä¹ æ–‡æ¡£</h2><p>æ›´å¤šredisçš„å‘½ä»¤å¯ä»¥å‚è€ƒå¦‚ä¸‹ç½‘å€ï¼š</p><p>[1] <a href="http://doc.redisfans.com/">http://doc</a><a href="http://doc.redisfans.com/">.</a><a href="http://doc.redisfans.com/">redisfans</a><a href="http://doc.redisfans.com/">.</a><a href="http://doc.redisfans.com/">com/</a></p><p>[2] <a href="http://www.redis.cn/">h</a><a href="http://www.redis.cn/">ttp://www.</a><a href="http://www.redis.cn/">re</a><a href="http://www.redis.cn/">d</a><a href="http://www.redis.cn/">i</a><a href="http://www.redis.cn/">s.c</a><a href="http://www.redis.cn/">n</a><a href="http://www.redis.cn/">/</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ¬æ–‡ä¸»è¦ä»‹ç»RedisåŠredis-cliçš„ä½¿ç”¨æ–¹å¼ï¼Œä»‹ç»redisæ“ä½œä¸­çš„ä¸€äº›å¸¸è§çš„å‘½ä»¤ã€‚&lt;/p&gt;
&lt;p&gt;åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ä»‹ç»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;dockerä¸­çš„rediså¦‚ä½•è¿›å…¥å‘½ä»¤æ¨¡å¼&lt;/li&gt;
&lt;li&gt;redisçš„å¸¸è§å‘½ä»¤åŠç”¨æ³•&lt;/li&gt;
&lt;li&gt;æœ‰å“ªäº›æ¯”è¾ƒå¥½çš„redisè¿æ¥å·¥å…·&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    
    <category term="Redis" scheme="https://www.toimc.com/tags/Redis/"/>
    
    <category term="redis-cli" scheme="https://www.toimc.com/tags/redis-cli/"/>
    
  </entry>
  
  <entry>
    <title>windows10å®¶åº­ç‰ˆå¦‚ä½•æ·»åŠ Hyper-V</title>
    <link href="https://www.toimc.com/windows10%E5%AE%B6%E5%BA%AD%E7%89%88%E5%A6%82%E4%BD%95%E6%B7%BB%E5%8A%A0Hyper-V/"/>
    <id>https://www.toimc.com/windows10%E5%AE%B6%E5%BA%AD%E7%89%88%E5%A6%82%E4%BD%95%E6%B7%BB%E5%8A%A0Hyper-V/</id>
    <published>2021-02-22T08:22:45.000Z</published>
    <updated>2021-03-02T14:48:20.154Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡æ˜¯<a href="https://class.imooc.com/sale/webfullstack">ã€Šå¤§å‰ç«¯ã€‹</a>é…å¥—ä»‹ç»å›¾æ–‡å†…å®¹ï¼Œä¸»è¦æ˜¯ä»‹ç»å¦‚ä½•åœ¨windows10å®¶åº­ç‰ˆå¦‚ä½•æ·»åŠ Hyper-V</p><span id="more"></span><h2 id="ä¸€ã€æŸ¥çœ‹ç”µè„‘æ˜¯å¦èƒ½è¿è¡Œ-Hyper-V"><a href="#ä¸€ã€æŸ¥çœ‹ç”µè„‘æ˜¯å¦èƒ½è¿è¡Œ-Hyper-V" class="headerlink" title="ä¸€ã€æŸ¥çœ‹ç”µè„‘æ˜¯å¦èƒ½è¿è¡Œ Hyper-V"></a>ä¸€ã€æŸ¥çœ‹ç”µè„‘æ˜¯å¦èƒ½è¿è¡Œ Hyper-V</h2><p>æ‰“å¼€ cmd çª—å£è¾“å…¥å‘½ä»¤ â€œsysteminfoâ€ ï¼ŒæŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯ä¸­çš„ Hyper-Vè¦æ±‚æˆ–è€… Win + R å¿«æ·é”®è°ƒå‡ºè¿è¡Œå¯¹è¯æ¡†ï¼Œè¾“å…¥ â€œmsinfo32â€ ï¼Œæ‰“å¼€ç³»ç»Ÿä¿¡æ¯çª—å£ï¼ŒæŸ¥çœ‹ Hyper-V è¦æ±‚</p><blockquote><p>Hyper-V - è™šæ‹Ÿæœºç›‘è§†æ¨¡å¼æ‰©å±•<br>Hyper-V - ç¬¬äºŒçº§åœ°å€è½¬æ¢æ‰©å±•<br>Hyper-V - å›ºä»¶ä¸­å¯ç”¨çš„è™šæ‹ŸåŒ–<br>Hyper-V - æ•°æ®æ‰©å±•ä¿æŠ¤</p></blockquote><p>è¿™å››é¡¹å¿…é¡»å…¨éƒ¨ä¸ºâ€œæ˜¯â€ï¼Œä½ çš„ç”µè„‘æ‰èƒ½è¿è¡Œ Hyper-V è™šæ‹Ÿæœºã€‚</p><p><img src="https://uploader.shimo.im/f/DBf8kAtxw59w5DZg.png!thumbnail?fileGuid=47kgJ0X4NrCPLEqV" alt="å›¾ç‰‡"></p><p>å…¶ä¸­<em>å›ºä»¶ä¸­å¯ç”¨è™šæ‹ŸåŒ–</em>æœ‰å¯èƒ½é»˜è®¤æ˜¯å…³é—­çš„ï¼Œé¦–å…ˆç¡®è®¤ä¸‹ç”µè„‘ CPU æ”¯ä¸æ”¯æŒè™šæ‹ŸåŒ–ï¼Œ</p><p>å¦‚ä½•ç¡®è®¤ç”µè„‘æ˜¯å¦æ”¯æŒè™šæ‹ŸåŒ–ï¼Ÿâ€”â€”å‚è€ƒå¾®è½¯å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://docs.microsoft.com/zh-cn/virtualization/hyper-v-on-windows/reference/hyper-v-requirements">https://docs.microsoft.com/zh-cn/virtualization/hyper-v-on-windows/reference/hyper-v-requirements</a></p><p>windowsçš„åŒå­¦å¯ä»¥æ‰“å¼€ã€ä»»åŠ¡ç®¡ç†å™¨ã€‘ï¼Œåˆ‡æ¢åˆ°ã€æ€§èƒ½ã€‘é€‰é¡¹å¡ï¼Œåœ¨ã€CPUã€‘ä¸€æ çš„å³æ–¹å°±å¯ä»¥çœ‹åˆ°ï¼š</p><p><img src="https://uploader.shimo.im/f/HavX4mmb4ojv6hUr.png!thumbnail?fileGuid=47kgJ0X4NrCPLEqV" alt="å›¾ç‰‡"></p><p>è¿˜ä¸çŸ¥é“å¦‚ä½•è®¾ç½®çš„ï¼Œå¯ä»¥æ‰¾å®˜ç½‘è®ºå›ã€å®¢æœå•Šï¼Œé—®é—®ã€‚ä¸€èˆ¬ç°åœ¨çš„ç”µè„‘éƒ½æ˜¯é»˜è®¤æ”¯æŒçš„ã€‚å¦‚æœæ”¯æŒï¼Œä½ å°±å¯ä»¥åœ¨ BIOS è®¾ç½®å¼€å¯è™šæ‹ŸåŒ–ï¼Œæ­¥éª¤ç®€å•ï¼Œä½†æ˜¯ä¸åŒä¸»æ¿å‹å·è¿›å…¥ BIOS æ–¹å¼ä¸åŒï¼Œå…·ä½“åº¦å¨˜éƒ½å¯ä»¥å®Œç¾è§£å†³ã€‚å¯ä»¥å‚è€ƒï¼š</p><p><a href="https://www.huaweicloud.com/articles/6db932c231bbfd41a2cf1bc34fca960c.html">https://www.huaweicloud.com/articles/6db932c231bbfd41a2cf1bc34fca960c.html</a></p><p>æ­¥éª¤ï¼š</p><p>æ”¯æŒè™šæ‹ŸåŒ–æŠ€æœ¯çš„å¯ä»¥åœ¨BIOSä¸­å¼€å¯ï¼Œå¼€å¯æ–¹æ³•å¦‚ä¸‹ï¼š</p><ol><li>è¿›å…¥BIOSã€‚å¼€æœºæ—¶æŒ‰F2æˆ–F12æˆ–DELæˆ–ESCç­‰é”®ï¼ˆå„ç”µè„‘æœ‰æ‰€ä¸åŒï¼‰ã€‚</li><li>è¿›å…¥BIOSåï¼Œæ‰¾åˆ°Configurationé€‰é¡¹ï¼Œé€‰æ‹©Intel Virtual Technologyå¹¶å›è½¦ï¼Œå°†å…‰æ ‡ç§»è‡³Enabledï¼Œç„¶åå†å›è½¦ï¼Œæœ€åæŒ‰F10ä¿å­˜å¹¶é€€å‡ºã€‚</li></ol><p>å¦‚æœæ‰¾ä¸åˆ°Configurationé€‰é¡¹ï¼Œå¯ä»¥è¯•è¯•ä¸‹é¢çš„æ–¹æ³•ï¼š</p><ol><li>æŸäº›HPï¼ˆæƒ æ™®ï¼‰ç”µè„‘è¿›å…¥BIOSåï¼Œéœ€è¦é€‰æ‹©SystemConfigurationï¼ˆç³»ç»Ÿé…ç½®ï¼‰èœå•ï¼Œç„¶åé€‰æ‹©Device Configurationï¼ˆè®¾å¤‡é…ç½®ï¼‰ï¼Œæ‰¾åˆ°Virtualization Technologyï¼Œè®¾ç½®ä¸ºEnabledã€‚</li><li>æŸäº›è”æƒ³Thinkpadç”µè„‘è¿›å…¥BIOSåï¼Œéœ€è¦é€‰æ‹©Securityèœå•ï¼Œç„¶åé€‰æ‹©Virtualizationï¼Œè®¾ç½®ä¸ºEnabledã€‚</li><li>æŸäº›DELLï¼ˆæˆ´å°”ï¼‰ç”µè„‘è¿›å…¥BIOSåï¼Œéœ€è¦é€‰æ‹©Processor Settingsèœå•ï¼Œç„¶åé€‰æ‹©VirtualizationTechnologyï¼Œè®¾ç½®ä¸ºEnabledã€‚<h2 id="äºŒã€æ·»åŠ -Hyper-V"><a href="#äºŒã€æ·»åŠ -Hyper-V" class="headerlink" title="äºŒã€æ·»åŠ  Hyper-V"></a>äºŒã€æ·»åŠ  Hyper-V</h2></li></ol><p>å¦‚æœä½ çš„ç³»ç»Ÿæ˜¯ WIN10 ä¸“ä¸šç‰ˆ/ä¼ä¸šç‰ˆ</p><p>æ‰“å¼€ æ§åˆ¶é¢æ¿ -&gt; ç¨‹åºå’ŒåŠŸèƒ½ -&gt; å¯ç”¨æˆ–å…³é—­WindowsåŠŸèƒ½ï¼Œå‹¾é€‰ Hyper-V ç›¸å…³é€‰é¡¹ï¼Œç¡®è®¤ï¼Œç­‰å¾…é…ç½®ï¼Œæç¤ºé‡å¯ï¼Œæ·»åŠ å®Œæˆ</p><p>å¦‚æœä½ çš„ç³»ç»Ÿæ˜¯ WIN10 å®¶åº­ç‰ˆï¼š</p><p>æ–°å»ºè®°äº‹æœ¬ï¼Œå¤åˆ¶ä»¥ä¸‹å‘½ä»¤ï¼Œåç¼€æ”¹ä¸º .bat æˆ– .cmdï¼Œä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pushd &quot;%~dp0&quot;</span><br><span class="line">dir &#x2F;b %SystemRoot%\servicing\Packages\*Hyper-V*.mum &gt;hyper-v.txt</span><br><span class="line">for &#x2F;f %%i in (&#39;findstr &#x2F;i . hyper-v.txt 2^&gt;nul&#39;) do dism &#x2F;online &#x2F;norestart &#x2F;add-package:&quot;%SystemRoot%\servicing\Packages\%%i&quot;</span><br><span class="line">del hyper-v.txt</span><br><span class="line">Dism &#x2F;online &#x2F;enable-feature &#x2F;featurename:Microsoft-Hyper-V-All &#x2F;LimitAccess &#x2F;ALL</span><br></pre></td></tr></table></figure><p>å‘½ä»¤å¤„ç†å®Œæˆåï¼Œè¾“å…¥ â€œYâ€ ç¡®è®¤é‡å¯ï¼Œè¿›è¡Œé…ç½®æ›´æ–°æ·»åŠ  Hyper-V å®Œæˆé¡ºä¾¿è¯´ä¸€ä¸‹ï¼ŒHyper-V ç›®å‰æ¯”è¾ƒå®Œç¾æ”¯æŒ Windowsã€Linux ç­‰ç³»ç»Ÿï¼Œä¸å¤ªæ”¯æŒè‹¹æœç­‰ç³»ç»Ÿï¼Œé™¤äº† Hyper-V ä¹Ÿå¯ä»¥è¯•è¯•å…¶ä»–è½¯ä»¶ï¼Œæ¯”å¦‚ VMWare ç­‰ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ¬æ–‡æ˜¯&lt;a href=&quot;https://class.imooc.com/sale/webfullstack&quot;&gt;ã€Šå¤§å‰ç«¯ã€‹&lt;/a&gt;é…å¥—ä»‹ç»å›¾æ–‡å†…å®¹ï¼Œä¸»è¦æ˜¯ä»‹ç»å¦‚ä½•åœ¨windows10å®¶åº­ç‰ˆå¦‚ä½•æ·»åŠ Hyper-V&lt;/p&gt;</summary>
    
    
    
    
    <category term="Hyper-V" scheme="https://www.toimc.com/tags/Hyper-V/"/>
    
    <category term="è™šæ‹Ÿæœº" scheme="https://www.toimc.com/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/"/>
    
  </entry>
  
  <entry>
    <title>Vue3ä¸­ä»¤äººå…´å¥‹çš„æ–°åŠŸèƒ½</title>
    <link href="https://www.toimc.com/Vue3%E4%B8%AD%E4%BB%A4%E4%BA%BA%E5%85%B4%E5%A5%8B%E7%9A%84%E6%96%B0%E5%8A%9F%E8%83%BD/"/>
    <id>https://www.toimc.com/Vue3%E4%B8%AD%E4%BB%A4%E4%BA%BA%E5%85%B4%E5%A5%8B%E7%9A%84%E6%96%B0%E5%8A%9F%E8%83%BD/</id>
    <published>2020-03-12T16:44:45.000Z</published>
    <updated>2020-12-01T02:33:05.214Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬<a href="./Vue3%E5%B0%86%E5%B8%A6%E6%9D%A5%E7%9A%84%E6%80%A7%E8%83%BD%E6%8F%90%E5%8D%87.md">äº†è§£äº†Vue 3å°†å¸¦æ¥çš„æ€§èƒ½æ”¹è¿›</a>ã€‚æˆ‘ä»¬å·²ç»çŸ¥é“ç”¨æ–°çš„Vueç¼–å†™çš„åº”ç”¨ç¨‹åºæ€§èƒ½ç‚¸è£‚ï¼ˆè¿è¡Œéå¸¸å¥½ï¼‰ï¼Œä½†æ€§èƒ½å¹¶ä¸æ˜¯æœ€é‡è¦çš„éƒ¨åˆ†ã€‚å¯¹æˆ‘ä»¬å¼€å‘äººå‘˜è€Œè¨€æœ€é‡è¦çš„æ˜¯ï¼Œæ–°ç‰ˆæœ¬å°†å¦‚ä½•å½±å“æˆ‘ä»¬ç¼–å†™ä»£ç çš„æ–¹å¼ã€‚</p><p>å¦‚ä»Šï¼ŒVue 3å¸¦æ¥äº†è®¸å¤šä»¤äººå…´å¥‹çš„æ–°åŠŸèƒ½ã€‚ å€¼å¾—åº†å¹¸çš„æ˜¯ï¼ŒVueå›¢é˜Ÿä¸»è¦ä»‹ç»äº†å¯¹å½“å‰APIçš„æ·»åŠ å’Œæ”¹è¿›ï¼Œè€Œä¸æ˜¯è¿›è¡Œé‡å¤§æ›´æ”¹ï¼Œå› æ­¤ï¼Œå·²ç»äº†è§£Vue 2çš„å¤§å®¶åº”è¯¥ä¼šéå¸¸ä¹ æƒ¯è¿™äº›å˜åŒ–ã€‚</p><p>è®©æˆ‘ä»¬ä»å¤§å¤šæ•°äººå¯èƒ½å¬è¯´è¿‡çš„APIå¼€å§‹â€¦</p><span id="more"></span><h2 id="åˆæˆAPIï¼ˆComposition-APIï¼‰"><a href="#åˆæˆAPIï¼ˆComposition-APIï¼‰" class="headerlink" title="åˆæˆAPIï¼ˆComposition APIï¼‰"></a>åˆæˆAPIï¼ˆComposition APIï¼‰</h2><p>ç»„åˆAPIæ˜¯Vueçš„ä¸‹ä¸€ä¸ªä¸»è¦ç‰ˆæœ¬ä¸­æœ€å¸¸ç”¨çš„è®¨è®ºå’Œç‰¹è‰²è¯­æ³•ã€‚è¿™æ˜¯ä¸€ç§å…¨æ–°çš„é€»è¾‘é‡ç”¨å’Œä»£ç ç»„ç»‡æ–¹æ³•ã€‚</p><p>å½“å‰ï¼Œæˆ‘ä»¬ä½¿ç”¨æ‰€è°“çš„Options APIæ„å»ºç»„ä»¶ã€‚ç°åœ¨ï¼Œæ·»åŠ åˆ°Vueç»„ä»¶çš„é€»è¾‘é€šå¸¸ä¼šé‡‡ç”¨ï¼šå¦‚<code>data</code>ï¼Œ<code>methods</code>ï¼Œ<code>computed</code>ç­‰è¿™ç§æ–¹æ³•ï¼Œæœ€å¤§ç¼ºç‚¹æ˜¯è¿™æ˜¯ä¸JavaScriptä»£ç åŸç”Ÿæ–¹å¼ã€‚æ‚¨éœ€è¦ç¡®åˆ‡äº†è§£æ¨¡æ¿ä¸­å¯ä»¥è®¿é—®å“ªäº›å±æ€§ï¼Œä»¥åŠ<code>this</code>å…³é”®å­—çš„è¡Œä¸ºã€‚åœ¨åå°ï¼ŒVueç¼–è¯‘å™¨éœ€è¦å°†æ­¤å±æ€§è½¬æ¢ä¸ºå·¥ä½œä»£ç ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æ— æ³•é€šè¿‡ä»è‡ªåŠ¨å»ºè®®æˆ–ç±»å‹æ£€æŸ¥ä¸­å—ç›Šï¼ˆè€Œå¤§å®¶æƒ³ä¸€æƒ³Typescriptï¼Œé©¬ä¸Šå°±ä¼šæ˜ç™½äº†ï¼‰ã€‚</p><p>Composition APIæ—¨åœ¨ï¼Œé€šè¿‡å°†ç»„ä»¶å±æ€§ä¸­å½“å‰å¯ç”¨çš„æœºåˆ¶å…¬å¼€ä¸ºJavaScriptå‡½æ•°æ¥è§£å†³æ­¤é—®é¢˜ã€‚Vueæ ¸å¿ƒå›¢é˜Ÿå°†Composition APIæè¿°ä¸º<em>â€œä¸€ç»„åŸºäºåŠŸèƒ½çš„é™„åŠ APIï¼Œå¯ä»¥çµæ´»åœ°ç»„åˆç»„ä»¶é€»è¾‘â€ã€‚</em>ç”¨Composition APIç¼–å†™çš„ä»£ç æ›´å…·å¯è¯»æ€§ï¼Œå¹¶ä¸”éƒ½æ˜¯åŸç”ŸJSï¼Œè¿™ä½¿å®ƒæ›´æ˜“äºé˜…è¯»å’Œå­¦ä¹ ã€‚</p><p>è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä½¿ç”¨æ–°çš„Composition APIç†è§£å…¶å·¥ä½œåŸç†çš„ç»„ä»¶çš„ç®€å•ç¤ºä¾‹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button @click=<span class="string">&quot;increment&quot;</span>&gt;</span><br><span class="line">    Count is: &#123;&#123; count &#125;&#125;, double is &#123;&#123; double &#125;&#125;, click to increment.</span><br><span class="line">  &lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; ref, computed, onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> count = ref(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">const</span> double = computed(<span class="function">() =&gt;</span> count.value * <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">increment</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      count.value++</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    onMounted(<span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;component mounted!&#x27;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      count,</span><br><span class="line">      double,</span><br><span class="line">      increment</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬å°†æ­¤ä»£ç åˆ†è§£ä¸ºå‡ éƒ¨åˆ†ï¼Œä»¥äº†è§£å‘ç”Ÿäº†ä»€ä¹ˆ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, computed, onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br></pre></td></tr></table></figure><p>æ­£å¦‚ä¹‹å‰æåˆ°çš„ï¼ŒComposition APIå°†ç»„ä»¶å±æ€§å…¬å¼€ä¸ºå‡½æ•°ï¼Œå› æ­¤ç¬¬ä¸€æ­¥æ˜¯å¯¼å…¥æ‰€éœ€çš„å‡½æ•°ã€‚å½“å‰æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨åˆ›å»ºååº”å¼å¼•ç”¨<code>ref</code>ï¼Œä½¿ç”¨è®¡ç®—å±æ€§åˆ›å»º<code>computed</code>å’Œä½¿ç”¨è®¿é—®ç”Ÿå‘½å‘¨æœŸæŒ‚é’©<code>onMounted</code>ã€‚</p><p>ç°åœ¨ï¼Œä½ å¯èƒ½æƒ³çŸ¥é“è¿™ç§ç¥ç§˜çš„<code>setup</code>æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br></pre></td></tr></table></figure><p>ç®€è€Œè¨€ä¹‹ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªå°†å±æ€§å’Œå‡½æ•°è¿”å›åˆ°æ¨¡æ¿çš„å‡½æ•°ï¼Œè€Œå·²ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œå£°æ˜æ‰€æœ‰ååº”æ€§å±æ€§ã€è®¡ç®—å±æ€§ã€è§‚å¯Ÿè€…å’Œç”Ÿå‘½å‘¨æœŸæŒ‚é’©ï¼Œç„¶åå°†å®ƒä»¬è¿”å›ï¼Œä»¥ä¾¿å¯ä»¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨å®ƒä»¬ã€‚</p><p>æˆ‘ä»¬æ²¡æœ‰ä»<code>setup</code>å‡½æ•°è¿”å›çš„å†…å®¹å°†åœ¨æ¨¡æ¿ä¸­ä¸å¯ç”¨ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> count = ref(<span class="number">0</span>)</span><br></pre></td></tr></table></figure><p>æ ¹æ®ä»¥ä¸Šå†…å®¹ï¼Œæˆ‘ä»¬å£°æ˜äº†å“åº”å¼çš„<code>count</code>ç”¨<code>ref</code>å‡½æ•°è°ƒç”¨ï¼Œå®ƒå¯ä»¥åŒ…è£…ä»»ä½•ç±»å‹å‚æ•°æˆ–å¯¹è±¡ï¼Œå¹¶è¿”å›å…¶åŒå‘å¼•ç”¨ï¼Œä¼ é€’çš„å…ƒç´ çš„å€¼å°†ä¿ç•™åœ¨<code>value</code>åˆ›å»ºçš„å¼•ç”¨çš„å±æ€§ä¸­ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¦è®¿é—®<code>count</code>å‚è€ƒå€¼ï¼Œåˆ™éœ€è¦æ˜ç¡®è¦æ±‚<code>count.value</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> double = computed(<span class="function">() =&gt;</span> count.value * <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">increment</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  count.value++</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€¦è¿™æ­£æ˜¯æˆ‘ä»¬åœ¨å£°æ˜è®¡ç®—å±æ€§<code>double</code>ä»¥åŠ<code>increment</code>å‡½æ•°æ—¶æ‰€åšçš„äº‹æƒ…ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">onMounted(<span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;component mounted!&#x27;</span>))</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>onMounted</code>é’©å­ï¼Œæˆ‘ä»¬ä¼šåœ¨å®‰è£…ç»„ä»¶æ—¶è®°å½•ä¸€äº›æ¶ˆæ¯ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">  count,</span><br><span class="line">  double,</span><br><span class="line">  increment</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œæˆ‘ä»¬è¿”å›<code>count</code>å’Œ<code>double</code>å±æ€§with <code>increment</code>æ–¹æ³•ï¼Œä»¥ä½¿å®ƒä»¬åœ¨æ¨¡æ¿ä¸­å¯ç”¨ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;increment&quot;</span>&gt;</span></span><br><span class="line">    Count is: &#123;&#123; count &#125;&#125;, double is &#123;&#123; double &#125;&#125;. Click to increment.</span><br><span class="line">  <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®<code>setup</code>æ¨¡æ¿ä¸­æ–¹æ³•è¿”å›çš„å±æ€§å’Œå‡½æ•°ï¼Œå°±åƒé€šè¿‡æ—§çš„Options APIå£°æ˜å®ƒä»¬ä¸€æ ·ã€‚</p><p>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡Options APIè½»æ¾å®ç°ã€‚</p><p><strong>æ–°çš„Composition APIçš„ä¿®æ”¹äº†ç¼–ç æ–¹å¼ï¼ŒåŠ å¼ºäº†åœ¨é‡ç”¨æˆ‘ä»¬çš„ä»£ç /é€»è¾‘æ—¶ä»£ç å—å¤ç”¨æ€§ã€‚</strong></p><p><strong>ä½¿ç”¨Composition APIè¿›è¡Œä»£ç é‡ç”¨</strong></p><p>æ–°çš„Composition APIå…·æœ‰æ›´å¤šä¼˜ç‚¹ï¼Œæ¯”å¦‚ï¼šä»£ç å¤ç”¨ã€‚å½“å‰ï¼Œå¦‚æœæˆ‘ä»¬è¦åœ¨å…¶ä»–ç»„ä»¶ä¹‹é—´å…±äº«ä¸€äº›ä»£ç ï¼Œåˆ™æœ‰ä¸¤ä¸ªå¯ç”¨é€‰é¡¹<code>mixins</code>å’Œ<code>ä½œç”¨åŸŸæ’æ§½</code>ã€‚ä¸¤è€…éƒ½æœ‰ç¼ºç‚¹ã€‚</p><p>å‡è®¾æˆ‘ä»¬è¦æå–<code>counter</code>åŠŸèƒ½å¹¶å°†å…¶åœ¨å…¶ä»–ç»„ä»¶ä¸­å¤ç”¨ã€‚åœ¨ä¸‹é¢ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°å¦‚ä½•å°†å…¶ä¸å¯ç”¨çš„APIå’Œæ–°çš„Composition APIç»“åˆä½¿ç”¨ï¼š</p><p>è®©æˆ‘ä»¬ä»mixinså¼€å§‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> CounterMixin <span class="keyword">from</span> <span class="string">&#x27;./mixins/counter&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  mixins: [CounterMixin]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>mixinsçš„æœ€å¤§ç¼ºç‚¹æ˜¯</strong>ï¼šæˆ‘ä»¬å¯¹å®ƒå®é™…ä¸Šæ·»åŠ åˆ°æˆ‘ä»¬çš„ç»„ä»¶ä¸­ä¸€æ— æ‰€çŸ¥ã€‚è¿™ä¸ä»…ä½¿æ¨ç†å˜å¾—å›°éš¾ï¼Œè€Œä¸”è¿˜å¯èƒ½<strong>å¯¼è‡´åç§°ä¸ç°æœ‰å±æ€§å’ŒåŠŸèƒ½å‘ç”Ÿå†²çªã€‚</strong></p><p>ç°åœ¨è¯¥æ˜¯ä½œç”¨åŸŸæ’æ§½äº†ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Counter</span> <span class="attr">v-slot</span>=<span class="string">&quot;&#123; count, increment &#125;&quot;</span>&gt;</span></span><br><span class="line">     &#123;&#123; count &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;increment&quot;</span>&gt;</span>Increment<span class="tag">&lt;/<span class="name">button</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;/<span class="name">Counter</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ä½œç”¨åŸŸæ’æ§½ï¼Œæˆ‘ä»¬ç¡®åˆ‡åœ°çŸ¥é“å¯ä»¥é€šè¿‡<code>v-slot</code>å±æ€§è®¿é—®å“ªäº›å±æ€§ï¼Œå› æ­¤æ›´å®¹æ˜“ç†è§£ä»£ç ã€‚è¿™ç§æ–¹æ³•çš„ç¼ºç‚¹æ˜¯ï¼šæˆ‘ä»¬åªèƒ½åœ¨æ¨¡æ¿ä¸­è®¿é—®å®ƒï¼Œå¹¶ä¸”ä»…åœ¨<code>Counter</code>ç»„ä»¶èŒƒå›´å†…å¯ç”¨ã€‚</p><p>ç°åœ¨æ˜¯æ—¶å€™ä½¿ç”¨Composition APIäº†ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useCounter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> count = ref(<span class="number">0</span>)</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">increment</span> (<span class="params"></span>) </span>&#123; count.value++ &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    count,</span><br><span class="line">    incrememt</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  setup () &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; count, increment &#125; = useCounter()</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      count,</span><br><span class="line">      increment</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ˜¯ä¸æ˜¯æ›´ä¼˜é›…ï¼Ÿæˆ‘ä»¬ä¸å—æ¨¡æ¿å’Œç»„ä»¶èŒƒå›´çš„é™åˆ¶ï¼Œå¹¶ä¸”ç¡®åˆ‡åœ°çŸ¥é“å¯ä»¥ä»è®¡æ•°å™¨è®¿é—®å“ªäº›å±æ€§ã€‚å¦å¤–ï¼Œæˆ‘ä»¬å¯ä»¥ä»ç¼–è¾‘å™¨ä¸­å¯ç”¨çš„ä»£ç å®Œæˆä¸­å—ç›Šï¼Œå› ä¸º<code>useCounter</code>å®ƒåªæ˜¯ä¸€ä¸ªè¿”å›æŸäº›å±æ€§çš„å‡½æ•°ã€‚å¹•åæ²¡æœ‰é­”åŠ›ï¼Œå› æ­¤ç¼–è¾‘å™¨å¯ä»¥å¸®åŠ©æˆ‘ä»¬è¿›è¡Œç±»å‹æ£€æŸ¥å’Œå»ºè®®ã€‚</p><p>è¿™ä¹Ÿæ˜¯ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“çš„ä¸€ç§æ›´ä¼˜é›…çš„æ–¹å¼ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬è¦ä½¿ç”¨Vuexï¼Œåˆ™å¯ä»¥æ˜¾å¼ä½¿ç”¨<code>useStore</code>å‡½æ•°è€Œä¸æ˜¯æ±¡æŸ“VueåŸå‹ï¼ˆ<code>this.$store</code>ï¼‰ã€‚è¿™ç§æ–¹æ³•è¿˜å¯ä»¥æ¶ˆé™¤Vueæ’ä»¶çš„å¹•åé­”åŠ›ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; commit, dispatch &#125; = useStore()</span><br></pre></td></tr></table></figure><p>å¦‚æœæ‚¨æƒ³äº†è§£æœ‰å…³Composition APIåŠå…¶ç”¨ä¾‹çš„æ›´å¤šä¿¡æ¯ï¼Œæˆ‘å¼ºçƒˆå»ºè®®æ‚¨ä»Vueå›¢é˜Ÿé˜…è¯»<a href="https://vue-composition-api-rfc.netlify.com/">æ­¤æ–‡æ¡£</a>ï¼Œ<a href="https://vue-composition-api-rfc.netlify.com/">è¯¥æ–‡æ¡£</a>è§£é‡Šäº†æ–°APIèƒŒåçš„åŸå› å¹¶æå‡ºäº†æœ€ä½³ç”¨ä¾‹ã€‚Vueæ ¸å¿ƒå›¢é˜Ÿçš„ThorstenLÃ¼nborg è¿˜æä¾›äº†ä¸€ä¸ª<a href="https://github.com/LinusBorg/composition-api-demos">å¾ˆæ£’çš„å­˜å‚¨åº“</a>ï¼Œå…¶ä¸­åŒ…å«Composition APIä½¿ç”¨ç¤ºä¾‹ã€‚</p><h2 id="å…¨å±€å®‰è£…-é…ç½®APIæ›´æ”¹"><a href="#å…¨å±€å®‰è£…-é…ç½®APIæ›´æ”¹" class="headerlink" title="å…¨å±€å®‰è£…/é…ç½®APIæ›´æ”¹"></a>å…¨å±€å®‰è£…/é…ç½®APIæ›´æ”¹</h2><p>æˆ‘ä»¬å¯ä»¥åœ¨å®ä¾‹åŒ–å’Œé…ç½®åº”ç”¨ç¨‹åºçš„æ–¹å¼ä¸Šæ‰¾åˆ°å¦ä¸€ä¸ªé‡å¤§å˜åŒ–ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å®ƒç°åœ¨å¦‚ä½•å·¥ä½œï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.config.ignoredElements = [<span class="regexp">/^app-/</span>]</span><br><span class="line">Vue.use(<span class="comment">/* ... */</span>)</span><br><span class="line">Vue.mixin(<span class="comment">/* ... */</span>)</span><br><span class="line">Vue.component(<span class="comment">/* ... */</span>)</span><br><span class="line">Vue.directive(<span class="comment">/* ... */</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App)</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><p>å½“å‰ï¼Œæˆ‘ä»¬æ­£åœ¨ä½¿ç”¨å…¨å±€<code>Vue</code>å¯¹è±¡æä¾›ä»»ä½•é…ç½®å¹¶åˆ›å»ºæ–°çš„Vueå®ä¾‹ã€‚å¯¹<code>Vue</code>å¯¹è±¡æ‰€åšçš„ä»»ä½•æ›´æ”¹éƒ½ä¼šå½±å“æ¯ä¸ªVueå®ä¾‹å’Œç»„ä»¶ã€‚</p><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å®ƒå¦‚ä½•åœ¨Vue 3ä¸­è¿è¡Œï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = createApp(App)</span><br><span class="line"></span><br><span class="line">app.config.ignoredElements = [<span class="regexp">/^app-/</span>]</span><br><span class="line">app.use(<span class="comment">/* ... */</span>)</span><br><span class="line">app.mixin(<span class="comment">/* ... */</span>)</span><br><span class="line">app.component(<span class="comment">/* ... */</span>)</span><br><span class="line">app.directive(<span class="comment">/* ... */</span>)</span><br><span class="line"></span><br><span class="line">app.mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><p>æ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œæ¯ä¸ªé…ç½®éƒ½é™äºä½¿ç”¨å®šä¹‰çš„æŸä¸ªVueåº”ç”¨ç¨‹åº<code>createApp</code>ã€‚</p><p>å®ƒå¯ä»¥ä½¿æ‚¨çš„ä»£ç æ›´æ˜“äºç†è§£ï¼Œå¹¶ä¸”ä¸æ˜“å‡ºç°ç”±ç¬¬ä¸‰æ–¹æ’ä»¶å¼•èµ·çš„æ„å¤–é—®é¢˜ã€‚å½“å‰ï¼Œå¦‚æœæŸäº›ç¬¬ä¸‰æ–¹è§£å†³æ–¹æ¡ˆæ­£åœ¨ä¿®æ”¹Vueå¯¹è±¡ï¼Œåˆ™å®ƒå¯èƒ½ä»¥æ„æƒ³ä¸åˆ°çš„æ–¹å¼ï¼ˆå°¤å…¶æ˜¯å…¨å±€æ··åˆï¼‰å½±å“æ‚¨çš„åº”ç”¨ç¨‹åºï¼Œè€ŒVue 3åˆ™æ— æ³•å®ç°ã€‚</p><p>å½“å‰åœ¨<a href="https://github.com/vuejs/rfcs/pull/29">æ­¤RFC</a> ä¸­è®¨è®ºäº†æ­¤APIæ›´æ”¹ï¼Œè¿™æ„å‘³ç€å°†æ¥å¯èƒ½ä¼šæ›´æ”¹ã€‚</p><h2 id="ç¢ç‰‡ï¼ˆFragmentsï¼‰"><a href="#ç¢ç‰‡ï¼ˆFragmentsï¼‰" class="headerlink" title="ç¢ç‰‡ï¼ˆFragmentsï¼‰"></a>ç¢ç‰‡ï¼ˆFragmentsï¼‰</h2><p>æˆ‘ä»¬å¯ä»¥åœ¨Vue 3ä¸­æœŸå¾…çš„å¦ä¸€ä¸ªæ¿€åŠ¨äººå¿ƒçš„é™„åŠ åŠŸèƒ½æ˜¯ç‰‡æ®µã€‚</p><p>æ‚¨å¯èƒ½ä¼šé—®ä»€ä¹ˆç¢ç‰‡ï¼Ÿå¥½å§ï¼Œå¦‚æœæ‚¨åˆ›å»ºä¸€ä¸ªVueç»„ä»¶ï¼Œåˆ™å®ƒåªèƒ½æœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹ã€‚</p><p>è¿™æ„å‘³ç€æ— æ³•åˆ›å»ºè¿™æ ·çš„ç»„ä»¶ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>World<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åŸå› æ˜¯ä»£è¡¨ä»»ä½•Vueç»„ä»¶çš„Vueå®ä¾‹éƒ½éœ€è¦ç»‘å®šåˆ°å•ä¸ªDOMå…ƒç´ ä¸­ã€‚åˆ›å»ºå…·æœ‰å¤šä¸ªDOMèŠ‚ç‚¹çš„ç»„ä»¶çš„å”¯ä¸€æ–¹æ³•æ˜¯é€šè¿‡åˆ›å»ºä¸å…·æœ‰åŸºç¡€Vueå®ä¾‹çš„åŠŸèƒ½ç»„ä»¶ã€‚</p><p>äº‹å®è¯æ˜ï¼ŒReactç¤¾åŒºä¹Ÿæœ‰åŒæ ·çš„é—®é¢˜ã€‚ä»–ä»¬æå‡ºçš„è§£å†³æ–¹æ¡ˆæ˜¯ä¸€ä¸ªåä¸ºFragmentçš„è™šæ‹Ÿå…ƒç´ ã€‚çœ‹èµ·æ¥æˆ–å¤šæˆ–å°‘æ˜¯è¿™æ ·çš„ï¼›</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Columns</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;React.Fragment&gt;</span><br><span class="line">        &lt;td&gt;Hello&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;World&lt;/td&gt;</span><br><span class="line">      &lt;/React.Fragment&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å³ä½¿Fragmentçœ‹èµ·æ¥åƒä¸€ä¸ªæ™®é€šçš„DOMå…ƒç´ ï¼Œå®ƒä¹Ÿæ˜¯è™šæ‹Ÿçš„ï¼Œæ ¹æœ¬ä¸ä¼šåœ¨DOMæ ‘ä¸­å‘ˆç°ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç»„ä»¶åŠŸèƒ½ç»‘å®šåˆ°å•ä¸ªå…ƒç´ ä¸­ï¼Œè€Œæ— éœ€åˆ›å»ºå†—ä½™DOMèŠ‚ç‚¹ã€‚</p><p>å½“å‰ï¼Œæ‚¨å¯ä»¥åœ¨å¸¦æœ‰<a href="https://vuejsdevelopers.com/2018/09/11/vue-multiple-root-fragments/">vue-fragments</a>åº“çš„Vue 2ä¸­ä½¿ç”¨ç‰‡æ®µï¼Œè€Œåœ¨Vue 3ä¸­ï¼Œæ‚¨å¯ä»¥ç«‹å³ä½¿ç”¨å®ƒï¼</p><h2 id="Suspenseç»„ä»¶"><a href="#Suspenseç»„ä»¶" class="headerlink" title="Suspenseç»„ä»¶"></a>Suspenseç»„ä»¶</h2><p>Reactç”Ÿæ€ç³»ç»Ÿä¸­å¦ä¸€ä¸ªå°†åœ¨Vue 3ä¸­é‡‡ç”¨çš„å¥½ä¸»æ„æ˜¯Suspenseç»„ä»¶ã€‚</p><p>æŒ‚èµ·å°†æŒ‚èµ·ç»„ä»¶æ¸²æŸ“å¹¶æ¸²æŸ“å›é€€ç»„ä»¶ï¼Œç›´åˆ°æ»¡è¶³æ¡ä»¶ä¸ºæ­¢ã€‚åœ¨Vue London EvanæœŸé—´ï¼Œæ‚¨ç®€çŸ­åœ°è°ˆåˆ°äº†è¿™ä¸ªä¸»é¢˜ï¼Œå¹¶å‘æˆ‘ä»¬å±•ç¤ºäº†æˆ‘ä»¬å¯ä»¥æœŸæœ›çš„APIã€‚äº‹å®è¯æ˜ï¼ŒSuspenseåªæ˜¯å…·æœ‰æ’æ§½çš„ç»„ä»¶ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Suspense</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Suspended-component</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">fallback</span>&gt;</span></span><br><span class="line">    Loading...</span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Suspense</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åå¤‡å†…å®¹å°†ä¸€ç›´æ˜¾ç¤ºåˆ°<code>Suspended-component</code>å®Œå…¨æ¸²æŸ“ä¸ºæ­¢ã€‚æŒ‚èµ·å¯ä»¥ç­‰å¾…ï¼Œç›´åˆ°è¯¥ç»„ä»¶è¢«ä¸‹è½½ï¼ˆå¦‚æœè¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥ç»„ä»¶ï¼‰ï¼Œæˆ–è€…åœ¨<code>setup</code>åŠŸèƒ½ä¸Šæ‰§è¡Œä¸€äº›å¼‚æ­¥æ“ä½œã€‚</p><h2 id="å¤šä¸ªv-modelåŒæ—¶ä½¿ç”¨"><a href="#å¤šä¸ªv-modelåŒæ—¶ä½¿ç”¨" class="headerlink" title="å¤šä¸ªv-modelåŒæ—¶ä½¿ç”¨"></a>å¤šä¸ªv-modelåŒæ—¶ä½¿ç”¨</h2><p><code>v-model</code>æ˜¯ä¸€ç§æŒ‡ä»¤ï¼Œå¯ç”¨äºåœ¨ç»™å®šç»„ä»¶ä¸Šå®ç°åŒå‘ç»‘å®šã€‚æˆ‘ä»¬å¯ä»¥ä¼ é€’ååº”æ€§å±æ€§å¹¶ä»ç»„ä»¶å†…éƒ¨å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚</p><p>æˆ‘ä»¬<code>v-model</code>ä»è¡¨å•å…ƒç´ éå¸¸äº†è§£ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;property /&gt;</span></span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯æ‚¨çŸ¥é“æ‚¨å¯ä»¥ä½¿ç”¨<code>v-model</code>æ¯ä¸ªç»„ä»¶å—ï¼Ÿå†…å¹•<code>v-model</code>åªæ˜¯ä¼ é€’<code>value</code>å±æ€§å’Œä¾¦å¬<code>input</code>äº‹ä»¶çš„æ·å¾„ã€‚å°†ä»¥ä¸Šç¤ºä¾‹é‡å†™ä¸ºä»¥ä¸‹è¯­æ³•å°†å…·æœ‰å®Œå…¨ç›¸åŒçš„æ•ˆæœï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">v-bind:value</span>=<span class="string">&quot;property&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-on:input</span>=<span class="string">&quot;property = $event.target.value&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ç”šè‡³å¯ä»¥ä½¿ç”¨components <code>model</code>å±æ€§æ›´æ”¹é»˜è®¤å±æ€§å’Œäº‹ä»¶çš„åç§°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">model: &#123;</span><br><span class="line">  prop: <span class="string">&#x27;checked&#x27;</span>,</span><br><span class="line">  event: <span class="string">&#x27;change&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­£å¦‚ä¸Šé¢æ‰€ç¤ºï¼Œvue2.xä¸­é‡‡ç”¨<code>v-model</code>æ—¶ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›åœ¨ç»„ä»¶ä¸­è¿›è¡ŒåŒå‘ç»‘å®šï¼Œé‚£ä¹ˆä¼ªæŒ‡ä»¤å¯èƒ½æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„è¯­æ³•æ±‚å’Œè€…ã€‚ä¸å¹¸çš„æ˜¯ï¼Œ<code>v-model</code>æ¯ä¸ªç»„ä»¶åªèƒ½æœ‰ä¸€ä¸ªç»„ä»¶ã€‚</p><p>å¹¸è¿çš„æ˜¯ï¼Œåœ¨Vue 3ä¸­è¿™ä¸ä¼šæˆä¸ºé—®é¢˜ï¼æ‚¨å°†èƒ½å¤Ÿæä¾›<code>v-model</code>å±æ€§åç§°ï¼Œå¹¶æ ¹æ®éœ€è¦æ‹¥æœ‰ä»»æ„æ•°é‡çš„å±æ€§ã€‚åœ¨ä¸‹é¢ï¼Œæ‚¨å¯ä»¥<code>v-model</code>åœ¨è¡¨å•ç»„ä»¶ä¸­æ‰¾åˆ°ä¸¤ä¸ªçš„ç¤ºä¾‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;InviteeForm</span><br><span class="line">  v-model:name=&quot;inviteeName&quot;</span><br><span class="line">  v-model:email=&quot;inviteeEmail&quot;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure><p>å½“å‰åœ¨<a href="https://github.com/vuejs/rfcs/pull/31">æ­¤RFC</a> ä¸­è®¨è®ºäº†æ­¤APIæ›´æ”¹ï¼Œè¿™æ„å‘³ç€å°†æ¥å¯èƒ½ä¼šæ›´æ”¹ã€‚</p><h2 id="Portalsç»„ä»¶ï¼ˆé­”æ³•æç¤ºç±»ç»„ä»¶ï¼‰"><a href="#Portalsç»„ä»¶ï¼ˆé­”æ³•æç¤ºç±»ç»„ä»¶ï¼‰" class="headerlink" title="Portalsç»„ä»¶ï¼ˆé­”æ³•æç¤ºç±»ç»„ä»¶ï¼‰"></a>Portalsç»„ä»¶ï¼ˆé­”æ³•æç¤ºç±»ç»„ä»¶ï¼‰</h2><p>Portalsæ˜¯ç‰¹æ®Šçš„ç»„ä»¶ï¼Œæ—¨åœ¨åœ¨å½“å‰ç»„ä»¶ä¹‹å¤–å‘ˆç°æŸäº›å†…å®¹ã€‚è¿™ä¹Ÿæ˜¯<a href="https://pl.reactjs.org/docs/portals.html">Reactæœ¬èº«å®ç°çš„åŠŸèƒ½ä¹‹ä¸€(https://pl.reactjs.org/docs/portals.html)</a>ã€‚è¿™å°±æ˜¯Reactæ–‡æ¡£å…³äºé—¨æˆ·çš„å†…å®¹ï¼š</p><blockquote><p>â€œ<em>Portals provide a first-class way to render children into a DOM node that exists outside the DOM hierarchy of the parent component.</em>â€œ</p></blockquote><p>è¿™æ˜¯å¤„ç†æ¨¡æ€æ¡†ã€å¼¹å‡ºçª—å£å’Œé€šå¸¸æ˜¾ç¤ºåœ¨é¡µé¢é¡¶éƒ¨çš„ç»„ä»¶çš„ä¸€ç§éå¸¸å¥½çš„æ–¹æ³•ã€‚é€šè¿‡ä½¿ç”¨Portalsï¼Œæ‚¨å¯ä»¥ç¡®ä¿æ²¡æœ‰ä»»ä½•ä¸»æœºç»„ä»¶CSSè§„åˆ™ï¼Œä¼šå½±å“æ‚¨è¦æ˜¾ç¤ºçš„ç»„ä»¶ï¼Œå¹¶ä½¿æ‚¨å…äºä½¿ç”¨è¿›è¡Œè®¨åŒçš„é»‘å®¢æ”»å‡»<code>z-index</code>ã€‚</p><p>å¯¹äºæ¯ä¸ªé—¨æˆ·ï¼Œæˆ‘ä»¬éœ€è¦æŒ‡å®šå®ƒçš„ç›®æ ‡ç›®æ ‡ï¼Œåœ¨å…¶ä¸­å°†å‘ˆç°æç¤ºç±»å‹å†…å®¹ã€‚åœ¨ä¸‹é¢ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°<a href="https://github.com/LinusBorg/portal-vue">portal-vue</a>åº“çš„å®ç°ï¼Œè¯¥å®ç°å°†æ­¤åŠŸèƒ½æ·»åŠ åˆ°Vue 2ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">portal</span> <span class="attr">to</span>=<span class="string">&quot;destination&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>This slot content will be rendered wherever thportal-target with name &#x27;destination&#x27;</span><br><span class="line">    is  located.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">portal</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">portal-target</span> <span class="attr">name</span>=<span class="string">&quot;destination&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">  This component can be located anywhere in your App.</span></span><br><span class="line"><span class="comment">  The slot content of the above portal component wilbe rendered here.</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">portal-target</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Vue 3å°†é™„å¸¦å¯¹é—¨æˆ·çš„å¼€ç®±å³ç”¨æ”¯æŒï¼</p><h2 id="æ–°çš„è‡ªå®šä¹‰æŒ‡ä»¤API"><a href="#æ–°çš„è‡ªå®šä¹‰æŒ‡ä»¤API" class="headerlink" title="æ–°çš„è‡ªå®šä¹‰æŒ‡ä»¤API"></a>æ–°çš„è‡ªå®šä¹‰æŒ‡ä»¤API</h2><p>è‡ªå®šä¹‰æŒ‡ä»¤APIåœ¨Vue 3ä¸­å°†ç•¥æœ‰å˜åŒ–ï¼Œä»¥æ›´å¥½åœ°ä¸ç»„ä»¶ç”Ÿå‘½å‘¨æœŸä¿æŒä¸€è‡´ã€‚è¿™é¡¹æ›´æ”¹å°†ä½¿APIæ›´åŠ ç›´è§‚ï¼Œä»è€Œä½¿æ–°æ‰‹æ›´å®¹æ˜“ç†è§£å’Œå­¦ä¹ APIã€‚</p><p>è¿™æ˜¯å½“å‰çš„è‡ªå®šä¹‰æŒ‡ä»¤APIï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MyDirective = &#123;</span><br><span class="line">  <span class="function"><span class="title">bind</span>(<span class="params">el, binding, vnode, prevVnode</span>)</span> &#123;&#125;,</span><br><span class="line">  <span class="function"><span class="title">inserted</span>(<span class="params"></span>)</span> &#123;&#125;,</span><br><span class="line">  <span class="function"><span class="title">update</span>(<span class="params"></span>)</span> &#123;&#125;,</span><br><span class="line">  <span class="function"><span class="title">componentUpdated</span>(<span class="params"></span>)</span> &#123;&#125;,</span><br><span class="line">  <span class="function"><span class="title">unbind</span>(<span class="params"></span>)</span> &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€¦â€¦è¿™å°±æ˜¯Vue 3ä¸­çš„æ ·å­ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MyDirective = &#123;</span><br><span class="line">  <span class="function"><span class="title">beforeMount</span>(<span class="params">el, binding, vnode, prevVnode</span>)</span> &#123;&#125;,</span><br><span class="line">  <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;&#125;,</span><br><span class="line">  <span class="function"><span class="title">beforeUpdate</span>(<span class="params"></span>)</span> &#123;&#125;,</span><br><span class="line">  <span class="function"><span class="title">updated</span>(<span class="params"></span>)</span> &#123;&#125;,</span><br><span class="line">  <span class="function"><span class="title">beforeUnmount</span>(<span class="params"></span>)</span> &#123;&#125;, <span class="comment">// new</span></span><br><span class="line">  <span class="function"><span class="title">unmounted</span>(<span class="params"></span>)</span> &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å³ä½¿è¿™æ˜¯ä¸€é¡¹é‡å¤§æ›´æ”¹ï¼Œä¹Ÿåº”è¯¥ä½¿ç”¨Vueå…¼å®¹æ€§æ„å»ºè½»æ¾æ¶µç›–ã€‚</p><p>å½“å‰åœ¨<a href="https://github.com/vuejs/rfcs/pull/32/files">æ­¤RFC</a> ä¸­è®¨è®ºäº†æ­¤APIæ›´æ”¹ï¼Œè¿™æ„å‘³ç€å°†æ¥å¯èƒ½ä¼šæ›´æ”¹ã€‚</p><h2 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h2><p>é™¤äº†Composition APIï¼ˆå®ƒæ˜¯Vue 3ä¸­æœ€å¤§çš„ä¸»è¦æ–°APIï¼‰ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ‰¾åˆ°å¾ˆå¤šè¾ƒå°çš„æ”¹è¿›ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒVueæ­£åœ¨æœç€æ›´å¥½çš„å¼€å‘äººå‘˜ä½“éªŒå’Œæ›´ç®€å•ï¼Œæ›´ç›´è§‚çš„APIè¿ˆè¿›ã€‚ä¹Ÿå¾ˆé«˜å…´çœ‹åˆ°Vueå›¢é˜Ÿå†³å®šé‡‡ç”¨è®¸å¤šæƒ³æ³•ï¼Œè€Œè¿™äº›æƒ³æ³•ç›®å‰åªèƒ½é€šè¿‡ç¬¬ä¸‰æ–¹åº“æä¾›ç»™æ¡†æ¶çš„æ ¸å¿ƒã€‚</p><p>ä¸Šé¢çš„åˆ—è¡¨ä»…è¡¨ç¤ºä¸»è¦çš„APIæ›´æ”¹å’Œæ”¹è¿›ã€‚å¦‚æœæ‚¨å¯¹å…¶ä»–åº”ç”¨ç¨‹åºæ„Ÿåˆ°å¥½å¥‡ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹<a href="https://github.com/vuejs/rfcs/">Vue RFCså­˜å‚¨åº“ã€‚</a>ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬&lt;a href=&quot;./Vue3%E5%B0%86%E5%B8%A6%E6%9D%A5%E7%9A%84%E6%80%A7%E8%83%BD%E6%8F%90%E5%8D%87.md&quot;&gt;äº†è§£äº†Vue 3å°†å¸¦æ¥çš„æ€§èƒ½æ”¹è¿›&lt;/a&gt;ã€‚æˆ‘ä»¬å·²ç»çŸ¥é“ç”¨æ–°çš„Vueç¼–å†™çš„åº”ç”¨ç¨‹åºæ€§èƒ½ç‚¸è£‚ï¼ˆè¿è¡Œéå¸¸å¥½ï¼‰ï¼Œä½†æ€§èƒ½å¹¶ä¸æ˜¯æœ€é‡è¦çš„éƒ¨åˆ†ã€‚å¯¹æˆ‘ä»¬å¼€å‘äººå‘˜è€Œè¨€æœ€é‡è¦çš„æ˜¯ï¼Œæ–°ç‰ˆæœ¬å°†å¦‚ä½•å½±å“æˆ‘ä»¬ç¼–å†™ä»£ç çš„æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚ä»Šï¼ŒVue 3å¸¦æ¥äº†è®¸å¤šä»¤äººå…´å¥‹çš„æ–°åŠŸèƒ½ã€‚ å€¼å¾—åº†å¹¸çš„æ˜¯ï¼ŒVueå›¢é˜Ÿä¸»è¦ä»‹ç»äº†å¯¹å½“å‰APIçš„æ·»åŠ å’Œæ”¹è¿›ï¼Œè€Œä¸æ˜¯è¿›è¡Œé‡å¤§æ›´æ”¹ï¼Œå› æ­¤ï¼Œå·²ç»äº†è§£Vue 2çš„å¤§å®¶åº”è¯¥ä¼šéå¸¸ä¹ æƒ¯è¿™äº›å˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬ä»å¤§å¤šæ•°äººå¯èƒ½å¬è¯´è¿‡çš„APIå¼€å§‹â€¦&lt;/p&gt;</summary>
    
    
    
    
    <category term="Vue3" scheme="https://www.toimc.com/tags/Vue3/"/>
    
    <category term="Vuejs" scheme="https://www.toimc.com/tags/Vuejs/"/>
    
  </entry>
  
  <entry>
    <title>Vue3å°†å¸¦æ¥å·¨å¤§çš„æ€§èƒ½æå‡</title>
    <link href="https://www.toimc.com/Vue3%E5%B0%86%E5%B8%A6%E6%9D%A5%E5%B7%A8%E5%A4%A7%E7%9A%84%E6%80%A7%E8%83%BD%E6%8F%90%E5%8D%87/"/>
    <id>https://www.toimc.com/Vue3%E5%B0%86%E5%B8%A6%E6%9D%A5%E5%B7%A8%E5%A4%A7%E7%9A%84%E6%80%A7%E8%83%BD%E6%8F%90%E5%8D%87/</id>
    <published>2020-03-12T16:11:04.000Z</published>
    <updated>2021-03-02T15:36:52.405Z</updated>
    
    <content type="html"><![CDATA[<p>å³å°†å‘å¸ƒçš„Vue.jsçš„ç¬¬ä¸‰ä¸ªä¸»è¦ç‰ˆæœ¬ã€‚</p><p>é€šè¿‡ä¸‹é¢çš„è®¨è®ºï¼Œè™½ç„¶è¿˜ä¸èƒ½ç¡®å®šæ‰€æœ‰å†…å®¹ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥æ”¾å¿ƒåœ°è®¤ä¸ºï¼Œå®ƒå°†æ˜¯å¯¹å½“å‰ç‰ˆæœ¬ï¼ˆå·²ç»éå¸¸å‡ºè‰²ï¼‰çš„å·¨å¤§æ”¹è¿›ã€‚Vueå›¢é˜Ÿåœ¨æ”¹è¿›æ¡†æ¶APIæ–¹é¢åšå¾—éå¸¸å‡ºè‰²ã€‚Evan Youå°†Vue 3çš„ç›®æ ‡æè¿°ä¸ºï¼š</p><ul><li>è®©å®ƒ<strong>æ›´å¿«</strong></li><li>è®©å®ƒ<strong>æ›´å°</strong></li><li>ä½¿å®ƒ<strong>æ›´æ˜“äºç»´æŠ¤</strong></li><li>ä½¿<strong>åŸç”Ÿç›®æ ‡æ›´å®¹æ˜“</strong></li><li>è®©<strong>æ‚¨çš„ç”Ÿæ´»æ›´è½»æ¾</strong></li></ul><p>é€šè¿‡æŸ¥çœ‹RFCï¼Œæˆ‘ç¡®ä¿¡ä¸Šè¿°æ‰€æœ‰ç›®æ ‡éƒ½å°†æ¯«æ— é—®é¢˜åœ°å®ç°ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†å¼•å¯¼æ‚¨å®Œæˆä¸€äº›å¯¹æˆ‘æ¥è¯´æœ€æœ‰è¶£çš„æ›´æ”¹ï¼Œè¿™äº›æ›´æ”¹å¯¹æˆ‘çš„å½±å“å’Œå¯èƒ½æ€§è€Œè¨€ã€‚</p><span id="more"></span><h2 id="æ€§èƒ½ä¼˜åŒ–"><a href="#æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–"></a>æ€§èƒ½ä¼˜åŒ–</h2><p>åœ¨æ¢ç©¶æŸäº›APIä¹‹å‰ï¼Œä½œä¸ºæ€§èƒ½æ€ªèƒï¼Œæˆ‘æƒ³è°ˆä¸€è°ˆVue 3çš„æ€§èƒ½ã€‚è¿˜æœ‰å¾ˆå¤šäº‹æƒ…è¦è®¨è®ºï¼æˆ‘ä»¬å‡ ä¹å¯ä»¥åœ¨æ¯ä¸ªè¡¨é¢ä¸Šæ‰¾åˆ°æ˜æ˜¾çš„æ”¹è¿›ï¼</p><p>è®©æˆ‘ä»¬ä»Vue 3çš„æ†ç»‘åŒ…å¤§å°å¼€å§‹ã€‚</p><p>å½“å‰æœ€å°åŒ–å’Œå‹ç¼©çš„Vueè¿è¡Œæ—¶æƒé‡çº¦ä¸º20kBï¼ˆå½“å‰2.6.10ç‰ˆæœ¬ä¸º22.8kBï¼‰ã€‚<strong>Vue 3æ†ç»‘åŒ…ä¼°è®¡é‡çº¦ä¸€åŠï¼Œå› æ­¤åªæœ‰ã€œ10kBï¼</strong></p><h2 id="å…¨å±€APIåˆ†å—ï¼ˆTree-Shakeæœºåˆ¶ï¼‰"><a href="#å…¨å±€APIåˆ†å—ï¼ˆTree-Shakeæœºåˆ¶ï¼‰" class="headerlink" title="å…¨å±€APIåˆ†å—ï¼ˆTree Shakeæœºåˆ¶ï¼‰"></a>å…¨å±€APIåˆ†å—ï¼ˆTree Shakeæœºåˆ¶ï¼‰</h2><p>è¯¸å¦‚æ›´å¥½çš„æ¨¡å—åŒ–ä¹‹ç±»çš„è®¸å¤šå…¶ä»–ä¼˜åŒ–ä¹‹ä¸Šï¼ŒVue 3æºä»£ç å°†åŠ å…¥<a href="https://webpack.js.org/guides/tree-shaking/">tree-shake</a>ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœæ‚¨ä¸ä½¿ç”¨å…¶æŸäº›åŠŸèƒ½ï¼ˆä¾‹å¦‚<code>component</code>æˆ–è€…<code>v-show</code>æŒ‡ä»¤ï¼‰ï¼Œå®ƒä»¬å°†ä¸ä¼šåŒ…å«åœ¨æ‚¨çš„åŸºç¡€åŒ…ä¸­ã€‚</p><p>å½“å‰ï¼Œæ— è®ºæˆ‘ä»¬ä»Vueæ ¸å¿ƒä½¿ç”¨ä»€ä¹ˆåŠŸèƒ½ï¼Œå®ƒä»¬æœ€ç»ˆéƒ½ä¼šå‡ºç°åœ¨ç”Ÿäº§ä»£ç ä¸­ï¼Œå› ä¸ºVueå®ä¾‹è¢«å¯¼å‡ºä¸ºå•ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”æ†ç»‘ç¨‹åºæ— æ³•æ£€æµ‹åˆ°è¯¥å¯¹è±¡çš„å“ªäº›å±æ€§åœ¨ä»£ç ä¸­ä½¿ç”¨ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// Vue 2.x - whole `Vue` object is bundled for production </span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.nextTick(<span class="function">() =&gt;</span> &#123;&#125;)</span><br><span class="line"><span class="keyword">const</span> obj =  Vue.observable(&#123;&#125;)</span><br></pre></td></tr></table></figure><p>ä¸ºäº†ä½¿å…¨å±€APIå¯ä»¥è¿›è¡Œä»£ç åˆ†å—ï¼ŒVueå›¢é˜Ÿå†³å®šé€šè¿‡å‘½åå¯¼å‡ºå¯¼å…¥å…¶ä¸­çš„å¤§å¤šæ•°æ–¹æ³•ï¼Œä»¥ä¾¿æ†ç»‘ç¨‹åºå¯ä»¥æ£€æµ‹å’Œåˆ é™¤æœªä½¿ç”¨çš„ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// Vue 3.x - only imported properties are bundled</span></span><br><span class="line"><span class="keyword">import</span> &#123; nextTick, observable &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line">nextTick(<span class="function">() =&gt;</span> &#123;&#125;)</span><br><span class="line"><span class="keyword">const</span> obj = observable(&#123;&#125;)</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ªé‡å¤§å˜åŒ–ï¼Œå› ä¸ºä»¥å‰çš„å…¨å±€APIç°åœ¨åªèƒ½é€šè¿‡å‘½åçš„å¯¼å‡ºæ‰èƒ½ä½¿ç”¨ã€‚æ­¤æ›´æ”¹å½±å“ï¼š</p><ul><li><code>Vue.nextTick</code></li><li><code>Vue.observable</code></li><li><code>Vue.version</code></li><li><code>Vue.compile</code> ï¼ˆä»…å®Œæ•´ç‰ˆæœ¬ï¼‰</li><li><code>Vue.set</code> ï¼ˆä»…åœ¨2.xå…¼å®¹ç‰ˆæœ¬ä¸­ï¼Œæ‚¨å¾ˆå¿«ä¼šæ‰¾åˆ°åŸå› ï¼‰</li><li><code>Vue.delete</code> ï¼ˆåŒä¸Šï¼‰</li></ul><p>æˆ‘ä»¬éœ€è¦ä¸€æ®µæ—¶é—´æ‰èƒ½å®Œå…¨å—ç›Šäºæ­¤åŠŸèƒ½ï¼Œå› ä¸ºå®ƒéœ€è¦åœ¨ç”Ÿæ€ç³»ç»Ÿä¸­é‡‡ç”¨ã€‚Vueå›¢é˜Ÿå°†å‘å¸ƒå…¼å®¹æ€§ç‰ˆæœ¬ï¼Œå› æ­¤æˆ‘ä»¬åº”è¯¥èƒ½å¤Ÿä½¿ç”¨ä¹Ÿä½¿ç”¨æ—§APIçš„æ’ä»¶ï¼Œä½†ä¼šé™ä½æ€§èƒ½ã€‚</p><p>é™¤äº†tree shakeçš„JavaScript APIä»¥å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–åŠŸèƒ½ã€‚åœ¨åå°ï¼ŒVueç¼–è¯‘å™¨ï¼ˆå°†Vueæ¨¡æ¿è½¬æ¢ä¸ºå‘ˆç°åŠŸèƒ½çš„å·¥å…·ï¼‰å°†æ£€æµ‹æ¨¡æ¿ä¸­ä½¿ç”¨çš„æŒ‡ä»¤ï¼Œå¹¶å¯¹å…¶è¿›è¡Œæ ‘çŠ¶æ‘‡åŠ¨ã€‚ä¾‹å¦‚ä¸‹é¢çš„æ¨¡æ¿ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-show</span>=<span class="string">&quot;ok&quot;</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨è¢«Vueç¼–è¯‘å™¨å¤„ç†åï¼Œçœ‹èµ·æ¥æˆ–å¤šæˆ–å°‘æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; h, Transition, applyDirectives, vShow &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> h(Transition, [</span><br><span class="line">    applyDirectives(h(<span class="string">&#x27;div&#x27;</span>, <span class="string">&#x27;hello&#x27;</span>), <span class="built_in">this</span>, [vShow, <span class="built_in">this</span>.ok])</span><br><span class="line">  ])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¯ä¸ªäººéƒ½ä¼šä»Global API tree shakeä¸­å—ç›Šï¼ˆå°¤å…¶æ˜¯æˆ‘ä»¬çš„ç”¨æˆ·ï¼‰ï¼Œä½†æ˜¯æˆ‘è®¤ä¸ºåˆ¶ä½œå°å‹è½»é‡çº§ç½‘ç«™ï¼Œæ¯”å¦‚ï¼šä»…ä½¿ç”¨VueåŠŸèƒ½å­é›†è¿›è¡Œäº¤äº’çš„äººï¼ˆæœ€èƒ½æ›¿ä»£jQueryä¹‹ç±»çš„åº“ï¼‰çš„äººã€‚</p><h2 id="åŸºäºä»£ç†çš„å“åº”å¼æœºåˆ¶"><a href="#åŸºäºä»£ç†çš„å“åº”å¼æœºåˆ¶" class="headerlink" title="åŸºäºä»£ç†çš„å“åº”å¼æœºåˆ¶"></a>åŸºäºä»£ç†çš„å“åº”å¼æœºåˆ¶</h2><p>æ†ç»‘åŒ…çš„å¤§å°å¯èƒ½ä¼šä¸¥é‡å½±å“æ‚¨çš„åº”ç”¨åŠ è½½æ—¶é—´ï¼Œä½†æ˜¯ä¸‹è½½åï¼Œæ†ç»‘åŒ…çš„å¤§å°ä¹Ÿåº”èƒ½å¤Ÿå¿«é€Ÿå‘ˆç°ä¸”è¿è¡Œæµç•…ã€‚</p><p>Vueæ ¸å¿ƒå›¢é˜Ÿéå¸¸äº†è§£è¿™ä¸€ç‚¹ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨è¿è¡Œæ—¶æ€§èƒ½ä¸Šä¹Ÿæœ‰å¾ˆå¤§æ”¹è¿›çš„åŸå› ã€‚</p><p>è®©æˆ‘ä»¬ä»åŸºäº<a href="https://developer.mozilla.org/pl/docs/Web/JavaScript/Referencje/Obiekty/Proxy">JavaScript Proxies</a>çš„æœ€å…·å½±å“åŠ›çš„æ–°ååº”ç³»ç»Ÿä¹‹ä¸€å¼€å§‹ã€‚å½“å‰çš„Vueååº”ç³»ç»Ÿæ˜¯åŸºäºçš„<code>Object.defineProperty</code>ï¼Œè¿™æœ‰ä¸€äº›é™åˆ¶ã€‚æœ€å¸¸è§å’Œä»¤äººæ²®ä¸§çš„ä¸€ä¸ªäº‹å®æ˜¯Vue <a href="https://vuejs.org/v2/guide/reactivity.html#Change-Detection-Caveats">æ— æ³•è·Ÿè¸ªååº”å¯¹è±¡çš„å±æ€§æ·»åŠ /åˆ é™¤</a>ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨<code>Vue.set</code>å¹¶<code>Vue.delete</code>ä¿æŒååº”ç³»ç»Ÿæ­£å¸¸è¿è¡Œã€‚ä½¿ç”¨JS Proxiesï¼Œæˆ‘ä»¬ç»ˆäºå¯ä»¥æ‘†è„±è¿™ç§ä¸‘é™‹çš„è§£å†³æ–¹æ³•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Adding a new property to reacitve object in Vue 2.x</span></span><br><span class="line">Vue.set(<span class="built_in">this</span>.myObject, key, value) </span><br><span class="line"><span class="comment">// Adding a new property to reactive object in Vue 3</span></span><br><span class="line"><span class="built_in">this</span>.myObject[key] = value</span><br></pre></td></tr></table></figure><p>ä»£ç†çš„çœŸæ­£å½±å“å¯ä»¥ä»æ›´å¿«çš„ç»„ä»¶åˆå§‹åŒ–å’Œä¿®è¡¥ä¸­çœ‹å‡ºã€‚<strong>æ ¹æ®æµ‹è¯•ï¼Œé€Ÿåº¦å¤§çº¦å¿«2å€ï¼</strong></p><img title="æ€§èƒ½æå‡å¯¹æ¯”" alt="å›¾ç‰‡è£‚äº†ï¼Œè”ç³»ï¼šadmin@wayearn.com" class="lazyload" width="600" src="https://static.www.toimc.com/blog/img/2020/Vue3å°†å¸¦æ¥çš„æ€§èƒ½æå‡/speed.png?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/1000"><p>ç”±äºä»¥ä¸‹äº‹å®ï¼Œè¿™ç§æ”¹è¿›çš„åŸå› å°¤ä¸ºé‡è¦ï¼Œé‚£å°±æ˜¯Vueå¿…é¡»ä½¿ç”¨å¸æ°”å‰‚/è®¾ç½®å‰‚æ¥é€’å½’åœ°éå†æ‰€æœ‰å¯¹è±¡åŠå…¶å±æ€§å¹¶å¯¹å…¶è¿›è¡Œè½¬æ¢ã€‚ä½¿ç”¨ä»£ç†ï¼Œæ­¤è¿‡ç¨‹å˜å¾—å®¹æ˜“å¾—å¤šã€‚</p><p><strong>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œä½¿ç”¨JS Proxies Vue 3ä¼šæ”¾å¼ƒå¯¹Internet Explorerï¼ˆä¸æ˜¯Edgeï¼‰çš„æ”¯æŒï¼Œä½†æ˜¯è¯·ä¸è¦æ‹…å¿ƒ-å¯¹äºå¸Œæœ›æ”¯æŒIEçš„ç”¨æˆ·æ¥è¯´ï¼Œå°†ä¼šå»ºç«‹å…¼å®¹çš„ç‰ˆæœ¬ã€‚</strong></p><h2 id="æ—¶é—´åˆ†ç‰‡"><a href="#æ—¶é—´åˆ†ç‰‡" class="headerlink" title="æ—¶é—´åˆ†ç‰‡"></a>æ—¶é—´åˆ†ç‰‡</h2><p>æ ¹æ®<a href="https://twitter.com/youyuxi/status/1183844215752671233">Evan Youçš„æ¨æ–‡</a><strong>æ›´æ–°</strong>æ­¤åŠŸèƒ½ä¸ä¼šåŒ…å«åœ¨Vue 3ä¸­ã€‚</p><p>Vue 3çš„å¦ä¸€ä¸ªçœŸæ­£ä»¤äººå…´å¥‹ä½†å¾ˆå°‘æåŠçš„æ€§èƒ½åŠŸèƒ½æ˜¯å¯¹æ—¶é—´åˆ‡ç‰‡çš„å®éªŒæ”¯æŒã€‚</p><p>æˆ‘å°†ç”¨ä¸€ä¸ªéšå–»æ¥è§£é‡Šä»€ä¹ˆæ˜¯æ—¶é—´åˆ‡ç‰‡ï¼Œæˆ‘æƒ³è®©ä½ æƒ³è±¡ä¸€æ¡å†°æ·‡æ·‹ç”Ÿäº§çº¿ï¼Œå¾ˆé•¿çš„ä¸€ä¸ªï¼Œå› ä¸ºé‚£æ˜¯é•‡ä¸Šæœ€å¥½çš„å†°æ·‡æ·‹ã€‚æä¾›ä¸€ä¸ªäººä¹‹åï¼Œå°±ä¼šå‡ºç°å¦ä¸€ä¸ªäººï¼Œç­‰ç­‰ã€‚ç”±äºæŸç§åŸå› ï¼Œæ²¡æœ‰å…³äºå¯ç”¨å£å‘³çš„ä¿¡æ¯ã€‚è¦è·å–æ­¤ä¿¡æ¯ï¼Œæ‚¨éœ€è¦è¯¢é—®ç›´æ¥å‡ºå”®å†°æ·‡æ·‹çš„å¥³å£«ã€‚</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½æœ€ç»ˆä¼šå¾—åˆ°2æ¡è®°å½•-å…¶ä¸­ä¸€æ¡ç»™ç¡®ä¿¡è¦è´­ä¹°å†°æ·‡æ·‹çš„äººï¼ˆè€å¿ƒç­‰å¾…ï¼‰ï¼Œå¦ä¸€æ¡ç»™å¸Œæœ›äº†è§£æœ‰å…³å£å‘³çš„æ›´å¤šä¿¡æ¯çš„äººï¼Œç„¶åå†å†³å®šæ˜¯å¦è¦è´­ä¹°å†°æ·‡æ·‹æˆ–ä¸ï¼Œæœ€æ–°çš„åº”è¯¥å°½å¿«è·å¾—æ­¤ä¿¡æ¯ã€‚ä¸å¹¸çš„æ˜¯ï¼Œåªæœ‰ä¸€ä½å¥³å£«åœ¨å–å†°æ·‡æ·‹ï¼Œå¥¹åœ¨ä¸ºâ€œä¸»â€çº¿ä¸Šçš„æ‰€æœ‰å®¢æˆ·æä¾›æœåŠ¡ä¹‹å‰ä¸ä¼šå›ç­”ä»»ä½•é—®é¢˜ã€‚</p><p>å¯¹äºå°šæœªè¢«è¯´æœçš„å®¢æˆ·æ¥è¯´ï¼Œè¿™å¹¶ä¸æ˜¯æœ€å¥½çš„ä½“éªŒï¼Œä»–ä»¬ä¸­çš„å¤§å¤šæ•°äººå¯èƒ½ä¼šå‘ç°ä¸å€¼å¾—ç­‰å¾…ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¿™ä½å¥³å£«å¯ä»¥æ¯2-3ä¸ªæœåŠ¡å¯¹è±¡å›ç­”ä¸€æ¬¡é—®é¢˜ã€‚ä¸¤ç»„éƒ½åº”è¯¥å¯¹æ­¤è§£å†³æ–¹æ¡ˆæ„Ÿåˆ°æ»¡æ„ã€‚</p><p>è¿™æ­£æ˜¯CPUä¸Webåº”ç”¨ç¨‹åºä¸€èµ·å·¥ä½œçš„æ–¹å¼ã€‚æˆ‘ä»¬æœ‰ä¸€æ¡â€œä¸»â€è¡Œï¼ˆç§°ä¸ºâ€œä¸»çº¿ç¨‹â€ï¼‰ï¼Œéœ€è¦å®Œæˆå…¶æ‰€æœ‰ä¸»è¦ä»»åŠ¡ï¼ˆè„šæœ¬ï¼Œæ¸²æŸ“ç­‰ï¼‰ï¼Œç„¶åæ‰èƒ½å“åº”ç”¨æˆ·äº¤äº’ã€‚å¯¹äºæŸäº›é¡µé¢ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´éå¸¸ç³Ÿç³•çš„ç”¨æˆ·ä½“éªŒï¼Œå…·ä½“å–å†³äºVueç»„ä»¶åŠ è½½æˆ–é‡æ–°å‘ˆç°æ‰€éœ€çš„æ—¶é—´ã€‚</p><p>ä¸ºäº†ä½¿å…¶æ›´å¯é ï¼Œæœ€å¥½å°†æ­¤è„šæœ¬è¯„ä¼°â€œåˆ‡å‰²â€æˆç¢ç‰‡ï¼Œç„¶åæŸ¥çœ‹æ¯ä¸ªè„šæœ¬ä¹‹åæ˜¯å¦æœ‰è¦å¤„ç†çš„ç”¨æˆ·è¾“å…¥ã€‚è¿™æ ·ï¼Œæ— è®ºéœ€è¦è¿›è¡Œå¤šå°‘æ¬¡æ¸²æŸ“æˆ–é‡æ–°æ¸²æŸ“ï¼Œåº”ç”¨ç¨‹åºéƒ½å°†ä¿æŒå“åº”çŠ¶æ€ã€‚è¿™å°±æ˜¯åœ¨Vue 3ä¸­çš„å·¥ä½œæ–¹å¼ã€‚</p><p>è¿™æ˜¯Evanåœ¨Vue 3ä¸­å±•ç¤ºæ—¶é—´åˆ†ç‰‡åŠŸèƒ½çš„æ–¹å¼ã€‚è¯·æ³¨æ„è„šæœ¬æ‰§è¡Œæ—¶é—´è½´ä¸­çš„å°é—´éš™ï¼Œè¿™äº›é—´éš™æ—¨åœ¨å¤„ç†ç”¨æˆ·è¾“å…¥ã€‚</p><img alt="å›¾ç‰‡è£‚äº†ï¼Œè”ç³»ï¼šadmin@wayearn.com" class="lazyload" width="600" src="https://static.www.toimc.com/blog/img/2020/Vue3å°†å¸¦æ¥çš„æ€§èƒ½æå‡/time%20slice.png?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/1000"><h2 id="èƒ½å¤Ÿè½»æ¾è¯†åˆ«ä¸ºä»€ä¹ˆé‡æ–°æ¸²æŸ“ç»„ä»¶"><a href="#èƒ½å¤Ÿè½»æ¾è¯†åˆ«ä¸ºä»€ä¹ˆé‡æ–°æ¸²æŸ“ç»„ä»¶" class="headerlink" title="èƒ½å¤Ÿè½»æ¾è¯†åˆ«ä¸ºä»€ä¹ˆé‡æ–°æ¸²æŸ“ç»„ä»¶"></a>èƒ½å¤Ÿè½»æ¾è¯†åˆ«ä¸ºä»€ä¹ˆé‡æ–°æ¸²æŸ“ç»„ä»¶</h2><p>å·¥å…·ä¸å¼€ç®±å³ç”¨çš„æ€§èƒ½åŒç­‰é‡è¦ã€‚</p><p>æ®æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Vue 3ä¸­çœ‹åˆ°ä¸€ä¸ªæ–°çš„ç”Ÿå‘½å‘¨æœŸæŒ‚é’©-<code>renderTriggered</code>ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ¥è·Ÿè¸ªå’Œæ¶ˆé™¤ä¸å¿…è¦çš„ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œå½“å°†å…¶ä¸Time Slicingç»“åˆä½¿ç”¨æ—¶ï¼Œè¿™æ˜¯åœ¨è¿è¡Œæ—¶æ€§èƒ½ä¼˜åŒ–ä¸­éå¸¸å¼ºå¤§çš„æ­¦å™¨ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Component = &#123;</span><br><span class="line">  <span class="comment">// other properties</span></span><br><span class="line">  renderTriggered (event) &#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="string">`Re-render of `</span> + <span class="built_in">this</span>.$options.name + <span class="string">` component`</span>, event)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è¿˜æœ‰ä»€ä¹ˆ"><a href="#è¿˜æœ‰ä»€ä¹ˆ" class="headerlink" title="è¿˜æœ‰ä»€ä¹ˆ"></a>è¿˜æœ‰ä»€ä¹ˆ</h2><p>é™¤äº†ä¸Šé¢åœ¨Vue 3ä¸­çœ‹åˆ°çš„å†…å®¹ä»¥å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šå†…å®¹ï¼Œä½†æ˜¯è¿™äº›å¯èƒ½æ˜¯å½±å“æœ€å¤§çš„æ›´æ”¹ã€‚å¤§å¤šæ•°æœªæåŠçš„æ”¹è¿›å°†éšè—åœ¨Vueç¼–è¯‘å™¨ç”Ÿæˆçš„ä»£ç ä¸­ï¼Œæˆ–è€…ä¸å®ç°ç»†èŠ‚å’Œç®—æ³•ç»‘å®šåœ¨ä¸€èµ·</p><p>ä¸è¿‡ï¼Œæœ‰å‡ é¡¹æ”¹è¿›å€¼å¾—ä¸€æï¼š</p><ul><li>è¾“å‡ºä»£ç å°†æ›´æ˜“äºé’ˆå¯¹JavaScriptç¼–è¯‘å™¨è¿›è¡Œä¼˜åŒ–</li><li>è¾“å‡ºä»£ç é€šå¸¸ä¼šæ›´å¥½åœ°è¿›è¡Œä¼˜åŒ–</li><li>ç”±äºæ”¹è¿›äº†è¡¥ä¸ç®—æ³•ï¼Œå¯ä»¥é¿å…ä¸å¿…è¦çš„çˆ¶æ¯/å­©å­é‡æ–°æ¸²æŸ“</li></ul><p>å¦å¤–ï¼Œåœ¨æ¥ä¸‹æ¥çš„å‡ å¤©é‡Œï¼Œæ‚¨å¯ä»¥æœŸå¾…Evan Youæ’°å†™çš„ä¸€ç¯‡æ·±å…¥çš„æ–‡ç« ï¼Œä»‹ç»ä»–ä»¬ä¸“é—¨é’ˆå¯¹Vueç¼–è¯‘å™¨è¿›è¡Œçš„æ€§èƒ½ä¼˜åŒ–ï¼ˆä¸€æ—¦å‘å¸ƒï¼Œæˆ‘å°†ä½¿ç”¨é“¾æ¥æ›´æ–°è¯¥æ–‡ç« ï¼‰ã€‚</p><h2 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h2><p>å°½ç®¡Vueå·²ç»ç¡®ç«‹ä¸ºç›®å‰æ€§èƒ½æœ€ä½³çš„æ¡†æ¶ä¹‹ä¸€ï¼Œä½†æˆ‘ä»¬ä»å°†åœ¨ç¬¬ä¸‰ç‰ˆä¸­çœ‹åˆ°é‡å¤§æ”¹è¿›ã€‚ç‰¹åˆ«æ˜¯åœ¨æ†ç»‘åŒ…å¤§å°å’Œè¿è¡Œæ—¶æ€§èƒ½æ–¹é¢ï¼Œè¿˜è¿›è¡Œäº†æ— æ•°æ¬¡å¾®ä¼˜åŒ–ã€‚æˆ‘è®¤ä¸ºVue 3éå¸¸é€‚åˆç°ä»£ç§»åŠ¨ä¼˜å…ˆå’Œæ€§èƒ½å¯¼å‘çš„ç½‘ç»œã€‚</p><p>ä¸è¦å¿˜è®°Vueæ˜¯å”¯ä¸€ç”±ç¤¾åŒºå®Œå…¨é©±åŠ¨çš„ä¸»è¦æ¡†æ¶ã€‚è¿™ç¯‡æ–‡ç« ï¼ˆä»¥åŠæ›´å¤šï¼‰ä¸­åˆ—å‡ºçš„æ‰€æœ‰å˜åŒ–éƒ½åœ¨<a href="https://github.com/vuejs/rfcs/">RFC</a>ç¤¾åŒºè®¨è®ºã€‚æ‚¨å¯ä»¥å¸®åŠ©æ ¸å¿ƒå›¢é˜Ÿï¼Œè¡¨è¾¾æ‚¨å¯¹æœ‰æ•ˆRFCçš„æ„è§ï¼Œç”šè‡³å¯ä»¥æå‡ºè‡ªå·±çš„æ”¹è¿›å»ºè®®ã€‚è®©æˆ‘ä»¬ä¸€èµ·è®©Vueæ›´å¥½ã€‚</p><h2 id="ä¸‹ä¸€æ­¥æ˜¯ä»€ä¹ˆ"><a href="#ä¸‹ä¸€æ­¥æ˜¯ä»€ä¹ˆ" class="headerlink" title="ä¸‹ä¸€æ­¥æ˜¯ä»€ä¹ˆ"></a>ä¸‹ä¸€æ­¥æ˜¯ä»€ä¹ˆ</h2><p>åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨æ–°çš„Vue 3 APIå°†å¦‚ä½•å½±å“æˆ‘ä»¬ç¼–å†™Webåº”ç”¨ç¨‹åºçš„æ–¹å¼ã€‚æˆ‘ä»¬å°†ç ”ç©¶å„ç§APIï¼ŒåŒ…æ‹¬æœ€è¿‘æµè¡Œçš„Composition APIï¼Œå¹¶äº†è§£å¦‚ä½•ä½¿ç”¨å®ƒç¼–å†™æ›´å¥½å’Œæ›´å¯ç»´æŠ¤çš„ä»£ç ã€‚</p><p>åŸæ–‡ï¼š[Exciting new features in Vue 3](<a href="https://vueschool.io/articles/vuejs-tutorials/exciting-new-features-in-vue-3/?utm_source=drip&amp;utm_medium=email&amp;utm_campaign=My+presentation+on+the+new+Vue+3+features&amp;utm_campaign=My">https://vueschool.io/articles/vuejs-tutorials/exciting-new-features-in-vue-3/?utm_source=drip&amp;utm_medium=email&amp;utm_campaign=My+presentation+on+the+new+Vue+3+features&amp;utm_campaign=My</a> presentation on the new Vue 3 features&amp;utm_medium=email&amp;utm_source=drip)</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;å³å°†å‘å¸ƒçš„Vue.jsçš„ç¬¬ä¸‰ä¸ªä¸»è¦ç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡ä¸‹é¢çš„è®¨è®ºï¼Œè™½ç„¶è¿˜ä¸èƒ½ç¡®å®šæ‰€æœ‰å†…å®¹ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥æ”¾å¿ƒåœ°è®¤ä¸ºï¼Œå®ƒå°†æ˜¯å¯¹å½“å‰ç‰ˆæœ¬ï¼ˆå·²ç»éå¸¸å‡ºè‰²ï¼‰çš„å·¨å¤§æ”¹è¿›ã€‚Vueå›¢é˜Ÿåœ¨æ”¹è¿›æ¡†æ¶APIæ–¹é¢åšå¾—éå¸¸å‡ºè‰²ã€‚Evan Youå°†Vue 3çš„ç›®æ ‡æè¿°ä¸ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è®©å®ƒ&lt;strong&gt;æ›´å¿«&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;è®©å®ƒ&lt;strong&gt;æ›´å°&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;ä½¿å®ƒ&lt;strong&gt;æ›´æ˜“äºç»´æŠ¤&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;ä½¿&lt;strong&gt;åŸç”Ÿç›®æ ‡æ›´å®¹æ˜“&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;è®©&lt;strong&gt;æ‚¨çš„ç”Ÿæ´»æ›´è½»æ¾&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€šè¿‡æŸ¥çœ‹RFCï¼Œæˆ‘ç¡®ä¿¡ä¸Šè¿°æ‰€æœ‰ç›®æ ‡éƒ½å°†æ¯«æ— é—®é¢˜åœ°å®ç°ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†å¼•å¯¼æ‚¨å®Œæˆä¸€äº›å¯¹æˆ‘æ¥è¯´æœ€æœ‰è¶£çš„æ›´æ”¹ï¼Œè¿™äº›æ›´æ”¹å¯¹æˆ‘çš„å½±å“å’Œå¯èƒ½æ€§è€Œè¨€ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="Vue3" scheme="https://www.toimc.com/tags/Vue3/"/>
    
    <category term="Vue" scheme="https://www.toimc.com/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>å¼•é¢†æœªæ¥ï¼Œèµ°å‡ºè‡ªå·±çš„å‰ç«¯ä¹‹è·¯</title>
    <link href="https://www.toimc.com/%E5%BC%95%E9%A2%86%E6%9C%AA%E6%9D%A5%EF%BC%8C%E8%B5%B0%E5%87%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E5%89%8D%E7%AB%AF%E4%B9%8B%E8%B7%AF/"/>
    <id>https://www.toimc.com/%E5%BC%95%E9%A2%86%E6%9C%AA%E6%9D%A5%EF%BC%8C%E8%B5%B0%E5%87%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E5%89%8D%E7%AB%AF%E4%B9%8B%E8%B7%AF/</id>
    <published>2019-12-27T08:36:38.000Z</published>
    <updated>2021-03-02T15:36:20.104Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ä»Šå¤©å¼€å§‹åˆ†äº«ä¹‹å‰ï¼Œæˆ‘æ¥è¯´ä¸€ä¸‹è¿™ä¸€æ¬¡åˆ†äº«çš„å‡†å¤‡ï¼Œæˆ‘å¼€å§‹é—®äº†æˆ‘çš„å¾ˆå¤šå­¦ç”Ÿï¼Œæ¯”å¦‚ï¼šè®²ä»€ä¹ˆé€‰é¢˜ã€å¤§å®¶æƒ³å¬ä»€ä¹ˆã€å¤§å®¶è§‰å¾—å­¦ä¹ äº†å‰ç«¯è¿™ä¹ˆä¹…æƒ³å¬å¬ä»€ä¹ˆâ€¦.å¾ˆå¤šçš„é—®é¢˜ï¼Œéƒ½é›†ä¸­åœ¨ä¸€ä¸ªé—®é¢˜ä¸Šï¼Œè¿™ä¹ˆå¤šçš„æœªçŸ¥ï¼Œè¿™ä¹ˆå¤šçš„æŠ€æœ¯ï¼Œæˆ‘è¯¥æ€ä¹ˆåŠï¼Ÿè¿™å°±åƒæ˜¯ä¸€ä¸ªå“²å­¦é—®é¢˜ï¼Œé—®â€œæˆ‘ä»å“ªé‡Œæ¥ï¼Œæˆ‘è¦åˆ°å“ªé‡Œå»â€ä¸€æ ·â€”â€”äººç”Ÿè¿™ä¸€èººæ—…ç¨‹ï¼Œå¦‚æœæƒ³ä¸æ¸…æ¥šå‰è·¯ï¼Œé‚£æœ€æœ€å…³é”®çš„æ˜¯æŠ“ä½ç°åœ¨ã€‚è€å¸ˆï¼Œæœ€å¤šåªæ˜¯å¼•è·¯äººæ˜¯ç¯å¡”ï¼Œè‡ªå·±çš„è·¯è¦é è‡ªå·±çš„è„šèµ°å‡ºæ¥ã€‚</p><span id="more"></span><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨ä»Šå¤©å¼€å§‹åˆ†äº«ä¹‹å‰ï¼Œæˆ‘æ¥è¯´ä¸€ä¸‹è¿™ä¸€æ¬¡åˆ†äº«çš„å‡†å¤‡ï¼Œæˆ‘å¼€å§‹é—®äº†æˆ‘çš„å¾ˆå¤šå­¦ç”Ÿï¼Œæ¯”å¦‚ï¼šè®²ä»€ä¹ˆé€‰é¢˜ã€å¤§å®¶æƒ³å¬ä»€ä¹ˆã€å¤§å®¶è§‰å¾—å­¦ä¹ äº†å‰ç«¯è¿™ä¹ˆä¹…æƒ³å¬å¬ä»€ä¹ˆâ€¦.å¾ˆå¤šçš„é—®é¢˜ï¼Œéƒ½é›†ä¸­åœ¨ä¸€ä¸ªé—®é¢˜ä¸Šï¼Œè¿™ä¹ˆå¤šçš„æœªçŸ¥ï¼Œè¿™ä¹ˆå¤šçš„æŠ€æœ¯ï¼Œæˆ‘è¯¥æ€ä¹ˆåŠï¼Ÿè¿™å°±åƒæ˜¯ä¸€ä¸ªå“²å­¦é—®é¢˜ï¼Œé—®â€œæˆ‘ä»å“ªé‡Œæ¥ï¼Œæˆ‘è¦åˆ°å“ªé‡Œå»â€ä¸€æ ·â€”â€”äººç”Ÿè¿™ä¸€èººæ—…ç¨‹ï¼Œå¦‚æœæƒ³ä¸æ¸…æ¥šå‰è·¯ï¼Œé‚£æœ€æœ€å…³é”®çš„æ˜¯æŠ“ä½ç°åœ¨ã€‚è€å¸ˆï¼Œæœ€å¤šåªæ˜¯å¼•è·¯äººæ˜¯ç¯å¡”ï¼Œè‡ªå·±çš„è·¯è¦é è‡ªå·±çš„è„šèµ°å‡ºæ¥ã€‚</p><h2 id="ä¸€ã€è·¯åœ¨ä½•æ–¹"><a href="#ä¸€ã€è·¯åœ¨ä½•æ–¹" class="headerlink" title="ä¸€ã€è·¯åœ¨ä½•æ–¹"></a>ä¸€ã€è·¯åœ¨ä½•æ–¹</h2><p>â€”â€”å‰ç«¯åƒå˜ä¸‡åŒ–ï¼Œå¦‚ä½•ä¸å˜åº”ä¸‡å˜</p><p>ç›¸ä¿¡å¤§å®¶éƒ½æœ‰é€‰æ‹©æŠ€æœ¯çš„ä¸€ä¸ªç†ç”±ï¼Œä½†æ˜¯æ›´å¤šæ˜¯è¿·èŒ«ã€‚å¯¹çŸ¥è¯†çš„æ¸´æœ›ï¼ŒåŠ ä¸Šå·¥ä½œçš„å‹åŠ›ï¼Œè®©è¿™ç§æ±‚å­¦çš„å¿ƒæƒ…å˜å¾—è¿«åˆ‡ã€‚æ¯å½“æœ‰åŒå­¦é—®æˆ‘ï¼Œè€å¸ˆï¼Œæˆ‘è¯¥ä¸è¯¥å­¦å‰ç«¯ã€å‰ç«¯éš¾ä¸éš¾ã€å‰ç«¯æ€ä¹ˆå­¦çš„æ—¶å€™ï¼Œæˆ‘éƒ½ä¼šé—®ä»–ï¼ˆå¥¹ï¼‰è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼šä½ å–œæ¬¢ä¸å–œæ¬¢æŠ€æœ¯ï¼Ÿ</p><p>å¯¹äºé‚£äº›æ¨¡æ£±ä¸¤å¯çš„äººï¼Œæˆ‘ä¼šç»™ä»–ä»¬æ³¼å†·æ°´ï¼Œå‘Šè¯‰ä»–ä»¬ï¼šâ€œå‰ç«¯å¤©å¤©éƒ½åœ¨å˜åŒ–ï¼Œä½ ä¼šæ¯å¤©åšæŒå­¦ä¹ å—ï¼Ÿâ€â€œå‰ç«¯ä¸æ˜¯äººäººéƒ½èƒ½é«˜è–ªï¼Œä½ èƒ½æ¥å—ç”Ÿæ´»ç»™ä½ çš„ç£¨ç ºï¼Œå¿è¾±è´Ÿé‡çš„æˆé•¿å—ï¼Ÿâ€â€œå‰ç«¯è¯´ç®€å•ä¹Ÿç®€å•ï¼Œè¯´éš¾ä¹Ÿéš¾ï¼Œä½ çš„ç›®æ ‡åœ¨å“ªé‡Œï¼Œä½ çš„é«˜åº¦æ‰ä¼šæœ‰å¤šé«˜â€â€¦.</p><p>å‰ç«¯çœŸçš„æ˜¯åƒå˜ä¸‡åŒ–ï¼Œå‰ä¸¤å¹´è¿˜åœ¨JQueryï¼Œåˆ°ä»Šå¹´çš„æ—¶å€™ï¼Œæˆ‘é—®åŒäº‹ï¼Œä»–è¯´ç°æœ‰çš„é¡¹ç›®ï¼ˆReactï¼‰å·²ç»ä¸ç”¨äº†ï¼Œå¾ˆå°‘éœ€è¦ç”¨JQæ¥æ“ä½œDOMï¼›å†å‰äº›å¹´ï¼Œè¿˜åœ¨ç”¨DWã€PSåˆ‡é¡µé¢ï¼Œç°åœ¨è¿˜æµè¡Œå—ï¼Ÿä¸æµè¡Œäº†ï¼Œå› ä¸ºæ•ˆç‡ä¸é«˜â€¦ä¸€æ–¹é¢æŠ€æœ¯è¿‡æ—¶çš„å¿«ï¼Œå¦ä¸€æ–¹é¢æ–°æŠ€æœ¯çš„å‡ºç°å¿«ï¼ŒFlutterã€WebAssemblyã€Serverlessç«çˆ†å‘å±•ï¼Œå¯¹å‰ç«¯äººçš„è¦æ±‚åœ¨å˜é«˜ï¼Œéœ€è¦å­¦ä¹ å„ç§æŠ€æœ¯ï¼Œå¯¹æ¥ä¸åŒçš„è§’è‰²çš„äººï¼Œç”šè‡³å»å……å½“ä¸åŒè§’çš„äººâ€¦é‚£ä¹ˆï¼Œå°±è¦æœ‰å…¨é¢çš„çŸ¥è¯†å‚¨å¤‡ä¸æŠ€èƒ½ã€‚å¤§å‰ç«¯ï¼Œéœ€è¦çš„æ˜¯å®½é˜”çš„è§†é‡ã€æ‰©å±•çš„èƒ½åŠ›ã€åŸºç¡€çš„æŠ€èƒ½ï¼ŒåŒå­¦ä»¬ä¸ç¼ºçš„æ˜¯ç¬¬ä¸‰å—ï¼Œè€Œæ‰©å±•å’Œè§†é‡æ˜¯åŒå­¦ä»¬ç¼ºçš„ï¼Œä¹Ÿå¾ˆå°‘å»æ€è€ƒçš„ã€‚</p><p>é‚£æ€ä¹ˆåŠï¼Ÿ</p><p>åœ¨æˆ‘çš„è¯¾ç¨‹ä¸­è¯´åˆ°è¿‡ä¸€ä¸ªè§‚å¿µï¼šä¸æ¨èå¤§å®¶å­¦ä¹ çº¢å®ä¹¦ï¼Œä¸æ˜¯ä¸€å®šåœ¨å¤§å‚æ‰æœ‰ä¼˜ç§€çš„äººã€‚è¿™ä¸¤ç‚¹å¦‚æœæ²¡æœ‰æ·±åˆ»ä½“ä¼šçš„äººï¼Œæˆ‘æ¥ä¸¾ä¸¤ä¸ªä¾‹å­ï¼šä½ çœ‹çœ‹ä½ çš„å‘¨å›´æœ‰æ²¡æœ‰è¿›æ­¥éå¿«çš„äººï¼Œå†çœ‹çœ‹ä½ ä¸‹è½½çš„é‚£äº›èµ„æ–™ã€ä¹°è¿‡çš„é‚£äº›ä¹¦&amp;è§†é¢‘çš„è¿›åº¦ï¼Œä½ å°±åˆæ­¥ä½“ä¼šè¿™ä¸¤ç‚¹çš„æ¶µä¹‰äº†ã€‚å­¦ä¹ ï¼Œæ˜¯ä¸€ä¸ªå»¶è¿Ÿæ»¡è¶³éå¸¸é•¿çš„äº‹æƒ…ï¼Œéœ€è¦æœ‰ä¸€é¢—å¹³å¸¸å¿ƒæ¥å¯¹å¾…æ¯å¤©çš„å­¦ä¹ &amp;å·¥ä½œã€‚</p><p>è®°ä½ï¼Œå¹³å¸¸å¿ƒï¼Œä¸‰ä¸ªå­—ã€‚</p><p>æœ‰å¥è¯å¤§å®¶éƒ½å¬è¿‡ï¼Œâ€œæœºä¼šæ˜¯ç»™æœ‰å‡†å¤‡çš„äººâ€ã€‚è¿™å¥è¯ï¼Œè¦è¾©è¯çš„æ¥çœ‹ï¼Œè¿™ä¸ªå‡†å¤‡æ˜¯æŒ‡å¿ƒæ€ä¸Šçš„å‡†å¤‡ï¼Œå¾ˆå¤šæŠ€æœ¯æ˜¯å¯ä»¥ç°å­¦ç°å–çš„ï¼Œè¿™æ‰æ˜¯æ ¸å¿ƒã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ç»™å¤§å®¶æ¥è®²è¯¾ï¼Œå­¦ä¹ äº†FCPåªç”¨äº†ä¸€å‘¨ï¼Œå°±ä¸Šæ‰‹å¼€å§‹å‰ªäº†ï¼Œå®è·µè®©æˆ‘è·å¾—äº†å¤§é‡çš„â€œçœŸçŸ¥â€â€¦è¿™ç§äº‹æƒ…åœ¨æˆ‘èº«ä¸Šå‘ç”Ÿäº†å¾ˆå¤šæ¬¡ã€‚é‚£äº›è¿½æ±‚æè‡´å®Œç¾çš„â€œå¤„å¥³åº§â€åŒå­¦ä»¬ï¼Œå¾ˆå¤šä¸œè¥¿åœ¨ä¸€å¼€å§‹ï¼Œä¸ç”¨å­¦ä¹ çš„é‚£ç§çš„ç²¾å·§ï¼Œè®¾è®¡çš„é‚£ä¹ˆçš„å®Œç¾ã€‚è¿™å…¶å®æ˜¯äººçš„æœ¬æ€§å•Šï¼Œäººä¸æ˜¯åœ£äººï¼Œè‚¯å®šä¼šçŠ¯é”™ã€‚ä½†æ˜¯ï¼Œè¾©è¯çš„çœ‹ï¼ŒåŒæ ·çš„ä¸èƒ½ä¸€å¼€å§‹å…¨éƒ¨éƒ½é©¬é©¬è™è™ï¼Œè¿™ä¸¤ä¸ªæç«¯éƒ½ä¸å¯å–ã€‚</p><p>è®°ä½ï¼Œè¾©è¯ï¼Œè¿™ä¸¤ä¸ªå­—ã€‚</p><p>è·¯åœ¨ä½•æ–¹ï¼Ÿå°±åƒé‚£é¦–æ­Œä¸€æ ·çš„ï¼Œè·¯åœ¨è‡ªå·±çš„è„šä¸‹ã€‚æœ‰åŒå­¦å°±è·³è·³å‡ºæ¥äº†ï¼Œè¯´ï¼Œè€å¸ˆä½ è¯´äº†ä¸€å¥åºŸè¯ã€‚æˆ‘ç°åœ¨å³ä¸èƒ½è¯´ï¼Œæœªæ¥5å¹´ï¼Œå¤§å®¶æ¥å­¦ä»€ä¹ˆä»€ä¹ˆå°±èƒ½å‘å¤§è´¢è¡Œå¤§è¿ã€XXXæŠ€æœ¯å°±èƒ½ç«ã€XXXèƒ½å­¦XXXä¸èƒ½å­¦ï¼Œé€‚åˆè‡ªå·±çš„æ‰æ˜¯æœ€å¥½çš„ä¸æ˜¯å—ï¼Ÿæˆ‘ä¹Ÿæ˜¯ä¸€è·¯å¯»æ‰¾ï¼Œèµ°äº†2å¹´çš„å¼¯è·¯ï¼Œæ‰æ‰¾è‡ªå·±è‡ªå·±çš„å…´è¶£ã€‚ç”Ÿå‘½ä¸­ï¼Œæ€»æœ‰é‚£ä¹ˆå¤šçš„å¥‡è¿¹è®©æˆ‘ä»¬æ„ŸåŠ¨ï¼Œå°±åƒå°æ—¶å€™ä¸æ˜ç™½çˆ¶æ¯çš„è‹¦ï¼Œåªæœ‰è‡ªå·±æˆä¸ºçˆ¶æ¯ï¼Œæ‰èƒ½æ„Ÿå—åˆ°ã€‚è¿™ä¸å°±æ˜¯ç”Ÿå‘½çš„ç¾å¦™å—ï¼Ÿæ‰€ä»¥ï¼Œä¸è¦æ…Œï¼Œä½ ä¼šæ˜ç™½çš„ï¼Œä½ ä¹Ÿä¼šæ‰¾åˆ°è‡ªå·±çš„æ–¹å‘ã€‚å•èº«çš„äººï¼Œå°±åƒé‚£ä¸ªå±äºä½ çš„äººï¼Œä¹Ÿä¼šåœ¨ä¸è¿œçš„åœ°æ–¹ç­‰å¾…ç€ä½ ä¸€æ ·ã€‚</p><p>è®°ä½ï¼Œå…´è¶£ï¼Œè¿™ä¸¤ä¸ªå­—ã€‚</p><p>æœ‰äº†å¹³å¸¸å¿ƒï¼Œå¤§å®¶å°±ä¸ä¼šå»è¿½é€æ–°çš„æŠ€æœ¯ï¼Œäººäº‘äº¦äº‘äº†ï¼›æœ‰äº†å¹³å¸¸å¿ƒï¼Œå¤§å®¶å°±ä¸ä¼šè¿·èŒ«ï¼ŒçŸ¥é“å½“ä¸‹æ‰æ˜¯æœ€é‡è¦çš„äº†ï¼›æœ‰äº†å¹³å¸¸å¿ƒï¼Œå¤§å®¶å°±ä¸ä¼šå»æ”€æ¯”ï¼Œè€Œä¼šæ‰å®çš„è‡ªå·±æ¯å¤©è¿›æ­¥ä¸€ç‚¹ç‚¹ï¼Œä¸è‡ªå·±ä¸ºâ€œæ•Œâ€ï¼Œå…¶ä¹æ— æ¯”ã€‚</p><p>æœ‰äº†è¾©è¯çš„æ€è€ƒï¼Œå°±ä¼šçœ‹æ¸…å¾ˆå¤šé—®é¢˜çš„æœ¬è´¨ï¼Œæ‰¾åˆ°å±äºè‡ªå·±çš„è§£å†³æ–¹æ¡ˆã€‚</p><p>æœ‰äº†å…´è¶£ï¼Œåšçš„è‡ªå·±å–œæ¬¢äº‹ï¼Œæ‰æ˜¯é€‚åˆè‡ªå·±çš„ã€‚</p><p>å‰ç«¯åƒå˜ä¸‡åŒ–çš„æ˜¯æŠ€æœ¯ï¼Œä¸å˜æ˜¯æˆ‘ä»¬ï¼Œä¸å˜æ˜¯æˆ‘ä»¬çš„åˆå¿ƒã€‚</p><h2 id="äºŒã€å¯¹ç—‡ä¸‹è¯"><a href="#äºŒã€å¯¹ç—‡ä¸‹è¯" class="headerlink" title="äºŒã€å¯¹ç—‡ä¸‹è¯"></a>äºŒã€å¯¹ç—‡ä¸‹è¯</h2><p>â€”â€”å‰ç«¯å¼€å‘è¿‡ç¨‹ä¸­çš„ç—›ç‚¹ï¼Œå°‘èµ°å¼¯è·¯ï¼Œæ‰èƒ½äº‹åŠåŠŸå€</p><p>å‰é¢æˆ‘ä»¬æäº†å¾ˆå¤šå¿ƒæ€ä¸Šçš„é—®é¢˜ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬é™¤å»å¿ƒæ€ä¸Šçš„é—®é¢˜ï¼Œæˆ‘ä»¬æ¥è°ˆè°ˆæŠ€æœ¯ã€‚</p><p>å¤§å®¶æˆ–å¤šæˆ–å°‘çš„äº†è§£ä¸€ä¸ªé¡¹ç›®å¼€å‘çš„è¿‡ç¨‹ï¼Œä½†æ˜¯ï¼Œæœ‰å¤šå°‘äººå»æ€è€ƒè¿‡ï¼Œä¸ºä»€ä¹ˆéœ€æ±‚åˆ†æï¼Œè®¨è®ºæ¥è®¨è®ºå»å¥½é•¿æ—¶é—´ï¼›ä¸ºä»€ä¹ˆç»„é•¿åœ¨è¿™ä¹ˆå®‰æ’å¼€å‘ï¼Œæ„Ÿè§‰æ•ˆç‡ä¸é«˜å•Šï¼›ä¸ºä»€ä¹ˆå¤§å®¶éƒ½åœ¨æ¨è´£ä»»ï¼Œæ„Ÿè§‰ä¸è¦å›¢é˜Ÿçš„æ°›å›´å•Šâ€¦.</p><p><strong>ä¸€ä¸ªå®Œæ•´çš„é¡¹ç›®ï¼Œä»é¡¹ç›®åˆæœŸç«‹é¡¹åˆ°é¡¹ç›®äº¤ä»˜ï¼Œä¼šç»å†ï¼šéœ€æ±‚åˆ†æã€è¯¦ç»†éœ€æ±‚åˆ†æã€é¡¹ç›®å¼€å‘å‰å‡†å¤‡ã€é¡¹ç›®å¼€å‘&amp;æµ‹è¯•ã€åˆéªŒï¼ˆè¿­ä»£ï¼‰ç»ˆéªŒï¼Œè¿™ä¹ˆå‡ ä¸ªåŸºæœ¬çš„è¿‡ç¨‹ã€‚ä¸è®ºå†…å¤–éƒ¨é¡¹ç›®ï¼Œéƒ½æœ‰ä¸€ä¸ªå…±åŒç‚¹ï¼Œå°±æ˜¯æœ‰ä¸€ä¸ªæ—¢å®šçš„ç›®æ ‡ã€‚å¤§å®¶çš„KPIä¸ç›®æ ‡çš„ç»“æœæŒ‚é’©ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå€˜è‹¥è¿™ä¸ªç›®æ ‡æ²¡æœ‰å®ç°ï¼ŒKPIä¼šä¸ä¼šè€ƒè™‘è¯´å‰ç«¯æ²¡æœ‰é—®é¢˜ï¼Œå°±è¿˜æ˜¯ç»™ä½ æ‰“ä¸ªé«˜KPIï¼Ÿå€˜è‹¥è¿™ä¸ªç›®æ ‡å®ç°çš„ä¸€èˆ¬èˆ¬ï¼Œå®¢æˆ·è®©ä½ ä»¬æ”¹æ¥æ”¹å»ï¼ŒKPIè€ƒæ ¸æ‰“äº†ä¸ªåŸºæœ¬åˆ†ï¼Œå®¢æˆ·ä¼šä¸ä¼šä¹°å•ï¼Ÿå€˜è‹¥è¿™ä¸ªç›®æ ‡å®ç°äº†ï¼Œå‰ç«¯è´¡çŒ®ä¸€èˆ¬èˆ¬ï¼ŒKPIè€ƒæ ¸ä¹Ÿä¼šè€ƒè™‘ä¸€ç‚¹ç‚¹ï¼Œä½†æ˜¯è¿™ä¸ªä»½é¢ä¼šå¤§å—ï¼Ÿ</strong></p><p>æ€»ç»“ä¸€ä¸‹ï¼Œæœ‰éœ€æ±‚åˆ†æçš„é—®é¢˜ï¼Œæœ‰æ²Ÿé€šçš„é—®é¢˜ï¼Œä¹Ÿæœ‰æ•ˆç‡é—®é¢˜â€¦</p><p>è¿™äº›æ˜¯æŠ€æœ¯å¼€å‘è¿‡ç¨‹ä¸­çš„é—®é¢˜ï¼Œå†æ¥è°ˆä¸€è°ˆæ–°äºº&amp;è€äººéƒ½ä¼šé¢å¯¹çš„é—®é¢˜â€”â€”é¢è¯•ä¸æ‹©ä¸šã€‚</p><p>éƒ½è¯´â€œç”·æ€•å…¥é”™è¡Œï¼Œå¥³æ€•å«é”™éƒâ€ï¼Œè¿™å¥è¯å°±æ˜¯ç”Ÿæ´»çš„å†™ç…§å•Šã€‚åœ¨ä¸­å›½ï¼Œè¿™ä¹ˆç‰©è´¨çš„ç¤¾ä¼šï¼Œè¿˜æœ‰å¤šå°‘çº¯æ´çš„æ„Ÿæƒ…ã€‚åœ¨æ¿€çƒˆç«äº‰çš„äº’è”ç½‘è¡Œä¸šï¼Œè¿˜æœ‰å¤šå°‘è“æµ·ï¼Ÿæ²¡æœ‰äº†ï¼Œçº¢åˆ©ä¹Ÿè¿˜æœ‰ï¼Œä½†æ˜¯æ²¡æœ‰ä»¥å‰é‚£ä¹ˆå¤šäº†ï¼Œå› ä¸ºé—¨æ§›åœ¨å˜ä½ï¼Œäººå·¥æˆæœ¬ä¸€ç›´æ˜¯ä¼ä¸šå‰è¿›çš„ç»Šè„šçŸ³ã€‚</p><p>æ‰€ä»¥ï¼Œå…ˆè¦å…»æ´»è‡ªå·±ï¼Œå†å»æ€è€ƒæ›´é•¿è¿œçš„äº‹æƒ…ã€‚è¿™ä¸€ç‚¹ï¼Œä¸€å®šè¦æ¸…æ¥šã€‚</p><p><strong>åœ¨ä¼ä¸šä¸­ï¼Œå¤§å®¶è¦æœ‰â€œä¸»äººç¿â€çš„å¿ƒæ€ï¼Œç°åœ¨å¾ˆå¤šä¼ä¸šéƒ½æ˜¯â€œæ‘¸ç€çŸ³å¤´è¿‡æ²³â€ï¼Œä¹Ÿæœ‰ä¸€äº›â€œä¸è¦è„¸çš„â€ï¼ˆä¼šCopyçš„ï¼‰ï¼Œé‚£ä¹ˆå…¶å®å¤§å®¶å­¦ä¹ è¿™ç§æ–¹æ³•åˆä½•å°ä¸å¯å‘¢ï¼Ÿå†ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¾ˆå¤šæ—¶å€™ï¼Œä¼šå°‘é—®é‚£ä¸€å¥â€œä¸ºä»€ä¹ˆâ€ï¼Ÿå¿ƒä¸­å……æ»¡ç€ç–‘é—®åˆä¸æƒ³ç€è§£å†³çš„åŠæ³•ï¼Œé‚£å°±é”™è¿‡äº†å¾ˆå¤šå­¦ä¹ çš„æœºä¼šã€‚æ¯”å¦‚ï¼šé¡¹ç›®ç›®æ ‡æ²¡æœ‰å®Œæˆï¼Œå¯ä»¥æ‰¾æ‰¾é—®é¢˜çš„åŸå› ï¼Œçœ‹çœ‹ä¸‹æ¬¡æœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•è§„é¿ï¼›å®¢æˆ·æ”¹æ¥æ”¹å»éœ€æ±‚ï¼Œå¯ä¸å¯ä»¥é€šè¿‡ä¸€äº›æ‰‹æ³•æ˜ç¡®ä¸‹æ¥ï¼›å›¢é˜Ÿä¸­ï¼Œè¢«å¼±åŒ–çš„å‰ç«¯å›¢é˜Ÿï¼Œæ€ä¹ˆæ‰èƒ½ä½“ç°è‡ªå·±çš„ä»·å€¼ï¼Œæ˜¯ç¼ºå°‘å®£ä¼ ï¼Œè¿˜æ˜¯å®åŠ›ä¸å…è®¸ï¼Ÿå¦‚æœæ˜¯åè€…ï¼Œé‚£ä¹ˆï¼Œå°±æ€è€ƒä¸€ä¸‹æ˜¯ä¸æ˜¯æ•ˆç‡ä¸Šæœ‰é—®é¢˜ï¼Œæ˜¯ä¸æ˜¯æ²Ÿé€šä¸Šæœ‰é—®é¢˜â€¦è¿™æ ·é¡ºè—¤æ‘¸ç“œï¼Œå°±èƒ½æ‰¾åˆ°å¥½å¤šç­”æ¡ˆã€‚</strong></p><p>åœ¨æ‰¾å¯»â€œçœŸç†â€çš„è¿‡ç¨‹ä¸­ï¼Œè‚¯å®šä¸æ˜¯ä¸€è¹´è€Œå°±çš„ï¼Œé‚£ä¹ˆå°±è¦æœ‰â€œæ°´æ»´çŸ³ç©¿â€çš„ç²¾ç¥ï¼Œä¸æ–­çš„æ‘¸ç´¢ç€å‰è¿›ã€‚</p><p>æ¯ä¸ªäººçš„é—®é¢˜å¯èƒ½éƒ½ä¸ä¸€æ ·ï¼Œå†æŠ€è‰ºç²¾æ¹›çš„å¨å¸ˆï¼Œä¹Ÿä¸èƒ½ä¿è¯ï¼Œæ¯ä¸€é“èœéƒ½åˆå¤§å®¶çš„å‘³å£ã€‚å°±åƒæˆ‘ä»¬å°æ—¶å€™ä¼šæ‰“é¢„é˜²é’ˆä¸€æ ·ï¼Œæˆ‘ä»¬ä¼šå°½é‡å¤šçš„å»æ¥è§¦å„å¼å„æ ·çš„â€œç–«è‹—â€ï¼ˆå…¶å®å°±æ˜¯èº«ä½“åœ¨è¯•é”™ï¼‰ï¼Œè¿™æ ·æ‰èƒ½â€œæŠµå¾¡â€å¤–ç•Œçš„â€œä¾µæ‰°â€ï¼Œå¯¹å§ï¼Ÿ</p><h2 id="ä¸‰ã€æŠ€æœ¯èœ•å˜"><a href="#ä¸‰ã€æŠ€æœ¯èœ•å˜" class="headerlink" title="ä¸‰ã€æŠ€æœ¯èœ•å˜"></a>ä¸‰ã€æŠ€æœ¯èœ•å˜</h2><p>â€”â€”ä»å‰ç«¯å°ç™½åˆ°é«˜é˜¶å‰ç«¯çš„æˆé•¿è·¯å¾„</p><p>å¯¹äºæ–°äººæ¥è¯´ï¼Œæˆ‘ä¹‹å‰é—®è¿‡æˆ‘çš„ä¸€ä¸ªåŒäº‹ï¼Œæˆ‘æ·±æ„Ÿè®¤åŒï¼Œå¤§å®¶å¹³æ—¶å·¥ä½œä¸­ï¼Œç¢°åˆ°é—®é¢˜äº†ï¼Œæœ€æƒ³åšçš„äº‹æƒ…ï¼Œå°±æ˜¯æ‰¾ä¸ªäººä¸€é—®ï¼Œæˆ–è€…ä¸€æœç´¢ï¼Œå°±æœ‰ç°æˆçš„ä»£ç å¯ä»¥Copyï¼Œç¾æ»‹æ»‹~æ˜¯å§ï¼Ÿ</p><p>å…ˆæŠŠè¿™ä¸ªæƒ…å†µæˆ‘ä»¬æ”¾ä¸€è¯ã€‚</p><p>é‚£é¢˜å¤–è¯ä¸€ä¸‹ï¼Œé‚£å¤§å®¶çŸ¥é“ä¸­å¹´å±æœºæ˜¯æ€ä¹ˆæ¥çš„å—ï¼Ÿè°éƒ½çŸ¥é“æœ‰ä¸­å¹´å±æœºï¼Œä»€ä¹ˆ35å²ç¨‹åºå‘˜çš„ä¸€åˆ°åä¹‹ç±»çš„â€¦.è¯´ç€è¯´ç€å°±å¿ƒæ€çˆ†ç‚¸äº†ï¼Œä»€ä¹ˆå¹´é¾„å¤§äº†ï¼Œå¹²ä¸äº†äº†å•Šï¼›ä»€ä¹ˆç²¾åŠ›è·Ÿä¸ä¸Šï¼Œä¸èƒ½ç†¬å¤œäº†å•Šï¼›ä»€ä¹ˆå®¶é‡Œäº‹å¤šï¼Œèº«ä½“æŠ—ä¸ä½äº†å•Šâ€¦ </p><p>ä½†æ˜¯ï¼Œæˆ‘èº«è¾¹é‚£äº›35å²ä»¥ä¸Šçš„ç¨‹åºå‘˜æ´»çš„æŒºå¥½å•Šï¼Œä»–ä»¬èº«ä¸Šæœ‰ä¸€ä¸ªå…±åŒçš„ç‰¹ç‚¹ï¼šå°±æ˜¯æœ‰å±æœºæ„è¯†ã€‚</p><p>å†å›åˆ°ä¸Šé¢çš„æƒ…å†µï¼Œå¦‚æœä¸€ç›´éƒ½æ˜¯Copyåˆ«äººçš„â€œç­”æ¡ˆâ€ï¼Œ5å¹´åï¼ŒåŠ å…¥å…¬å¸çš„å°ç™½çœ‹åˆ°äº†ä½ çš„è§£å†³æ–¹æ¡ˆä¹‹åï¼Œ1ä¸ªæœˆå°±èƒ½ä¸Šæ‰‹ä½ å†™çš„ä»£ç äº†ï¼Œç„¶åï¼Œè€æ¿ä¸€çœ‹ï¼Œé‚£ä¸ªå°ä¼™å­ä¸€ä¸ªæœˆ2Kï¼Œä½ ä¸€ä¸ªæœˆ10Kï¼Œæ˜¯äººå®¶çš„5å€ï¼Œè€æ¿æ€ä¹ˆæƒ³ï¼Ÿ</p><p><strong>å¥½ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬ä¸è¦å€˜è‹¥ï¼Œå°±æ¥è¯´è¯´æˆ‘èº«è¾¹çš„&gt;35å²çš„ç¨‹åºå‘˜ã€‚ä»–ä»¬ä¸€è¿›å…¬å¸1-2å¹´ç†Ÿæ‚‰å…¬å¸çš„ä¸šåŠ¡ï¼Œå¿«é€Ÿæˆé•¿äº†èµ·æ¥ï¼Œéšç€å›¢é˜Ÿäººå‘˜çš„å¢åŠ ï¼Œä»–ä»¬æ‰¿æ‹…äº†ä¸€éƒ¨åˆ†å…¬å¸çš„æ‰©å±•ä¸šåŠ¡ï¼ˆæ¯”å¦‚ï¼šç§»åŠ¨ç«¯ã€æµ‹è¯•ã€åå°ç­‰ï¼‰ï¼›åˆ°äº†3-5å¹´çš„æ—¶å€™ï¼Œä»–ä»¬åˆå¼€å§‹åšæ•ˆç‡ã€åˆ¶åº¦ã€æ ‡å‡†åŒ–çš„äº‹æƒ…ï¼›åˆ°äº†6-8å¹´çš„æ—¶å€™ï¼ŒåŸºæœ¬ä¸Šäººäººéƒ½æˆä¸ºäº†ä¸»ç®¡ï¼Œæœ‰è‡ªå·±çš„å°å›¢é˜Ÿï¼Œåœ¨å¤–é¢æ¥ç€å¤§å°çš„æ´»ï¼Œåˆ©ç”¨å…¬å¸çš„èµ„æºï¼Œä¸€æ–¹é¢æ‰©å±•äº†å…¬å¸çš„ä¸šåŠ¡ï¼ˆæ‰€ä»¥è€æ¿çä¸€æ”¯çœ¼ï¼Œé—­ä¸€æ”¯çœ¼ï¼‰ï¼Œå¦ä¸€æ–¹é¢ï¼Œæå‡äº†è‡ªå·±çš„åœ°ä½ï¼ˆé‚£æ˜¯æ ¹æ·±è’‚å›ºçš„ï¼‰ï¼Œå›¢é˜Ÿå°‘ä¸äº†è¿™æ ·çš„æ ¸å¿ƒäººç‰©ã€‚å†é€€ä¸€æ­¥è¯´ï¼Œå³ä½¿å¤±ä¸šäº†ï¼Œä»–ä»¬é©¬ä¸Šè¿˜èƒ½æ‰¾åˆ°æ›´å¥½çš„å·¥ä½œã€‚</strong></p><p>è¯´åˆ°è¿™é‡Œï¼Œå¤§å®¶èƒ½æ˜ç™½ä»€ä¹ˆå—ï¼Ÿ</p><p>éƒ½çŸ¥é“è·³æ§½èƒ½åŠ è–ªï¼Œé‚£æ€ä¹ˆè·³ï¼Œå‡­ä»€ä¹ˆè·³ï¼Ÿå†™äº†ä¸¤å¹´çš„ä»£ç ï¼Œå°±å¯ä»¥è·³åˆ°æ›´é«˜çš„ä½ç½®ï¼Ÿä¸æ˜¯çš„ï¼Œè€Œä¸”æ—¶é—´ä¹…äº†ï¼Œé©¬è„šä¹Ÿä¼šéœ²å‡ºæ¥ï¼Œä¸æ˜¯å—ï¼Ÿ</p><p>é‚£æ€ä¹ˆåŠï¼Ÿ</p><p>è¿™é‡Œæœ‰ç»™ä¸åŒçš„äººï¼Œæ¥åœ°æ°”çš„è§£å†³æ–¹æ¡ˆï¼š</p><p>å¯¹äºå…¥é—¨å‰ç«¯çš„åŒå­¦æ¥è¯´ï¼Œé¦–å…ˆï¼Œæ˜¯æ‘†æ­£è‡ªå·±çš„å¿ƒæ€ã€‚ä»åŸºç¡€çš„ç¯å¢ƒã€åŸºæœ¬çš„æŠ€èƒ½ã€åŸºæœ¬çš„ä¸šåŠ¡å…¥æ‰‹ã€‚</p><p>åŸºç¡€çš„ç¯å¢ƒæ˜¯ä»€ä¹ˆï¼Ÿå¥½å¤šåŒå­¦ï¼Œåœ¨å­¦ä¹ å‰ç«¯çš„è¿‡ç¨‹ä¸­ï¼Œåœ¨ç¯å¢ƒä¸Šåƒäº†å¤§äºï¼ŒèŠ±äº†å¾ˆå¤šçš„æ—¶é—´ã€‚</p><p>æœ‰çš„åŒå­¦å°±ä¼šé—®ï¼Œè€å¸ˆä¸å°±æ˜¯æµè§ˆå™¨+Nodejså—ï¼Ÿé”™ï¼Œç°åœ¨çš„å‰ç«¯çš„è¦æ±‚ï¼Œå·²ç»ä»é™æ€é¡µé¢çš„å¼€å‘å˜åŒ–äº†ï¼Œéœ€è¦å¯¹æœåŠ¡å™¨ç¯å¢ƒã€æ•°æ®åº“ç¯å¢ƒã€è‡ªåŠ¨åŒ–ç¯å¢ƒï¼Œè¦ä¼šä½¿ç”¨ã€‚æ¯”å¦‚ï¼šè€æ¿è¯´ï¼Œä½ æŠŠä½ çš„ä»£ç éƒ¨ç½²ä¸€ä¸‹å§ï¼Œä½ å°±buildäº†ä¸€ä¸‹ï¼Œå‘ç»™äº†åå°ï¼Œç»“æœï¼Œåå°é‚£è¾¹è¯´ï¼Œæˆ‘ä»¬çš„é¡¹ç›®è¿è¡Œäº†xxxç›®å½•ä¸‹ï¼Œä½ è¿™é‡Œèµ„æºåŠ è½½æœ‰é—®é¢˜â€¦</p><p>åŸºæœ¬çš„æŠ€èƒ½æ˜¯ä»€ä¹ˆï¼Ÿé™¤äº†åŸºæœ¬çš„3â€œå‰‘å®¢â€ï¼Œè¿˜éœ€è¦æœ‰IDEä½¿ç”¨ã€NPMåŠ é€Ÿ(é™¤äº†CNPMï¼Œè¿˜æœ‰Yarnï¼‰ã€çœŸæœºè°ƒè¯•ç­‰æ–¹é¢çš„çŸ¥è¯†ã€‚</p><p>åŸºæœ¬çš„ä¸šåŠ¡æ˜¯ä»€ä¹ˆï¼Ÿæ¯”å¦‚ç™»å½•é‰´æƒã€é•¿åˆ—è¡¨ã€åŠ¨æ€åˆ—è¡¨ã€å¤šåŠŸèƒ½è¡¨å•â€¦ç­‰ã€‚è¿™äº›ï¼Œæˆ‘ç›¸ä¿¡ï¼Œå·²ç»æœ‰ä¸å°‘çš„åŒå­¦ä¹°è¿‡ç›¸åº”çš„è¯¾ç¨‹ï¼Œä¹Ÿèƒ½å¯¹æ ‡è‡ªå·±çš„å·¥ä½œçš„å®é™…ä¸šåŠ¡ï¼Œä½†æ˜¯ï¼Œæˆ‘æƒ³è¯´æ˜ä¸€ç‚¹çš„ï¼Œå‰ç«¯ä¸JAVAè¿™ç±»çš„åç«¯ä¸ä¸€æ ·ï¼Œå‰ç«¯çš„ä¸šåŠ¡å…¶å®å¾ˆå•çº¯ï¼ŒæŠ€æœ¯ä¹Ÿå¾ˆå•ä¸€ï¼Œä¸åƒåå°JAVAå­¦ä¸€å¥—ä¸šåŠ¡è®¾è®¡é€‚åˆäºä¸€å¥—ä¸šåŠ¡ï¼Œä½†æ˜¯å…¶ä»–çš„ä¸šåŠ¡éœ€è¦é‡æ–°è€ƒé‡ä¸è®¾è®¡ã€‚è€Œåœ¨å‰ç«¯ä¸­ï¼Œæ¯”å¦‚Vueæ¡†æ¶å°±å¯ä»¥é€šåƒï¼Œå„ç±»å‰å°ã€åå°é¡¹ç›®ã€‚è¿™æ˜¯å‰ç«¯ä¸åç«¯å­¦ä¹ ä¹‹ä¸­ï¼Œå¤§å®¶éœ€è¦éå¸¸æ˜ç™½çš„ä¸€ç‚¹â€”â€”å‰ç«¯ä¸æ˜¯å­¦çš„ä¸šåŠ¡åœºæ™¯è¶Šå¤šè¶Šå¥½ï¼Œå…³é”®æ˜¯è¦ç†Ÿç»ƒ&amp;äº†è§£æŠ€æœ¯çš„åº”ç”¨åœºæ™¯ã€‚</p><p>è¿™ä¸ªé˜¶æ®µï¼Œéœ€è¦æœ‰ä¸€ä¸ªå¥½çš„å¼•è·¯äººï¼Œæ‰èƒ½èµ°çš„äº‹åŠåŠŸå€ã€‚</p><p>é‚£ä¹ˆï¼Œè¿‡äº†è¿™ä¸ªé˜¶æ®µï¼ˆå¤§æ¦‚ä¼šèŠ±1-3å¹´ï¼‰ï¼Œè¿›å…¥åˆ°ä¸­æœŸä¹‹åã€‚ä¸ä»…å¤§å®¶ç†Ÿæ‚‰äº†å…¬å¸ã€å›¢é˜Ÿçš„ä¸šåŠ¡ï¼Œè€Œä¸”æœ‰ä¸€å®šçš„æ¡†æ¶ä½¿ç”¨ç»éªŒï¼Œå¯ä»¥è§£å†³å®é™…é—®é¢˜äº†ã€‚é‚£ä¹ˆï¼Œå°±è¦ä»æ•ˆç‡å‡ºå‘ã€‚å­¦ä¹ å·¥ç¨‹åŒ–ã€ç»„ä»¶åŒ–ã€æ¥å£&amp;åå°çš„çŸ¥è¯†ï¼Œä¸ºè‡ªå·±çš„å‰ç«¯ä¹‹è·¯ä½œåç»­çš„é“ºå«ã€‚</p><p>è¿™ä¸ªé˜¶æ®µæ˜¯å¾ˆå¤šåŒå­¦ä¸å–œæ¬¢çš„ä¸€ä¸ªé˜¶æ®µï¼Œå¾ˆç—›è‹¦ï¼Œä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºï¼Œé¦–å…ˆåœ¨æ€æƒ³ä¸Šå°±æ˜¯ä¸€é“åã€‚å¾ˆå¤šå‰ç«¯çš„åŒå­¦ï¼Œè§‰å¾—å‰ç«¯å°±æ˜¯åšåšé¡µé¢å°±å¥½äº†ï¼Œå¾ˆå¤šäº‹æƒ…å¯ä»¥äº¤ç»™åå°ï¼Œæ¯”å¦‚ï¼šæ•°æ®ç»“æ„ä¸å¥½æ•´ç†äº¤ç»™åå°ï¼Œä¸‹è½½åŠŸèƒ½ä¸å¥½åšäº¤ç»™åå°ï¼Œæ¥å£å¤ªéš¾è®¾è®¡äº¤ç»™åå°â€¦ç»“æœå°±æ˜¯åå°çš„å…„å¼ŸæŠ€æœ¯çªé£çŒ›è¿›ï¼Œè‡ªå·±ä¸€äº‹æ— æˆï¼Œè¿˜åœ¨å†™é¡µé¢ã€‚</p><p>è¿™ä¸ªé˜¶æ®µï¼Œè¦å­¦ä¹ LinuxçŸ¥è¯†ï¼Œå­¦ä¹ æ¡†æ¶çš„åŸç†ï¼Œå»å•ƒå¹³æ—¶é‚£äº›æ‰€è°“â€œéš¾å•ƒçš„éª¨å¤´â€ï¼Œç”šè‡³è¦å»æ¶‰åŠä¸€éƒ¨åˆ†åå°çš„çŸ¥è¯†ï¼Œæ‰èƒ½æ‰“å¼€è§†é‡ï¼Œçªç ´ç“¶é¢ˆã€‚</p><p>äººç”Ÿæœ‰å¾ˆå¤šæ¬¡é€‰æ‹©ï¼Œä½†æ˜¯ä¸€æ¬¡æ­£ç¡®çš„é€‰æ‹©ï¼Œå¯ä»¥å†³å®šæ•´ä¸ªäººç”Ÿçš„èµ°å‘ã€‚æ‰€ä»¥ï¼Œåœ¨ä¸€å¼€å§‹çš„æ—¶å€™ï¼Œå°±è¦å¤šå»å°è¯•ï¼Œå¤šå»æ„Ÿå—è¿™å‰ç«¯çš„é‚£ä¹ˆå¤šæ–¹å‘ï¼Œæ‰ä¼šæ‰¾åˆ°å±äºè‡ªå·±çš„æ–¹å‘ã€‚</p><p><strong>ä»»ä½•çš„è´¨å˜éƒ½æ˜¯é‡å˜çš„ç»“æœï¼Œè¿›å…¥åˆ°é«˜é˜¶ä¹‹åã€‚ä»æŠ€æœ¯ä¸Šï¼Œåº”è¯¥è¦è¾¾åˆ°å¯ä»¥åº”å¯¹ä¸åŒçš„ä¸šåŠ¡åœºæ™¯çš„å¼€å‘ï¼Œé‚£ä¹ˆå°±å›åˆ°äº†åˆå§‹çš„é—®é¢˜ï¼Œè‡ªå·±çš„åˆå¿ƒæ˜¯ä»€ä¹ˆï¼Ÿå–œæ¬¢æŠ€æœ¯çš„ï¼Œå¾€æŠ€æœ¯æ›´æ·±çš„åœ°æ–¹èµ°ï¼Œæ¶æ„ã€æ•°æ®åº“ã€è‡ªåŠ¨åŒ–&amp;è¿ç»´ï¼›å–œæ¬¢ç®¡ç†çš„ï¼Œå¾€äº§å“ç»ç†ã€é¡¹ç›®ç»ç†æ–¹å‘èµ°ï¼Œå­¦ä¹ äº§å“è§„åˆ’ã€éœ€æ±‚åˆ†æã€æ–‡æ¡£ç®¡ç†ï¼Œä»¥è¾¾åˆ°æ•ˆç‡çš„å›¢é˜Ÿæ¨åŠ¨ï¼›å–œæ¬¢æµ‹è¯•çš„â€¦å–œæ¬¢UIçš„â€¦</strong></p><p>åŒæ ·çš„ï¼Œä¸Šé¢çš„æ‰€è¿°çš„å†…å®¹ï¼Œåœ¨æˆ‘ä»¬çš„è¯¾ç¨‹ä¸­ï¼Œä¹Ÿæœ‰å®Œæ•´çš„è§†é¢‘ä»‹ç»ã€‚</p><p>è·¨è¿‡äº†ç¬¬ä¸‰é˜¶æ®µçš„åŒå­¦ï¼Œå·²ç»ä¸éœ€è¦æˆ‘ä»¬çš„å¸®åŠ©äº†ï¼Œæˆ‘ä¹Ÿæ”¶åˆ°äº†å¾ˆå¤šåŒå­¦çš„å›å¤ï¼Œæ‰¾åˆ°äº†è‡ªå·±å¿ƒä»ªçš„å·¥ä½œï¼Œå°‘èµ°äº†å¤šå°‘å¼¯è·¯ï¼›ä¹Ÿæœ‰æˆ‘çš„å­¦ç”Ÿï¼Œæˆä¸ºäº†æˆ‘çš„åŠ©æ‰‹ï¼ŒåŠ å…¥äº†æˆ‘çš„å›¢é˜Ÿï¼Œä¸€èµ·ç­‘â€œæ¢¦â€ã€‚</p><h2 id="å››ã€å‰ç«¯å¤§å±€è§‚"><a href="#å››ã€å‰ç«¯å¤§å±€è§‚" class="headerlink" title="å››ã€å‰ç«¯å¤§å±€è§‚"></a>å››ã€å‰ç«¯å¤§å±€è§‚</h2><p>â€”â€”ä»å‰åˆ°ç«¯ï¼Œé«˜è–ªå·¥ä½œ=é«˜ä»·å€¼è¾“å‡º=å¤šç«¯å¼€å‘</p><p>å¿ƒçµé¸¡æ±¤é¢„è­¦â€¦.</p><p><strong>æˆ‘ä»¬éƒ½æƒ³è¦æ›´å¥½çš„ç”Ÿæ´»ï¼Œç¾¡æ…•åˆ«äººçš„åŒæ—¶ï¼Œåˆå¾ˆå°‘çœ‹åˆ°åˆ«äººçš„ä»˜å‡ºã€‚è–ªé…¬æ˜¯ä¸èƒ½åŠ›&amp;è´£ä»»æˆæ­£æ¯”çš„ã€‚</strong></p><p>è´£ä»»è¿™ä¸€ç‚¹å¾ˆå¥½ç†è§£ï¼Œå³ä»½å†…çš„äº‹æƒ…è¦åšå¥½åšæ¼‚äº®ã€‚åšå¥½æ˜¯åŸºæœ¬çš„ï¼Œåšæ¼‚äº®æ˜¯å¾ˆéš¾çš„ã€‚æˆ‘ä»¬éƒ½çŸ¥é“é‚£ä¸ªâ€œæ¢—â€ï¼Œä¸¤ä¸ªäººè¢«å®‰æ’å»ä¹°åœŸè±†ï¼ŒAè¯´åœŸè±†ä¹°ä¸åˆ°äº†ï¼ŒBè¯´åœŸè±†ä¹°ä¸åˆ°äº†ï¼Œä½†æ˜¯å…¶ä»–çš„èœæ˜¯xxxä»·ï¼Œä»æˆ‘ä»¬æ—¥å¸¸çš„åˆ†æä¸Šæ¥çœ‹â€¦.</p><p>å¤šä»é¢†å¯¼è€…çš„è§’åº¦å‡ºå‘å»çœ‹é—®é¢˜ï¼Œå°±ä¼šå‘ç°å¥½å¤šä¸ä¸€æ ·çš„å¤„äº‹ç»“æœã€‚</p><p>å†å›åˆ°å‰ç«¯ï¼ŒåšæŠ€æœ¯çš„èƒ½åŠ›æ˜¯æŒ‡ä»€ä¹ˆï¼Ÿå­¦ä¹ èƒ½åŠ›ï¼Ÿæ²Ÿé€šèƒ½åŠ›ï¼Ÿç†è§£èƒ½åŠ›ï¼Ÿâ€¦éƒ½å¯¹ï¼Œæˆ‘è§‰å¾—æœ€é‡è¦çš„æ˜¯è§£å†³é—®é¢˜çš„èƒ½åŠ›ï¼ŒåŒ…æ‹¬äº†ä¸Šé¢çš„å…¶ä»–çš„èƒ½åŠ›ã€‚è¿™ä¸€ç‚¹ï¼Œåˆæ„Ÿè§‰å¾ˆç©ºï¼Œä½†æ˜¯å®åˆ™æ˜¯â€œæ²¡æœ‰äººï¼Œå¤©ç”Ÿå°±ä¼šè§£å†³é—®é¢˜ï¼Œéƒ½æ˜¯åå¤©åŸ¹å…»å‡ºæ¥çš„â€ã€‚ä¸»åŠ¨çš„æ‹…è´£ï¼Œæ‰ä¼šæœ‰æ›´å¤šæœºä¼šåŸ¹å…»è‡ªå·±çš„èƒ½åŠ›ã€‚</p><p>éšç€æŠ€æœ¯çš„æ¼”è¿›ï¼Œå‰ç«¯çš„è¾¹ç•Œå·²ç»å˜å¾—éå¸¸çš„æ¨¡ç³Šäº†ã€‚é‚£ä¹ˆï¼Œè‡ªå·±çš„â€œä¸€äº©ä¸‰åˆ†åœ°â€ï¼Œå¯èƒ½åœ¨ä¸ä¹…çš„å°†æ¥å°±è¢«ç“œåˆ†èµ°äº†ï¼Œä¼ä¸šä¼šå»ç•™ä½é‚£äº›æˆå€ä»·å€¼çš„äººæ‰ï¼Œé‚£å¦‚ä½•å»å¢åŠ è‡ªå·±çš„ä»·å€¼ï¼Ÿ</p><p>å‰ç«¯ï¼Œâ€œå‰â€ä»£è¡¨ç€è®¾è®¡ã€éœ€æ±‚ã€äº¤äº’ã€äº§å“â€¦è¿™äº›ç”¨æˆ·ä¾§çš„èƒ½çœ‹å¾—è§æ‘¸å¾—ç€çš„ï¼Œâ€œç«¯â€ä»£è¡¨ç€æ¥å£ã€æµ‹è¯•ã€è‡ªåŠ¨åŒ–ã€è¿ç»´ã€åå°â€¦.å¤§å®¶å¾ˆå¤šæ—¶å€™å¿½ç•¥çš„éƒ¨åˆ†ã€‚æˆ‘ä»¬çš„ä»·å€¼ï¼Œå°±è¦åƒä¸€æŠŠå°–åˆ€ä¸€æ ·ï¼Œæ·±æ·±åœ°æ’å…¥è¿™äº›ç—›ç‚¹çš„åœ°æ–¹ã€è¿™äº›è¢«å¿½ç•¥çš„åœ°æ–¹â€¦</p><p><strong>æœ‰äº†ä¸€ä¸ªå¯¹â€œç«¯çš„â€çš„è®¤è¯†ä¹‹åï¼Œå¯ä»¥å»è®¾ç½®è‡ªå·±è¿‘æœŸä¸è¿œæœŸçš„ç›®æ ‡ï¼Œç„¶ååŠ¨æ‰‹åšèµ·æ¥ã€‚æœ‰äº†çŸ¥è¯†äº†å¡«è¡¥ï¼Œé‚£ä¸ªâ€œçŸ­æ¿â€è¡¥é½åçš„æ°´æ¡¶ï¼Œæ‰èƒ½æ¥æ»¡æ°´ã€‚å…·ä½“çš„åšæ³•ï¼š1. å¯ä»¥æ€è€ƒå›¢é˜Ÿæ•ˆç‡å¼€å‘ï¼Œåšä¸€äº›æŠ€æœ¯å¯¼å…¥ï¼›2. å¯ä»¥ä¸»åŠ¨å»æ‰¿æ‹…éœ€æ±‚åˆ†æçš„å·¥ä½œï¼Œç†Ÿæ‚‰ä¸šåŠ¡ã€æ¥è§¦å®¢æˆ·ï¼Œé”»ç‚¼æ–‡å­—å’Œæ–‡æ¡£èƒ½åŠ›ï¼›3. å¯ä»¥å‚ä¸ä¸€äº›â€œç«¯â€çš„å¼€å‘ï¼Œæ— è®ºæ˜¯åå°è¿˜æ˜¯è·¨ç«¯åº”ç”¨ï¼ŒæŠŠè‡ªå·±çš„å®šä½è®¾ç½®çš„æ›´é«˜ä¸€ç‚¹ã€‚â€¦</strong></p><p>æœ€åï¼Œæä¸€ç‚¹ã€‚æˆ‘ä»¬çš„ä»·å€¼ï¼Œä¸è¦ä»ç‰ºç‰²è‡ªå·±çš„æ—¶é—´ä¸Šï¼ˆåŠ ç­ä¸­ï¼‰ä½“ç°å‡ºæ¥ï¼Œè¦æŠŠè‡ªå·±çš„æ€è€ƒä¸è¡ŒåŠ¨ç»“åˆèµ·æ¥ï¼Œå˜æˆæœ‰ä»·å€¼çš„å·¥ä½œã€‚å‘Šåˆ«å¹³å‡¡ï¼ˆé‡å¤å’Œå•è°ƒï¼‰ï¼Œå…¶å®çœŸçš„å¾ˆç®€å•ï¼Œä»ä¸€ä»¶ä»¶å°äº‹åšèµ·ï¼Œæ”¹å˜è‡ªå·±çš„çŠ¶æ€ï¼Œæ‰èƒ½å †ç Œå‡ºâ€œä¸‡ä¸ˆé«˜æ¥¼â€ã€‚</p><p>å½“ä½ ä¸å†éœ€è¦ç«™åœ¨â€œå·¨äººâ€è‚©è†€ä¸Šçš„æ—¶å€™ï¼Œå½“ä½ æˆä¸ºäº†â€œå·¨äººâ€ï¼Œä½ çš„è–ªæ°´è¿˜ä¼šä½å—ï¼Ÿ</p><h2 id="äº”ã€æŒ‘æˆ˜å³æ˜¯æœºé‡"><a href="#äº”ã€æŒ‘æˆ˜å³æ˜¯æœºé‡" class="headerlink" title="äº”ã€æŒ‘æˆ˜å³æ˜¯æœºé‡"></a>äº”ã€æŒ‘æˆ˜å³æ˜¯æœºé‡</h2><p>â€”â€”è¯±æƒ‘å¾ˆå¤šï¼ŒæŒ‘æˆ˜å¾ˆå¤§ï¼Œæ‹’ç»è¯´â€œä¸â€</p><p>ä¸ºä»€ä¹ˆè¯´2019å¹´æ˜¯äº’è”ç½‘æœ€å·®çš„ä¸€å¹´ï¼Ÿå› ä¸ºï¼ŒçœŸçš„æœ‰å¾ˆå¤šäººå¤±ä¸šã€‚ä¸ºä»€ä¹ˆè¯´æœªæ¥çš„10å¹´æ˜¯äº’è”ç½‘çš„å¯’å†¬ï¼Ÿå› ä¸ºï¼ŒæŠ€æœ¯çš„é—¨æ§›è¶Šæ¥è¶Šä½äº†ï¼Œäººå·¥çš„æˆæœ¬åœ¨ä¸‹é™ã€‚</p><p><strong>å‰ç«¯åœ¨æœªæ¥çš„å‡ å¹´çš„å‘å±•ï¼Œæœ‰å‡ ç‚¹æ˜¯ç¡®å®šäº†çš„ã€‚ç¬¬ä¸€ï¼ŒTypeScript çš„å¤§è§„æ¨¡æ™®åŠå’Œæµè¡Œï¼ŒTypeScript çš„æ™®åŠä¼šåå‘æ¨åŠ¨ ES6ï¼ˆECMAScript 6.0ï¼‰çš„è¿›æ­¥å’Œå‘å±•ï¼›ç¬¬äºŒï¼Œè·¨ç«¯èƒ½åŠ›è¿›ä¸€æ­¥å¢å¼ºï¼›æ¯”å¦‚å°ç¨‹åºï¼Œä¸æ–­æ¶Œç°å‡ºå„ç§è½¬è¯‘å®ç°ï¼Œä¾‹å¦‚å°ç¨‹åºã€ç§»åŠ¨ç«¯çš„Flutterã€æ¡Œé¢ç«¯çš„Electronï¼ˆå·²ç»7.xç‰ˆæœ¬äº†ï¼ŒçŸ­çŸ­2å¹´æ—¶é—´ï¼‰ç­‰ï¼›ç¬¬ä¸‰ï¼Œå¾®æœåŠ¡ã€ç»„ä»¶åŒ–ã€äººå·¥æ™ºèƒ½ï¼Œå…¶å®éƒ½æ˜¯åœ¨è§£å†³æ•ˆç‡é—®é¢˜ï¼Œå¤§å°å›¢é˜Ÿçš„çŸ­æ¿éƒ½éœ€è¦ææ•ˆï¼Œå°±æ˜¯å•äººåˆ›é€ çš„ä»·å€¼è¦æ›´å¤šï¼Œé‚£ä¹ˆåè¿‡æ¥å°±å¯¹æ€§èƒ½ã€é«˜å¯ç”¨æœ‰äº†æ›´é«˜çš„è¦æ±‚ã€‚â€¦</strong></p><p>è¿™äº›éƒ½æ˜¯æœªæ¥çš„å¿…å®šçš„æŒ‘æˆ˜ï¼Œç«™åœ¨äº†é£å£æµªå°–ï¼Œåªæœ‰å¾ˆå‡ºæ‰‹çš„äººï¼Œæ‰èƒ½æŠŠæ¡å…ˆæœºã€‚</p><p>ä¼ä¸šè¶Šæ¥è¶Šå–œæ¬¢é‚£äº›å¤åˆå‹çš„äººæ‰äº†ï¼Œä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºç»æµä¸‹è¡Œçš„å¤§è¶‹åŠ¿ä¸‹ï¼Œå¿…é¡»è¦é™æˆæœ¬ï¼Œä»¥å‰2ä¸ªäººå¹²1ä¸ªäººçš„æ´»ï¼Œç°åœ¨1ä¸ªäººå¹²3ä¸ªäººçš„æ´»ï¼Œé‚£ä¹ˆå¿…ç„¶ä¼šæœ‰æƒ¨çƒˆçš„ç«äº‰ï¼Œè¿™ä¸ªç¤¾ä¼šå°±æ˜¯è¿™ä¹ˆå¼±è‚‰å¼ºé£Ÿï¼Œä¼ä¸šçš„æ ¹æœ¬è¦æ˜¯ç”Ÿå­˜ï¼Œä¸æ˜¯åšå…¬ç›Šã€‚</p><p>å‰ç«¯è¿™ä¸ªè¡Œä¸šåˆå°±æ˜¯ä¸€ä¸ªéå¸¸ç‰¹æ®Šçš„è¡Œä¸šï¼Œå‰ç«¯å·¥ç¨‹å¸ˆå¯ä»¥æˆä¸ºäº§å“ç»ç†ã€å¯ä»¥æˆä¸ºUIè®¾è®¡ï¼ˆåˆ«å°ç§è®¾è®¡ï¼Œæˆ‘ä¸€ä¸ªUIè®¾è®¡æœ‹å‹ç©ç©åšåšï¼Œé€šè¿‡åšå…¼èŒï¼Œåœ¨å¤–ç©äº†1å¹´ï¼‰ã€å¯ä»¥æˆä¸ºé¡¹ç›®ç»ç†â€¦è¿˜å¯ä»¥è‡ªå·±å‡ºæ¥åšäº§å“ã€‚å› ä¸ºå‰ç«¯å¯ä»¥æ¥è§¦åˆ°å„å¼å„æ ·çš„è§’è‰²ï¼Œä¸è¦å½“è¿™äº›æ˜¯æ— ç”¨åŠŸï¼Œè¦æŠŠè‡ªå·±é¢å¯¹çš„æ¯ä¸€æ¬¡æŒ‘æˆ˜ï¼Œéƒ½å½“æˆæ˜¯ä¸€æ¬¡æœºä¼šï¼Œä¸€æ¬¡å»æ„Ÿå—ä¸ä¸€æ ·çš„æŠ€æœ¯é¢çš„æœºä¼šï¼Œä¸€æ¬¡å»æ„Ÿè§‰ä¸ä¸€æ ·çš„ä¸šåŠ¡çš„æœºä¼šï¼Œä¸€æ¬¡å»æ„Ÿè§‰ä¸ä¸€æ ·å¼€å‘çš„æœºä¼šâ€¦</p><p>æ‰€ä»¥ï¼Œä¸‹æ¬¡æœ‰æœºä¼šçš„æ—¶å€™ï¼Œè¯·ä¸è¦å†è¯´â€œæˆ‘ä¸æ‡‚è¿ç»´â€ï¼Œâ€œæˆ‘ä¸ä¼šæµ‹è¯•â€ï¼Œâ€œæˆ‘å†™ä¸å¥½æ–‡æ¡£â€ï¼Œâ€œæˆ‘ä¸ä¼šæ€»ç»“â€â€¦ä¹Ÿä¸è¦è¯´â€œæˆ‘å¹´é¾„å¤§äº†â€ï¼Œè¦è¯´â€œæˆ‘å¯ä»¥å­¦â€ï¼Œâ€œæˆ‘æ¥è¯•è¯•â€ï¼Œâ€œæˆ‘å°½é‡æ¥åšâ€â€¦</p><p>æ—¶é—´æ˜¯æˆ‘ä»¬æœ€å®è´µçš„è´¢å¯Œï¼Œä½†æ˜¯å¿ƒå¢ƒæ˜¯æ¯”æ—¶é—´æ›´éš¾èƒ½å¯è´µçš„ã€‚æœ‰çš„äººæ‰20å‡ºå¤´å°±å·²ç»çœ‹æ·¡äº†ç”Ÿæ´»ï¼Œæœ‰çš„äºº30å²äº†è¿˜æ²¡æœ‰äººç”Ÿçš„æ–¹å‘ï¼Œä¹Ÿæœ‰çš„äºº40å²äº†è¿˜åœ¨è½¬è¡Œåœ¨å­¦ä¹ ï¼Œæœ‰çš„äºº50å²äº†è¿˜åœ¨å†™ç€ä»£ç â€¦.ç”Ÿæ´»ï¼Œæ˜¯ç”±ä¸€äº›å¹³å‡¡çš„äº‹æƒ…æ‰€ç»„æˆçš„ï¼Œæˆ‘ä»¬å°±è¦åšè¿™äº›å¹³å‡¡çš„äº‹æƒ…çš„â€œç¼–ç»‡è€…â€ï¼Œä½ çš„äººç”Ÿç”±ä½ æ¥ä¹¦å†™ã€‚</p><p>æœ€åï¼Œè®°ä½ä¸¤å¥è¯ã€‚</p><p><strong>æ´»åœ¨å½“ä¸‹ï¼Œçæƒœæ—¶é—´ã€‚</strong></p><p><strong>ä¸å¿˜åˆå¿ƒï¼Œæ–¹å¾—å§‹ç»ˆã€‚</strong></p><p>è¯¾ç¨‹å…¬ä¼—å·ï¼š</p><img title="toimcæŠ€æœ¯ç¤¾åŒº" alt="å›¾ç‰‡è£‚äº†ï¼Œè”ç³»ï¼šadmin@wayearn.com" class="lazyload" width="300" src="https://static.www.toimc.com/blog/img/2019/å¼•é¢†æœªæ¥ï¼Œèµ°å‡ºè‡ªå·±çš„å‰ç«¯ä¹‹è·¯/qrcode.jpg?watermark/2/text/VG9pbWPlh7rlk4E=/fontsize/300"><p>è¯¾ç¨‹é“¾æ¥ï¼š<a href="https://class.imooc.com/sale/webfullstack?mc_marking=1eb5ce0be2ada8da4a6387b391f00b92&mc_channel=syzcjj1">æ…•è¯¾ç½‘èŒåœºè¿›é˜¶æˆé•¿ç³»åˆ—è¯¾-å¤§å‰ç«¯</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨ä»Šå¤©å¼€å§‹åˆ†äº«ä¹‹å‰ï¼Œæˆ‘æ¥è¯´ä¸€ä¸‹è¿™ä¸€æ¬¡åˆ†äº«çš„å‡†å¤‡ï¼Œæˆ‘å¼€å§‹é—®äº†æˆ‘çš„å¾ˆå¤šå­¦ç”Ÿï¼Œæ¯”å¦‚ï¼šè®²ä»€ä¹ˆé€‰é¢˜ã€å¤§å®¶æƒ³å¬ä»€ä¹ˆã€å¤§å®¶è§‰å¾—å­¦ä¹ äº†å‰ç«¯è¿™ä¹ˆä¹…æƒ³å¬å¬ä»€ä¹ˆâ€¦.å¾ˆå¤šçš„é—®é¢˜ï¼Œéƒ½é›†ä¸­åœ¨ä¸€ä¸ªé—®é¢˜ä¸Šï¼Œè¿™ä¹ˆå¤šçš„æœªçŸ¥ï¼Œè¿™ä¹ˆå¤šçš„æŠ€æœ¯ï¼Œæˆ‘è¯¥æ€ä¹ˆåŠï¼Ÿè¿™å°±åƒæ˜¯ä¸€ä¸ªå“²å­¦é—®é¢˜ï¼Œé—®â€œæˆ‘ä»å“ªé‡Œæ¥ï¼Œæˆ‘è¦åˆ°å“ªé‡Œå»â€ä¸€æ ·â€”â€”äººç”Ÿè¿™ä¸€èººæ—…ç¨‹ï¼Œå¦‚æœæƒ³ä¸æ¸…æ¥šå‰è·¯ï¼Œé‚£æœ€æœ€å…³é”®çš„æ˜¯æŠ“ä½ç°åœ¨ã€‚è€å¸ˆï¼Œæœ€å¤šåªæ˜¯å¼•è·¯äººæ˜¯ç¯å¡”ï¼Œè‡ªå·±çš„è·¯è¦é è‡ªå·±çš„è„šèµ°å‡ºæ¥ã€‚&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨harboræ­å»ºç§æœ‰dockerä»“åº“</title>
    <link href="https://www.toimc.com/%E4%BD%BF%E7%94%A8harbor%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%89docker%E4%BB%93%E5%BA%93/"/>
    <id>https://www.toimc.com/%E4%BD%BF%E7%94%A8harbor%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%89docker%E4%BB%93%E5%BA%93/</id>
    <published>2019-04-21T03:17:39.000Z</published>
    <updated>2021-03-12T03:40:01.749Z</updated>
    
    <content type="html"><![CDATA[<p>å°ä¼™ä¼´ä»¬ï¼Œæƒ³ä¸æƒ³è‡ªå·±å»ºç«‹è‡ªå·±çš„ docker ç§åº“ã€‚æœ¬ç¯‡ä»‹ç»äº†ä»€ä¹ˆæ˜¯ Harborï¼Œå¦‚ä½•å®‰è£…ã€‚æ¥ï¼ŒåŠ¨èµ·æ‰‹æ¥ã€‚</p><p>æœ¬ç¯‡ä»‹ç»äº†ä½¿ç”¨å®˜æ–¹åœ¨çº¿/ç¦»çº¿å®‰è£…åŒ…ï¼Œè¿›è¡Œ Harbor çš„å®‰è£…çš„è¿‡ç¨‹ã€‚</p><span id="more"></span><h2 id="ä»€ä¹ˆæ˜¯-Harbor"><a href="#ä»€ä¹ˆæ˜¯-Harbor" class="headerlink" title="ä»€ä¹ˆæ˜¯ Harbor?"></a>ä»€ä¹ˆæ˜¯ Harbor?</h2><blockquote><p>Harborâ€”â€”Manage and serve container images in a secure environment.</p></blockquote><p>è¿™æ˜¯å…³äº Harbor çš„å®˜æ–¹ä»‹ç»ï¼Œç”¨æ¥ç®¡ç†ä¸æœåŠ¡å®¹å™¨ï¼Œè¯´ç™½äº†å°±æ˜¯ç§ä»“ã€‚</p><p>Harbor æ˜¯ä¸€ä¸ªå¼€æºçš„äº‘å®¹å™¨ä»“åº“ï¼Œç”¨äºå­˜å‚¨ã€ç­¾åå’Œæ‰«æå®¹å™¨æ˜ åƒä»¥æŸ¥æ‰¾æ¼æ´ã€‚</p><p>Harbor é€šè¿‡æä¾›ä¿¡ä»»ã€åˆè§„æ€§ã€æ€§èƒ½å’Œäº’æ“ä½œæ€§æ¥è§£å†³å®¹å™¨çš„å…±æ€§é—®é¢˜ã€‚å®ƒå¡«è¡¥äº†æ— æ³•ä½¿ç”¨å…¬æœ‰äº‘ã€åŸºäºäº‘å®¹å™¨æˆ–è€…æ˜¯æƒ³è·å¾—è·¨äº‘çš„ä¸€è‡´ä½“éªŒçš„ä¼ä¸šä»¬å’Œåº”ç”¨ç¨‹åºä¹‹é—´çš„ç©ºç™½ã€‚</p><p>é“¾æ¥ï¼š<a href="https://goharbor.io/">Harbor å®˜ç½‘</a></p><h2 id="å®‰è£…-Harbor"><a href="#å®‰è£…-Harbor" class="headerlink" title="å®‰è£… Harbor"></a>å®‰è£… Harbor</h2><h3 id="å®‰è£…æ–¹æ³•ç®€ä»‹"><a href="#å®‰è£…æ–¹æ³•ç®€ä»‹" class="headerlink" title="å®‰è£…æ–¹æ³•ç®€ä»‹"></a>å®‰è£…æ–¹æ³•ç®€ä»‹</h3><ul><li><p>åœ¨çº¿å®‰è£…æ–¹å¼</p><p>ä¸»è¦æ˜¯ä» Docker Hub ä¸‹è½½ Harbor é•œåƒï¼Œæ‰€ä»¥è¿™ç§å®‰è£…æ–¹å¼ï¼Œå¯¹äºç©ºé—´çš„è¦æ±‚éå¸¸å°ã€‚</p></li><li><p>ç¦»çº¿å®‰è£…æ–¹å¼</p><p>å½“æ²¡æœ‰ç½‘ç»œçš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨è¿™ç§å®‰è£…æ–¹æ³•ï¼Œç¦»çº¿åŒ…é‡Œé¢æœ‰é¢„æ‰“åŒ…çš„å®¹å™¨ï¼Œæ‰€ä»¥æ¯”è¾ƒå¤§ã€‚</p></li><li><p>Kubernetes å®‰è£…æ–¹å¼</p><p>éœ€è¦<strong>Kubernetes v1.6.5</strong> and <strong>Harbor v1.2.0</strong>ï¼Œå‚è€ƒï¼š<a href="https://github.com/goharbor/harbor/blob/master/docs/kubernetes_deployment.md">Integration with Kubernetes</a></p></li></ul><h3 id="ç¡¬ä»¶ç¯å¢ƒ"><a href="#ç¡¬ä»¶ç¯å¢ƒ" class="headerlink" title="ç¡¬ä»¶ç¯å¢ƒ"></a>ç¡¬ä»¶ç¯å¢ƒ</h3><table><thead><tr><th>èµ„æº</th><th>æœ€å°é…ç½®</th><th>æè¿°</th></tr></thead><tbody><tr><td>CPU</td><td>&gt;2 CPU</td><td>4 CPU æœ€å¥½</td></tr><tr><td>Mem(å†…å­˜)</td><td>&gt;4GB</td><td>8GB æœ€å¥½</td></tr><tr><td>Disk(ç¡¬ç›˜)</td><td>&gt;40GB</td><td>160GB æœ€å¥½</td></tr></tbody></table><h3 id="è½¯ä»¶ç¯å¢ƒ"><a href="#è½¯ä»¶ç¯å¢ƒ" class="headerlink" title="è½¯ä»¶ç¯å¢ƒ"></a>è½¯ä»¶ç¯å¢ƒ</h3><table><thead><tr><th>è½¯ä»¶ç¯å¢ƒ</th><th>ç‰ˆæœ¬</th><th>æè¿°</th></tr></thead><tbody><tr><td>Python</td><td>&gt;2.7</td><td>æœ‰ä¸€äº› Linux å‘è¡Œç‰ˆæ˜¯æ²¡æœ‰é»˜è®¤å®‰è£… Python çš„ï¼Œéœ€è¦è‡ªå·±æ‰‹åŠ¨å®‰è£…</td></tr><tr><td>Docker engine</td><td>&gt;1.10</td><td>å®‰è£… Dockerï¼Œè¯·å‚è€ƒæˆ‘ä»¬çš„å¦ä¸€ä¸ªåšæ–‡ï¼š<a href="https://www.toimc.com/docker%E5%85%A5%E9%97%A8%E4%B9%8B%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/">Docker å…¥é—¨ä¹‹å®‰è£…æ•™ç¨‹</a>ï¼›å®˜æ–¹æ•™ç¨‹ï¼š<a href="https://docs.docker.com/engine/installation/">Install Docker CE</a></td></tr><tr><td>Docker Compose</td><td>&gt;1.6.0</td><td>è¯·å‚è€ƒå®‰è£…æ•™ç¨‹ï¼š<a href="https://www.toimc.com/docker%E5%85%A5%E9%97%A8%E4%B9%8B%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/#Docker-compose%E9%9B%86%E5%90%88%E5%91%BD%E4%BB%A4">docker-compose å‘½ä»¤å®‰è£…æ–¹æ³•</a>ï¼›å®˜æ–¹æ•™ç¨‹ï¼š<a href="https://docs.docker.com/compose/install/">Install Docker Compose</a></td></tr><tr><td>Openssl</td><td>lastest</td><td>ç”¨äºäº§ç”Ÿè¯ä¹¦ä¸å¯†é’¥(ä¸€èˆ¬ Linux å‘è¡Œç‰ˆä¼šé»˜è®¤å®‰è£…)</td></tr></tbody></table><h3 id="ç½‘ç»œç«¯å£"><a href="#ç½‘ç»œç«¯å£" class="headerlink" title="ç½‘ç»œç«¯å£"></a>ç½‘ç»œç«¯å£</h3><table><thead><tr><th>ç«¯å£</th><th>åè®®</th><th>æè¿°</th></tr></thead><tbody><tr><td>443</td><td>HTTPS</td><td>Harbor portal å’Œ core API å°†ä¼šä½¿ç”¨ 443 æ¥å£ç”¨äº HTTPS åè®®</td></tr><tr><td>4443</td><td>HTTPS</td><td>å½“ Notray ä½¿ç”¨æ—¶ï¼ŒHarbor ä½¿ç”¨è¿™ä¸ªç«¯å£ç”¨äº Docker ä¸­å¯ä¿¡ä»»å†…å®¹çš„ä¼ è¾“ã€‚</td></tr><tr><td>80</td><td>HTTP</td><td>Harbor portal å’Œ core API å°†ä¼šä½¿ç”¨ 80 æ¥å£ç”¨äº HTTP åè®®</td></tr></tbody></table><h3 id="å®‰è£…æ­¥éª¤"><a href="#å®‰è£…æ­¥éª¤" class="headerlink" title="å®‰è£…æ­¥éª¤"></a>å®‰è£…æ­¥éª¤</h3><ol><li><p>åŸºæœ¬çš„å®‰è£…æ­¥éª¤</p><ul><li>ä¸‹è½½å®‰è£…åŒ…ï¼Œåœ¨<a href="https://github.com/goharbor/harbor/releases">release</a>é¡µé¢è¿›è¡Œä¸‹è½½</li><li>é…ç½®<code>harbor.cfg</code></li><li>è¿è¡Œ<code>install.sh</code></li></ul></li><li><p>ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡Œè§£å‹</p><p>Online installer:</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tar xvf harbor-online-installer-&lt;<span class="keyword">version</span>&gt;<span class="string">.tgz</span></span><br></pre></td></tr></table></figure><p>Offline installer:</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tar xvf harbor-offline-installer-&lt;<span class="keyword">version</span>&gt;<span class="string">.tgz</span></span><br></pre></td></tr></table></figure></li><li><p>é…ç½® Harbor</p><ul><li>Required parameters</li><li>Optional parameters</li></ul></li></ol><p><strong>å…¶ä¸­ï¼ŒRequired parameters æœ‰ï¼š</strong></p><ul><li><p>hostnameï¼šä½¿ç”¨ ip æˆ–è€…åŸŸåï¼Œåˆ‡å¿Œä½¿ç”¨<code>localhost</code>æˆ–è€…<code>127.0.0.1</code></p></li><li><p>ui_url_protocolï¼šé»˜è®¤ä¸º<code>http</code>åè®®ï¼ˆå¯é€‰<code>https</code>æˆ–è€…<code>http</code>ï¼‰ï¼Œå¦‚æœéœ€è¦é…ç½®<code>SSL</code>è¯ä¹¦ï¼Œè¯·å‚è€ƒ<a href="https://github.com/goharbor/harbor/blob/master/docs/configure_https.md">HTTPS é…ç½®</a></p></li><li><p>db_passwordï¼šæ•°æ®åº“ PostgreSQL çš„ root å¯†ç </p></li><li><p>max_job_workersï¼šé»˜è®¤ä¸º<code>10</code>ï¼Œæ ¹æ®ç°æœ‰çš„ä»»åŠ¡æ•°é‡éœ€è¦è¿›è¡Œæ›´æ”¹ï¼Œæ¯ä¸ªä»»åŠ¡ä¼šå ç”¨<code>network/CPU/IO</code>èµ„æºï¼Œæ‰€ä»¥åˆ†é…äº†ä¹‹åæ³¨æ„è§‚å¯Ÿã€‚</p></li><li><p>customize_crtï¼šé»˜è®¤ä¸º<code>on</code>ï¼Œå¯ä»¥è®¾ç½®æˆ<code>off</code>ã€‚harbor ä¼šè‡ªåŠ¨ç”Ÿæˆè¯ä¹¦ä¸å¯†é’¥å¯¹ï¼Œå¦‚æœéœ€è¦è‡ªå·±ç”Ÿæˆï¼Œè¯·å‚è€ƒï¼š<a href="https://github.com/goharbor/harbor/blob/master/docs/customize_token_service.md">Customize Harbor token service with your key and certificate</a></p></li><li><p>ssl_certï¼šSSL è¯ä¹¦è·¯å¾„ï¼Œåªæœ‰å½“è®¾ç½®æˆ https ç”Ÿæ•ˆã€‚</p></li><li><p>ssl_cert_keyï¼šSSL å¯†é’¥ï¼ŒåŒä¸Šã€‚</p></li><li><p>secretkey_pathï¼šç”¨äºåŠ å¯†æˆ–è€…è§£å¯†è¿œç¨‹ä»“åº“çš„å¯†é’¥è·¯å¾„(å»è®¿é—®å…¶ä»–ä»“åº“ä½¿ç”¨çš„å¯†é’¥)</p></li><li><p>log_rotate_countï¼šå¦‚æœè®¾ç½®æˆ<code>0</code>ï¼Œåˆ™è€æ—§çš„æ—¥å¿—æ–‡ä»¶å°±ä¼šè¢«æ¸…é™¤æ‰ï¼Œè€Œä¸æ˜¯è¿›è¡Œæ»šåŠ¨å¢åŠ ã€‚</p></li><li><p>log_rotate_sizeï¼šæ»šåŠ¨æ—¥å¿—çš„å¤§å°ï¼Œé»˜è®¤å•ä½æ˜¯<code>kb</code>ï¼Œå¯ä»¥è®¾ç½®æˆ<code>100M</code>æˆ–è€…æ˜¯<code>100G</code></p></li><li><p>http_proxyï¼šhttp ä»£ç†è·¯å¾„</p></li><li><p>https_proxyï¼šhttps ä»£ç†</p></li><li><p>no_proxyï¼šä¸éœ€è¦ä»£ç†çš„åœ°å€æˆ–è€…åŸŸåï¼Œå¦‚ï¼š<code>127.0.0.1</code></p></li></ul><blockquote><p>ä½¿ç”¨<code>vi</code>å‘½ä»¤å¯¹<code>harbor.cfg</code>æ–‡ä»¶è¿›è¡Œç¼–è¾‘</p></blockquote><p><strong>å…¶ä¸­ï¼ŒOptional parameters æœ‰ï¼š</strong></p><ul><li><p>Email settings</p><p>å‚è€ƒå¦‚ä¸‹é…ç½®ï¼š</p><ul><li>email_server = smtp.mydomain.com</li><li>email_server_port = 25</li><li>email_identity =</li><li>email_username = <a href="mailto:sample_admin@mydomain.com">sample_admin@mydomain.com</a></li><li>email_password = abc</li><li>email_from = admin <a href="mailto:sample_admin@mydomain.com">sample_admin@mydomain.com</a></li><li>email_ssl = false</li><li>email_insecure = false</li></ul></li><li><p>harbor_admin_passwordï¼šç®¡ç†å‘˜å¯†ç </p></li><li><p>auth_modeï¼šé»˜è®¤æ˜¯<code>db_auth</code>ï¼Œå¯é€‰<code>ldap_auth</code>æˆ–è€…<code>db_auth</code></p><blockquote><p>é‡è¦æç¤ºï¼šå½“ä»å·²æœ‰çš„ Harbor è¿›è¡Œå‡çº§æ—¶ï¼Œè¦ç¡®ä¿<code>auth_mode</code>ä¸<code>harbor.cfg</code>ä¸­çš„é…ç½®æ˜¯ä¸€æ ·çš„ã€‚</p></blockquote></li><li><p>ldap_urlï¼šLDAP å…¥å£åœ°å€ï¼še.g.<code>ldaps://ldap.mydomain.com</code>ï¼Œåªæœ‰<code>ldap_auth</code>æ¨¡å¼ä¸‹æ‰æœ‰æ•ˆ</p></li><li><p>ldap_searchdnï¼šDN ç”¨æˆ·ï¼Œe.g. <code>uid=admin,ou=people,dc=mydomain,dc=com</code></p></li><li><p>ldap_search_pwdï¼šæœç´¢ç”¨æˆ·çš„å¯†ç </p></li><li><p>ldap_basednï¼šåŸºç¡€ç”¨æˆ·ï¼Œe.g. <code>ou=people,dc=mydomain,dc=com</code></p></li><li><p>ldap_filterï¼šæœç´¢è¿‡æ»¤ï¼Œe.g. <code>(objectClass=person)</code></p></li><li><p>ldap_uidï¼šç”¨äºåœ¨æœç´¢çš„æ—¶å€™ï¼Œå¯¹ç”¨äºè¿›è¡ŒåŒ¹é…ï¼šå¯ä»¥æ˜¯ uid, cn, email æˆ–è€…æ˜¯å…¶ä»–å±æ€§ã€‚</p></li><li><p>ldap_scopeï¼šæœç´¢çš„èŒƒå›´ï¼š0-LDAP_SCOPE_BASE, 1-LDAP_SCOPE_ONELEVEL, 2-LDAP_SCOPE_SUBTREE. é»˜è®¤æ˜¯ 2.</p></li><li><p>ldap_timeoutï¼šè¶…æ—¶æ—¶é•¿ï¼Œé»˜è®¤æ˜¯ 5.</p></li><li><p>ldap_verify_certï¼šæ˜¯å¦ä» LDAP æœåŠ¡å™¨è¿›è¡Œè®¤è¯ï¼Œé»˜è®¤æ˜¯ true.</p></li><li><p>ldap_group_basednï¼šåŸºç¡€çš„æœç´¢ç»„ï¼Œ e.g. <code>ou=group,dc=mydomain,dc=com</code></p></li><li><p>ldap_group_filterï¼šç»„è¿‡æ»¤</p></li><li><p>ldap_group_gidï¼šç»„å±æ€§ï¼Œå¦‚ cn, name</p></li><li><p>ldap_group_scopeï¼šæœç´¢çš„èŒƒå›´ï¼š0-LDAP_SCOPE_BASE, 1-LDAP_SCOPE_ONELEVEL, 2-LDAP_SCOPE_SUBTREE.é»˜è®¤æ˜¯ 2.</p></li><li><p>self_registrationï¼š (<strong>on</strong> or <strong>off</strong>. Default is <strong>on</strong>) æ˜¯å¦å…è®¸è‡ªæ³¨å†Œï¼Œä¸€èˆ¬æ¥è¯´<code>auth_mode</code>è¢«è®¾ç½®æˆ<code>ldap_auth</code>æ¨¡å¼çš„æ—¶å€™ï¼Œè‡ªæ³¨å†Œæ˜¯è¢«å…³é—­çš„ã€‚</p></li><li><p>token_expirationï¼šé»˜è®¤çš„ token è¿‡æœŸæ—¶é•¿ï¼Œé»˜è®¤ 30 åˆ†é’Ÿã€‚</p></li><li><p>project_creation_restrictionï¼šè®¾ç½®å“ªäº›ç”¨æˆ·å¯ä»¥åˆ›å»ºé¡¹ç›®ï¼Œé»˜è®¤æ˜¯å…è®¸æ‰€æœ‰çš„ç”¨æˆ·è¿›è¡Œåˆ›å»ºï¼Œå½“è®¾ç½®æˆ<code>adminonly</code>æ—¶ï¼Œåªå…è®¸ç®¡ç†å‘˜è¿›è¡Œåˆ›å»ºã€‚</p></li></ul><p>ä»¥ä¸‹æ˜¯ç¤ºä¾‹é…ç½®ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># Configuration file of Harbor</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># Configuration file of Harbor</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">This attribute is <span class="keyword">for</span> migrator to detect the version of the .cfg file, DO NOT MODIFY!</span></span><br><span class="line">_version = 1.5.0</span><br><span class="line"><span class="meta">#</span><span class="bash">The IP address or hostname to access admin UI and registry service.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">DO NOT use localhost or 127.0.0.1, because Harbor needs to be accessed by external clients.</span></span><br><span class="line">hostname = test.wayearn.cn</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">The protocol <span class="keyword">for</span> accessing the UI and token/notification service, by default it is http.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">It can be <span class="built_in">set</span> to https <span class="keyword">if</span> ssl is enabled on nginx.</span></span><br><span class="line">ui_url_protocol = https</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">Maximum number of job workers <span class="keyword">in</span> job service</span></span><br><span class="line">max_job_workers = 50</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">Determine whether or not to generate certificate <span class="keyword">for</span> the registry<span class="string">&#x27;s token.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">If the value is on, the prepare script creates new root cert and private key</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="keyword">for</span> generating token to access the registry. If the value is off the default key/cert will be used.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">This flag also controls the creation of the notary signer<span class="string">&#x27;s cert.</span></span></span><br><span class="line">customize_crt = off</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">The path of cert and key files <span class="keyword">for</span> nginx, they are applied only the protocol is <span class="built_in">set</span> to https</span></span><br><span class="line">ssl_cert = /home/ssh/fullchain.cer</span><br><span class="line">ssl_cert_key = /home/ssh/wayearn.cn.key</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">The path of secretkey storage</span></span><br><span class="line">secretkey_path = /data</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">Admiral<span class="string">&#x27;s url, comment this attribute, or set its value to NA when Harbor is standalone</span></span></span><br><span class="line">admiral_url = NA</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">Log files are rotated log_rotate_count <span class="built_in">times</span> before being removed. If count is 0, old versions are removed rather than rotated.</span></span><br><span class="line">log_rotate_count = 50</span><br><span class="line"><span class="meta">#</span><span class="bash">Log files are rotated only <span class="keyword">if</span> they grow bigger than log_rotate_size bytes. If size is followed by k, the size is assumed to be <span class="keyword">in</span> kilobytes.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">If the M is used, the size is <span class="keyword">in</span> megabytes, and <span class="keyword">if</span> G is used, the size is <span class="keyword">in</span> gigabytes. So size 100, size 100k, size 100M and size 100G</span></span><br><span class="line"><span class="meta">#</span><span class="bash">are all valid.</span></span><br><span class="line">log_rotate_size = 200M</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">Config http proxy <span class="keyword">for</span> Clair, e.g. http://my.proxy.com:3128</span></span><br><span class="line"><span class="meta">#</span><span class="bash">Clair doesn<span class="string">&#x27;t need to connect to harbor ui container via http proxy.</span></span></span><br><span class="line">http_proxy = socks5://192.168.4.250:2080</span><br><span class="line">https_proxy = socks5://192.168.4.250:2080</span><br><span class="line">no_proxy = 127.0.0.1,localhost,ui</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">NOTES: The properties between BEGIN INITIAL PROPERTIES and END INITIAL PROPERTIES</span></span><br><span class="line"><span class="meta">#</span><span class="bash">only take effect <span class="keyword">in</span> the first boot, the subsequent changes of these properties</span></span><br><span class="line"><span class="meta">#</span><span class="bash">should be performed on web ui</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">************************BEGIN INITIAL PROPERTIES************************</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">Email account settings <span class="keyword">for</span> sending out password resetting emails.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">Email server uses the given username and password to authenticate on TLS connections to host and act as identity.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">Identity left blank to act as username.</span></span><br><span class="line">email_identity =</span><br><span class="line"></span><br><span class="line">email_server = email-smtp.us-east-1.amazonaws.com</span><br><span class="line">email_server_port = 587</span><br><span class="line">email_username = AKIAJ3A3D3R5NMUUEBJA</span><br><span class="line">email_password = Amz5jvLaeq13VLk5j4QtmTRJhZ/AnxEnmuHUB4DsQ+op</span><br><span class="line">email_from = liwei &lt;admin@wayearn.com&gt;</span><br><span class="line">email_ssl = true</span><br><span class="line">email_insecure = false</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#The initial password of Harbor admin, only works for the first time when Harbor starts.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">It has no effect after the first launch of Harbor.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">Change the admin password from UI after launching Harbor.</span></span><br><span class="line">harbor_admin_password = 2239hOb2tVgOSwoW123FDs23vs324hmuy7667ghfbv32FGDS43</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#By default the auth mode is db_auth, i.e. the credentials are stored in a local database.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">Set it to ldap_auth <span class="keyword">if</span> you want to verify a user<span class="string">&#x27;s credentials against an LDAP server.</span></span></span><br><span class="line">auth_mode = db_auth</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">The url <span class="keyword">for</span> an ldap endpoint.</span></span><br><span class="line">ldap_url = ldaps://ldap.mydomain.com</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">A user<span class="string">&#x27;s DN who has the permission to search the LDAP/AD server.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">If your LDAP/AD server does not support anonymous search, you should configure this DN and ldap_search_pwd.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">ldap_searchdn = uid=searchuser,ou=people,dc=mydomain,dc=com</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">the password of the ldap_searchdn</span></span><br><span class="line"><span class="meta">#</span><span class="bash">ldap_search_pwd = password</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">The base DN from <span class="built_in">which</span> to look up a user <span class="keyword">in</span> LDAP/AD</span></span><br><span class="line">ldap_basedn = ou=people,dc=mydomain,dc=com</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">Search filter <span class="keyword">for</span> LDAP/AD, make sure the syntax of the filter is correct.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">ldap_filter = (objectClass=person)</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> The attribute used <span class="keyword">in</span> a search to match a user, it could be uid, cn, email, sAMAccountName or other attributes depending on your LDAP/AD</span></span><br><span class="line">ldap_uid = uid</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">the scope to search <span class="keyword">for</span> users, 0-LDAP_SCOPE_BASE, 1-LDAP_SCOPE_ONELEVEL, 2-LDAP_SCOPE_SUBTREE</span></span><br><span class="line">ldap_scope = 2</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">Timeout (<span class="keyword">in</span> seconds)  when connecting to an LDAP Server. The default value (and most reasonable) is 5 seconds.</span></span><br><span class="line">ldap_timeout = 5</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">Verify certificate from LDAP server</span></span><br><span class="line">ldap_verify_cert = true</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">The base dn from <span class="built_in">which</span> to lookup a group <span class="keyword">in</span> LDAP/AD</span></span><br><span class="line">ldap_group_basedn = ou=group,dc=mydomain,dc=com</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">filter to search LDAP/AD group</span></span><br><span class="line">ldap_group_filter = objectclass=group</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">The attribute used to name a LDAP/AD group, it could be cn, name</span></span><br><span class="line">ldap_group_gid = cn</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">The scope to search <span class="keyword">for</span> ldap groups. 0-LDAP_SCOPE_BASE, 1-LDAP_SCOPE_ONELEVEL, 2-LDAP_SCOPE_SUBTREE</span></span><br><span class="line">ldap_group_scope = 2</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">Turn on or off the self-registration feature</span></span><br><span class="line">self_registration = on</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">The expiration time (<span class="keyword">in</span> minute) of token created by token service, default is 30 minutes</span></span><br><span class="line">token_expiration = 30</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">The flag to control what users have permission to create projects</span></span><br><span class="line"><span class="meta">#</span><span class="bash">The default value <span class="string">&quot;everyone&quot;</span> allows everyone to creates a project.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">Set to <span class="string">&quot;adminonly&quot;</span> so that only admin user can create project.</span></span><br><span class="line">project_creation_restriction = everyone</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">************************END INITIAL PROPERTIES************************</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##### #Harbor DB configuration section#######</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> The address of the Harbor database. Only need to change when using external db.</span></span><br><span class="line"></span><br><span class="line">db_host = mysql</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> The password <span class="keyword">for</span> the root user of Harbor DB. Change this before any production use.</span></span><br><span class="line"></span><br><span class="line">db_password = root123</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> The port of Harbor database host</span></span><br><span class="line"></span><br><span class="line">db_port = 3306</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> The user name of Harbor database</span></span><br><span class="line"></span><br><span class="line">db_user = root</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#### End of Harbor DB configuration#######</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> The redis server address. Only needed <span class="keyword">in</span> HA installation.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> address:port[,weight,password,db_index]</span></span><br><span class="line"></span><br><span class="line">redis_url = redis:6379</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##### ####Clair DB configuration############</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Clair DB host address. Only change it when using an exteral DB.</span></span><br><span class="line"></span><br><span class="line">clair_db_host = postgres</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> The password of the Clair<span class="string">&#x27;s postgres database. Only effective when Harbor is deployed with Clair.</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Please update it before deployment. Subsequent update will cause Clair<span class="string">&#x27;s API server and Harbor unable to access Clair&#x27;</span>s database.</span></span><br><span class="line"></span><br><span class="line">clair_db_password = password</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Clair DB connect port</span></span><br><span class="line"></span><br><span class="line">clair_db_port = 5432</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Clair DB username</span></span><br><span class="line"></span><br><span class="line">clair_db_username = postgres</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Clair default database</span></span><br><span class="line"></span><br><span class="line">clair_db = postgres</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##### ####End of Clair DB configuration############</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> The following attributes only need to be <span class="built_in">set</span> when auth mode is uaa_auth</span></span><br><span class="line"></span><br><span class="line">uaa_endpoint = uaa.mydomain.org</span><br><span class="line">uaa_clientid = id</span><br><span class="line">uaa_clientsecret = secret</span><br><span class="line">uaa_verify_cert = true</span><br><span class="line">uaa_ca_cert = /path/to/ca.pem</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## Docker Registry setting</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> registry_storage_provider can be: filesystem, s3, gcs, azure, etc.</span></span><br><span class="line"></span><br><span class="line">registry_storage_provider_name = filesystem</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> registry_storage_provider_config is a comma separated <span class="string">&quot;key: value&quot;</span> pairs, e.g. <span class="string">&quot;key1: value, key2: value2&quot;</span>.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Refer to https://docs.docker.com/registry/configuration/<span class="comment">#storage for all available configuration.</span></span></span><br><span class="line"></span><br><span class="line">registry_storage_provider_config =</span><br></pre></td></tr></table></figure><ol start="4"><li><p>é…ç½®å®Œæˆä¹‹åï¼Œåœ¨å½“å‰çš„è§£å‹ç¼©çš„ç›®å½•ä¸‹ï¼Œè¿è¡Œ<code>sudo ./install.sh</code></p><p>æ˜¯å¦å¯ä»¥åœ¨è§£å‹ç¼©çš„ç›®å½•ä¸‹æ‰¾åˆ°ç›¸åº”çš„æ–‡ä»¶<code>install.sh</code>ï¼Ÿå¦‚æœæ‰¾ä¸åˆ°ï¼Œå¯ä»¥ä½¿ç”¨<code>find</code>å‘½ä»¤æˆ–è€…æ˜¯<code>ls</code>å‘½ä»¤ã€‚</p><p>å®‰è£…å®Œæˆä¹‹åï¼Œå°±å¯ä»¥è®¿é—®ä¹‹å‰è®¾ç½®çš„åŸŸåæˆ–è€… IP åœ°å€äº†ï¼Œæ¯”å¦‚ä¸Šä¾‹ä¸­çš„<code>test.toimc.com</code></p></li></ol><h3 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h3><ol><li><p>å¦‚ä½•æ¨é€é•œåƒï¼Ÿ</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker login test.toimc.com</span><br><span class="line">docker <span class="keyword">push</span> test.toimc.com<span class="regexp">/myproject/my</span>repo:mytag</span><br></pre></td></tr></table></figure></li><li><p>å¦‚ä½•ç”³è¯·è¯ä¹¦ï¼Œå¦‚ä½•è®¾ç½® SSLï¼Ÿ</p><p>æœ‰ä¸¤ä¸ªå…ˆå†³æ¡ä»¶ï¼š(1)éœ€è¦æœ‰ä¸€ä¸ªåŸŸåï¼› (2)ä½¿ç”¨ acme æˆ–è€… caddy è¿™ç§æœåŠ¡è¿›è¡Œç”³è¯·è¯ä¹¦ã€‚</p></li><li><p>å®‰è£… Notary, å®‰è£… Clair, å®‰è£… chart repository service</p><p>å®‰è£… Notaryï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š<code>sudo ./install.sh --with-notary</code></p><p>å®‰è£… Clairï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š<code>sudo ./install.sh --with-clair</code></p><p>å®‰è£… Chart repository serviceï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š<code>sudo ./install.sh --with-chartmuseum</code></p><p>PSï¼š å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š<code>sudo ./install.sh --with-notary --with-clair --with-chartmuseum</code></p></li><li><p>Harbor ç”Ÿå‘½å‘¨æœŸçš„ç®¡ç†ï¼š</p><p>ç›´æ¥ä½¿ç”¨<code>docker-compose</code>ç®¡ç†å‘½ä»¤è¿›è¡Œç®¡ç†(PS:éœ€è¦<code>cd</code>åˆ°ä¹‹å‰çš„ Harbor çš„è§£å‹ç›®å½•ï¼Œå³<code>install</code>ç›®å½•)</p><p>åœæ­¢ Harbor:</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">$</span> sudo docker-compose stop</span><br><span class="line"><span class="function"><span class="title">Stopping</span></span> nginx              ... done</span><br><span class="line"><span class="function"><span class="title">Stopping</span></span> harbor-portal      ... done</span><br><span class="line"><span class="function"><span class="title">Stopping</span></span> harbor-jobservice  ... done</span><br><span class="line"><span class="function"><span class="title">Stopping</span></span> harbor-core        ... done</span><br><span class="line"><span class="function"><span class="title">Stopping</span></span> registry           ... done</span><br><span class="line"><span class="function"><span class="title">Stopping</span></span> redis              ... done</span><br><span class="line"><span class="function"><span class="title">Stopping</span></span> registryctl        ... done</span><br><span class="line"><span class="function"><span class="title">Stopping</span></span> harbor-db          ... done</span><br><span class="line"><span class="function"><span class="title">Stopping</span></span> harbor-<span class="built_in">log</span>         ... done</span><br></pre></td></tr></table></figure><p>é‡å¯ Harborï¼š</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">$</span> sudo docker-compose start</span><br><span class="line"><span class="function"><span class="title">Starting</span></span> <span class="built_in">log</span>         ... done</span><br><span class="line"><span class="function"><span class="title">Starting</span></span> registry    ... done</span><br><span class="line"><span class="function"><span class="title">Starting</span></span> registryctl ... done</span><br><span class="line"><span class="function"><span class="title">Starting</span></span> postgresql  ... done</span><br><span class="line"><span class="function"><span class="title">Starting</span></span> core        ... done</span><br><span class="line"><span class="function"><span class="title">Starting</span></span> portal      ... done</span><br><span class="line"><span class="function"><span class="title">Starting</span></span> redis       ... done</span><br><span class="line"><span class="function"><span class="title">Starting</span></span> jobservice  ... done</span><br><span class="line"><span class="function"><span class="title">Starting</span></span> proxy       ... done</span><br></pre></td></tr></table></figure><p>å½“ä¿®æ”¹äº† Harbor çš„é…ç½®æ–‡ä»¶åï¼Œéœ€è¦ä½¿ç”¨å¦‚ä¸‹çš„æ–¹å¼æ›´æ–°é•œåƒï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>sudo docker-compose down -v</span><br><span class="line"><span class="variable">$ </span>vim harbor.cfg</span><br><span class="line"><span class="variable">$ </span>sudo prepare</span><br><span class="line"><span class="variable">$ </span>sudo docker-compose up -d</span><br></pre></td></tr></table></figure><p>åˆ é™¤ Harbor é•œåƒï¼Œä½†æ˜¯ä¿ç•™æ–‡ä»¶ç³»ç»Ÿçš„åšæ³•ï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>sudo docker-compose down -v</span><br></pre></td></tr></table></figure><p>éœ€è¦å…¨éƒ¨åˆ é™¤æ—¶(åŒ…æ‹¬é•œåƒã€æ–‡ä»¶ã€ä»“åº“)â€”â€”é‡è£…éœ€è¦/å¸è½½éœ€è¦</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">rm</span> <span class="literal">-r</span> /<span class="keyword">data</span>/database</span><br><span class="line"><span class="variable">$</span> <span class="built_in">rm</span> <span class="literal">-r</span> /<span class="keyword">data</span>/registry</span><br></pre></td></tr></table></figure></li><li><p>æ—¥å¿—æ–‡ä»¶è·¯å¾„ï¼š<code>/var/log/harbor</code></p></li><li><p>è‡ªå®šä¹‰ç«¯å£ï¼š</p><ul><li>ä¿®æ”¹<code>docker-compose.yml</code><br>ä¿®æ”¹â€80â€ç«¯å£åˆ°ä¸€ä¸ªæŒ‡å®šçš„ç”¨æˆ·ç«¯å£, e.g. 8888:80.</li></ul><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">proxy:</span></span><br><span class="line"><span class="symbol">    image:</span> goharbor/nginx-photon:v1<span class="number">.6</span><span class="number">.0</span></span><br><span class="line"><span class="symbol">    container_name:</span> nginx</span><br><span class="line"><span class="symbol">    restart:</span> always</span><br><span class="line"><span class="symbol">    volumes:</span></span><br><span class="line">      - .<span class="meta-keyword">/common/</span>config/nginx:<span class="meta-keyword">/etc/</span>nginx:z</span><br><span class="line"><span class="symbol">    ports:</span></span><br><span class="line">      - <span class="number">8888</span>:<span class="number">80</span></span><br><span class="line">      - <span class="number">443</span>:<span class="number">443</span></span><br><span class="line"><span class="symbol">    depends_on:</span></span><br><span class="line">      - postgresql</span><br><span class="line">      - registry</span><br><span class="line">      - core</span><br><span class="line">      - portal</span><br><span class="line">      - log</span><br><span class="line"><span class="symbol">    logging:</span></span><br><span class="line"><span class="symbol">      driver:</span> <span class="string">&quot;syslog&quot;</span></span><br><span class="line"><span class="symbol">      options:</span></span><br><span class="line">        syslog-address: <span class="string">&quot;tcp://127.0.0.1:1514&quot;</span></span><br><span class="line"><span class="symbol">        tag:</span> <span class="string">&quot;proxy&quot;</span></span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹<code>harbor.cfg</code>æ–‡ä»¶ä¸­çš„ hostname å±æ€§ï¼š</li></ul><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">hostname</span> = <span class="number">192.168</span>.<span class="number">0.2</span>:<span class="number">8888</span></span><br></pre></td></tr></table></figure><ul><li>å‚è€ƒä¸Šé¢çš„ç®¡ç† harbor çš„ç”Ÿå‘½å‘¨æœŸçš„å†…å®¹ï¼Œå¯¹ Harbor è¿›è¡Œæ›´æ–°ã€‚</li></ul><p><strong>åŒç†ï¼Œå¯¹äº HTTPS åè®®ï¼Œå‚è€ƒï¼š</strong></p><ul><li>æ‰“å¼€ HTTPS åè®®ï¼Œå¹¶é…ç½® SSL è¯ä¹¦ï¼šå‚è€ƒ<a href="https://github.com/goharbor/harbor/blob/master/docs/configure_https.md">guide</a>.</li><li>ä¿®æ”¹<code>docker-compose.yml</code><br>ä¿®æ”¹â€443â€ ç«¯å£ä¸ºç”¨æˆ·è‡ªå®šä¹‰ç«¯å£, e.g. 8888:443.</li></ul><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">proxy:</span></span><br><span class="line"><span class="symbol">    image:</span> goharbor/nginx-photon:v1<span class="number">.6</span><span class="number">.0</span></span><br><span class="line"><span class="symbol">    container_name:</span> nginx</span><br><span class="line"><span class="symbol">    restart:</span> always</span><br><span class="line"><span class="symbol">    volumes:</span></span><br><span class="line">      - .<span class="meta-keyword">/common/</span>config/nginx:<span class="meta-keyword">/etc/</span>nginx:z</span><br><span class="line"><span class="symbol">    ports:</span></span><br><span class="line">      - <span class="number">80</span>:<span class="number">80</span></span><br><span class="line">      - <span class="number">8888</span>:<span class="number">443</span></span><br><span class="line"><span class="symbol">    depends_on:</span></span><br><span class="line">      - postgresql</span><br><span class="line">      - registry</span><br><span class="line">      - core</span><br><span class="line">      - portal</span><br><span class="line">      - log</span><br><span class="line"><span class="symbol">    logging:</span></span><br><span class="line"><span class="symbol">      driver:</span> <span class="string">&quot;syslog&quot;</span></span><br><span class="line"><span class="symbol">      options:</span></span><br><span class="line">        syslog-address: <span class="string">&quot;tcp://127.0.0.1:1514&quot;</span></span><br><span class="line"><span class="symbol">        tag:</span> <span class="string">&quot;proxy&quot;</span></span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹<code>harbor.cfg</code>æ–‡ä»¶ä¸­çš„ hostname å±æ€§ï¼š</li></ul><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">hostname</span> = <span class="number">192.168</span>.<span class="number">0.2</span>:<span class="number">8888</span></span><br></pre></td></tr></table></figure><ul><li>å‚è€ƒä¸Šé¢çš„ç®¡ç† harbor çš„ç”Ÿå‘½å‘¨æœŸçš„å†…å®¹ï¼Œå¯¹ Harbor è¿›è¡Œæ›´æ–°ã€‚</li></ul></li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;å°ä¼™ä¼´ä»¬ï¼Œæƒ³ä¸æƒ³è‡ªå·±å»ºç«‹è‡ªå·±çš„ docker ç§åº“ã€‚æœ¬ç¯‡ä»‹ç»äº†ä»€ä¹ˆæ˜¯ Harborï¼Œå¦‚ä½•å®‰è£…ã€‚æ¥ï¼ŒåŠ¨èµ·æ‰‹æ¥ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬ç¯‡ä»‹ç»äº†ä½¿ç”¨å®˜æ–¹åœ¨çº¿/ç¦»çº¿å®‰è£…åŒ…ï¼Œè¿›è¡Œ Harbor çš„å®‰è£…çš„è¿‡ç¨‹ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="Docker" scheme="https://www.toimc.com/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>æ…•è¯¾ç½‘ã€Šå‰ç«¯è·³æ§½é¢è¯•å¿…å¤‡æŠ€å·§ã€‹â€”â€”æ€»ç»“</title>
    <link href="https://www.toimc.com/%E6%85%95%E8%AF%BE%E7%BD%91%E3%80%8A%E5%89%8D%E7%AB%AF%E8%B7%B3%E6%A7%BD%E9%9D%A2%E8%AF%95%E5%BF%85%E5%A4%87%E6%8A%80%E5%B7%A7%E3%80%8B%E2%80%94%E2%80%94%E6%80%BB%E7%BB%93/"/>
    <id>https://www.toimc.com/%E6%85%95%E8%AF%BE%E7%BD%91%E3%80%8A%E5%89%8D%E7%AB%AF%E8%B7%B3%E6%A7%BD%E9%9D%A2%E8%AF%95%E5%BF%85%E5%A4%87%E6%8A%80%E5%B7%A7%E3%80%8B%E2%80%94%E2%80%94%E6%80%BB%E7%BB%93/</id>
    <published>2019-04-06T15:20:06.000Z</published>
    <updated>2019-04-07T01:27:03.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬ç¯‡ä»‹ç»çš„æ˜¯è¯¾ç¨‹æ€»ç»“çš„å†…å®¹ã€‚åŸè¯¾ç¨‹é“¾æ¥ï¼š<a href="https://coding.imooc.com/class/129.html">å‰ç«¯è·³æ§½é¢è¯•å¿…å¤‡æŠ€å·§</a></p><span id="more"></span><ul><li><p>JDæè¿°</p><p>å¯¹äºç¤¾æ‹›ä¸€å®šè¦çœ‹ï¼Œå¯¹äºæ ¡æ‹›å¯ä»¥å¿½ç•¥</p></li><li><p>ç®€å†</p><p>å¯¹ç…§JDæ”¹å†™å‡ºç›¸å»åˆçš„ç®€å†ï¼Œå¯¹äºæœªæŒæ¡çš„æŠ€æœ¯æ ˆå¿«é€Ÿå¤ä¹ ã€ç†è§£</p></li><li><p>è‡ªæˆ‘ä»‹ç»</p><p>ä¸€å®šè¦æ‰“è‰ç¨¿ï¼Œå±•ç¤ºä»€ä¹ˆä¼˜åŠ¿ã€æè¿°ä»€ä¹ˆé¡¹ç›®ï¼Œåˆ‡å¿Œä¸´åœºå‘æŒ¥</p></li><li><p>ä¸€é¢</p><p>é‡åŸºç¡€ã€æ‡‚åŸç†ï¼Œè¦æ€è€ƒã€çŸ¥è¿›é€€ã€åŠ¿ä¸å¯æŒ¡</p></li><li><p>äºŒé¢</p><p>æ¨ªå‘æ‰©å±•ã€é¡¹ç›®ç»“åˆï¼Œåšåˆ°æœ‰çš„æ”¾çŸ¢</p></li><li><p>ä¸‰é¢</p><p>æœ‰ç»éªŒã€æ‡‚åˆä½œã€æœ‰æ‹…å½“ã€æ‡‚è§„çŸ©ã€å¯Ÿè¨€è§‚è‰²</p></li><li><p>ç»ˆé¢</p><p>ä¼šæ²Ÿé€šã€è¦ä¸Šè¿›ã€å¥½æ€§æ ¼ã€æœ‰ä¸»è§ã€å¼ºé€»è¾‘ã€æ— å¯æŒ‘å‰”</p></li><li><p>å¤ç›˜</p><p>èƒœä¸éª„ã€è´¥ä¸é¦ã€æ€»ç»“ç»éªŒã€æ­¥æ­¥ä¸ºè¥ã€å¤šæ‹¿å‡ ä¸ªOffer</p></li></ul><p>ç›¸å…³èµ„æ–™ï¼š</p><p>åŸºç¡€çŸ¥è¯†ï¼š<a href="http://www.w3school.com.cn/">http://www.w3school.com.cn</a></p><p>ç®—æ³•é¢˜ï¼š<a href="https://leetcode.com/preblemset/algorithms">https://leetcode.com/preblemset/algorithms</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ¬ç¯‡ä»‹ç»çš„æ˜¯è¯¾ç¨‹æ€»ç»“çš„å†…å®¹ã€‚åŸè¯¾ç¨‹é“¾æ¥ï¼š&lt;a href=&quot;https://coding.imooc.com/class/129.html&quot;&gt;å‰ç«¯è·³æ§½é¢è¯•å¿…å¤‡æŠ€å·§&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="å‰ç«¯è·³æ§½é¢è¯•å¿…å¤‡æŠ€å·§" scheme="https://www.toimc.com/categories/%E5%89%8D%E7%AB%AF%E8%B7%B3%E6%A7%BD%E9%9D%A2%E8%AF%95%E5%BF%85%E5%A4%87%E6%8A%80%E5%B7%A7/"/>
    
    
    <category term="å‰ç«¯é¢è¯•" scheme="https://www.toimc.com/tags/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/"/>
    
    <category term="æŠ€å·§æ€»ç»“" scheme="https://www.toimc.com/tags/%E6%8A%80%E5%B7%A7%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>æ…•è¯¾ç½‘ã€Šå‰ç«¯è·³æ§½é¢è¯•å¿…å¤‡æŠ€å·§ã€‹â€”â€”ç»ˆé¢/HRé¢</title>
    <link href="https://www.toimc.com/%E6%85%95%E8%AF%BE%E7%BD%91%E3%80%8A%E5%89%8D%E7%AB%AF%E8%B7%B3%E6%A7%BD%E9%9D%A2%E8%AF%95%E5%BF%85%E5%A4%87%E6%8A%80%E5%B7%A7%E3%80%8B%E2%80%94%E2%80%94%E7%BB%88%E9%9D%A2-HR%E9%9D%A2/"/>
    <id>https://www.toimc.com/%E6%85%95%E8%AF%BE%E7%BD%91%E3%80%8A%E5%89%8D%E7%AB%AF%E8%B7%B3%E6%A7%BD%E9%9D%A2%E8%AF%95%E5%BF%85%E5%A4%87%E6%8A%80%E5%B7%A7%E3%80%8B%E2%80%94%E2%80%94%E7%BB%88%E9%9D%A2-HR%E9%9D%A2/</id>
    <published>2019-04-06T15:01:25.000Z</published>
    <updated>2019-04-06T15:19:22.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬ç¯‡ä»‹ç»çš„æ˜¯é¢è¯•çš„ç»ˆé¢ï¼Œå³HRé¢å‡†å¤‡çš„å†…å®¹ã€‚åŸè¯¾ç¨‹é“¾æ¥ï¼š<a href="https://coding.imooc.com/class/129.html">å‰ç«¯è·³æ§½é¢è¯•å¿…å¤‡æŠ€å·§</a></p><span id="more"></span><p>é¢è¯•æŠ€å·§ï¼š</p><ul><li>ä¹è§‚ç§¯æ</li><li><strong>ä¸»åŠ¨æ²Ÿé€š</strong>(é‡è¦)</li><li>é€»è¾‘é¡ºç•…</li><li>ä¸Šè¿›æœ‰è´£ä»»å¿ƒ</li><li>æœ‰ä¸»å¼ ã€åšäº‹æœæ–­</li></ul><blockquote><p>HRè€ƒå¯Ÿæ˜¯æ€§æ ¼ã€å…¬å¸æ–‡åŒ–ã€å›¢é˜Ÿåä½œã€æœ‰æ²¡æœ‰è´£ä»»å¿ƒã€åšäº‹æ˜¯ä¸æ˜¯çº ç»“ã€‚HRæœ‰ä¸€ç¥¨å¦å†³æƒï¼å¾ˆé‡è¦ï¼</p></blockquote><p>å†…å®¹åˆ†å¸ƒï¼š</p><ol><li><p>èŒä¸šç«äº‰åŠ›</p><ul><li><p>ä¸šåŠ¡èƒ½åŠ›</p><p>å¯ä»¥åšåˆ°è¡Œä¸šç¬¬ä¸€</p></li><li><p>æ€è€ƒèƒ½åŠ›</p><p>å¯¹åŒä¸€ä»¶äº‹å¯ä»¥ä»ä¸åŒè§’åº¦å»æ€è€ƒï¼Œæ‰¾åˆ°æœ€ä¼˜è§£</p></li><li><p>å­¦ä¹ èƒ½åŠ›</p><p>ä¸æ–­å­¦ä¹ æ–°çš„ä¸šåŠ¡å’ŒæŠ€æœ¯ï¼Œæ²‰æ·€ã€æ€»ç»“</p></li><li><p>æ— ä¸Šé™çš„ä»˜å‡º</p><p>å¯¹äºæ— æ³•è§£å†³çš„é—®é¢˜å¯ä»¥ç†¬å¤œã€åŠ ç­</p></li></ul></li><li><p>èŒä¸šè§„åˆ’</p><ul><li><p>ç›®æ ‡æ˜¯ä»€ä¹ˆ</p><p>åœ¨ä¸šåŠ¡ä¸Šæˆä¸ºä¸“å®¶ï¼Œåœ¨æŠ€æœ¯ä¸Šæˆä¸ºè¡Œä¸šå¤§ç‰›</p></li><li><p>è¿‘é˜¶æ®µçš„ç›®æ ‡</p><p>ä¸æ–­çš„å­¦ä¹ ç§¯ç´¯å„æ–¹é¢çš„ç»éªŒï¼Œä»¥å­¦ä¹ ä¸ºä¸»</p></li><li><p>é•¿æœŸç›®æ ‡</p><p>åšå‡ ä»¶å¾ˆæœ‰ä»·å€¼çš„äº‹æƒ…ï¼Œå¦‚å¼€æºä½œå“ã€æŠ€æœ¯æ¡†æ¶ç­‰</p></li><li><p>æ–¹å¼æ–¹æ³•</p><p>å…ˆå®Œæˆä¸šåŠ¡ä¸Šçš„ä¸»è¦é—®é¢˜ï¼Œåšåˆ°æè‡´ï¼Œç„¶åé€æ­¥å‘ç›®æ ‡é æ‹¢</p></li></ul></li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ¬ç¯‡ä»‹ç»çš„æ˜¯é¢è¯•çš„ç»ˆé¢ï¼Œå³HRé¢å‡†å¤‡çš„å†…å®¹ã€‚åŸè¯¾ç¨‹é“¾æ¥ï¼š&lt;a href=&quot;https://coding.imooc.com/class/129.html&quot;&gt;å‰ç«¯è·³æ§½é¢è¯•å¿…å¤‡æŠ€å·§&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="å‰ç«¯è·³æ§½é¢è¯•å¿…å¤‡æŠ€å·§" scheme="https://www.toimc.com/categories/%E5%89%8D%E7%AB%AF%E8%B7%B3%E6%A7%BD%E9%9D%A2%E8%AF%95%E5%BF%85%E5%A4%87%E6%8A%80%E5%B7%A7/"/>
    
    
    <category term="å‰ç«¯é¢è¯•" scheme="https://www.toimc.com/tags/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/"/>
    
    <category term="æŠ€å·§æ€»ç»“" scheme="https://www.toimc.com/tags/%E6%8A%80%E5%B7%A7%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
</feed>
